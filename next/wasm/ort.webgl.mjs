/*! For license information please see ort.webgl.mjs.LICENSE.txt */
var backends,backendsSortedByPriority,registerBackend,tryResolveAndInitializeBackend,resolveBackendAndExecutionProviders,version,logLevelValue,env,env2,tensorToDataURL,tensorToImageData,bufferToTensor,tensorFromImage,tensorFromTexture,tensorFromGpuBuffer,tensorFromMLTensor,tensorFromPinnedBuffer,NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP,NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP,isTypedArrayChecked,checkTypedArray,calculateSize,tensorReshape,Tensor,Tensor2,TRACE,TRACE_FUNC,TRACE_FUNC_BEGIN,TRACE_FUNC_END,TRACE_EVENT_BEGIN,TRACE_EVENT_END,InferenceSession,InferenceSession2,NoOpLoggerProvider,ConsoleLoggerProvider,SEVERITY_VALUE,LOGGER_PROVIDER_MAP,LOGGER_DEFAULT_CONFIG,LOGGER_CONFIG_MAP,Logger,Event,EventRecord,Profiler,now,wasm,INT_CACHE,UINT_CACHE,pow_dbl,TWO_PWR_16_DBL,TWO_PWR_24_DBL,TWO_PWR_32_DBL,TWO_PWR_64_DBL,TWO_PWR_63_DBL,TWO_PWR_24,ZERO,UZERO,ONE,UONE,NEG_ONE,MAX_VALUE,MAX_UNSIGNED_VALUE,MIN_VALUE,LongPrototype,long_default,import_arg_type,import_arg_type_and_index,import_attribute,import_attribute_type,import_deprecated_kernel_create_infos,import_deprecated_node_index_and_kernel_def_hash,import_deprecated_session_state,import_deprecated_sub_graph_session_state,import_dimension,import_dimension_value,import_dimension_value_type,import_edge_end,import_graph,import_inference_session,import_kernel_type_str_args_entry,import_kernel_type_str_resolver,import_map_type,import_model,import_node,import_node_edge,import_node_type,import_nodes_to_optimize_indices,import_op_id_kernel_type_str_args_entry,import_operator_set_id,import_runtime_optimization_record,import_runtime_optimization_record_container_entry,import_runtime_optimizations,import_sequence_type,import_shape,import_sparse_tensor,import_string_string_entry,import_tensor2,import_tensor_data_type,import_tensor_type_and_shape,import_type_info,import_type_info_value,import_value_info,import_onnx,ArrayUtil,MatMulUtil,BroadcastUtil,GemmUtil,ProtoUtil,LongUtil,ShapeUtil,SplitUtil,PoolConvUtil,MIN_CLIP,MAX_CLIP,import_guid_typescript,import_onnx2,Tensor4,GLSL_ES_2_0,GLSL_ES_3_0,packProgramMetadata,createPackProgramInfo,createPackProgramInfoLoader,createPackedReshape3DProgramMetadata,createPackedReshape3DProgramInfo,createPackedReshape3DProgramInfoLoader,encodeAsUint8,unpackProgramMetadata,createUnpackProgramInfo,createUnpackProgramInfoLoader,RedFloat32DataEncoder,RGBAFloatDataEncoder,Uint8DataEncoder,createTextureLayoutFromTextureType,calculateTextureWidthAndHeight,createTextureLayoutFromShape,getProgramInfoUniqueKey,WebGLInferenceHandler,AttributeWithCacheKeyImpl,createAttributeWithCacheKey,batchNormalizationProgramMetadata,batchNormalization,parseBatchNormalizationAttributes,createBatchNormalizationProgramInfo,validateInputs,GlslContext,GlslLib,GlslLibRoutine,GlslLibRoutineNode,TopologicalSortGlslRoutines,createBinaryProgramInfoLoader,createBinaryProgramInfo,add2,and2,div,equal,greater,less,mul,or2,pow,pRelu,sub,xor2,cast,parseCastAttributes,validateInputs2,createPackedConcatProgramMetadata,createPackedConcatProgramInfo,createPackedConcatProgramInfoLoader,getShiftedChannelsSnippet,concat,createUnpackedConcatProgramMetadata,createUnpackedConcatProgramInfo,createUnpackedConcatProgramInfoLoader,getTextureIndexWhereDataResidesLinearSearch,getTextureIndexWhereDataResidesBinarySearch,getFetchDataFromCorrectTextureMethod,getGetSizeInConcatAxisValueFromIndexMethod,parseConcatAttributes,validateInputs3,createElementwiseProgramInfo,createElementwiseProgramInfoLoader,abs,acos,asin,atan,clip,parseClipAttributes,clipV11,generateClipAttributesFromInputs,ceil,cos,elu,parseEluAttributes,exp,floor,identity,leakyRelu,parseLeakyReluAttributes,log2,neg,not2,relu,sigmoid,sin,sqrt,tan,tanh,parseInternalActivationAttributes,createUnpackedGroupedConvProgramMetadata,createUnpackedGroupedConvProgramInfo,createUnpackedGroupedConvProgramInfoLoader,createPackedIm2ColProgramMetadata,createPackedIm2ColProgramInfo,createPackedIm2ColProgramInfoLoader,matMul,parseMatMulAttributes,createMatmulProgramMetadata,validateInputs4,createPackedMatmulProgramMetadata,createPackedMatmulProgramInfo,createPackedMatmulProgramInfoLoader,conv2DPacked,createIm2ColProgramMetadata,createIm2ColProgramInfo,createIm2ColProgramInfoLoader,calculateIm2ColDims,createDotProductProgramMetadata,createDotProductProgramInfo,createDotProductProgramInfoLoader,calculateOutputShape,conv,conv2d,conv2DUnpackedPointwise,conv2DUnpacked,getAdjustedConvAttributes,parseConvAttributes,validateInputs5,computeTotalPad,distributePadding,calculateOutputShapeAndPads,convTranspose,convTranspose2d,createConvTransposeProgramMetadata,createUnpackedConvTransposeProgramInfo,createUnpackedConvTransposeProgramInfoLoader,convTranspose2DUnpacked,getAdjustedConvTransposeAttributes,parseConvTransposeAttributes,validateInputs6,transposeProgramMetadata,transpose,parseTransposeAttributes,createTransposeProgramInfo,getAdjustedPerm,getOutputShape,getPermFunctionBody,validateInputs7,depthToSpace,parseDepthToSpaceAttributes,validateInputs8,flatten,parseFlattenAttributes,validateInputs9,NUMBER_TYPES,gather,parseGatherAttributes,gatherProgramMetadata,createGatherProgramInfo,createGatherProgramInfoLoader,validateInputs10,gemm,parseGemmAttributes,parseGemmAttributesV7,parseGemmAttributesV11,createGemmProgramInfoLoader,createGemmProgramInfo,validateInputs11,imageScaler,parseImageScalerAttributes,imageScalerProgramMetadata,createImageScalerProgramInfo,createImageScalerProgramInfoLoader,createGetBiasMethod,validateInputs12,instanceNormalization,parseInstanceNormalizationAttributes,meanAndVarianceProgramMetadata,createMeanAndVarianceProgramInfo,createMeanAndVarianceProgramInfoLoader,computeOutputProgramMetadata,createComputeOutputProgramInfo,createComputeOutputProgramInfoLoader,validateInputs13,lrn,parseLrnAttributes,lrnProgramMetadata,validateInputs14,padProgramMetadata,padV2,parsePadAttributesV2,padV11,parsePadAttributesV11,generatePadAttributesFromInputs,createPadProgramInfo,validateInputsV2,validateInputsV11,getPadFunction,getPadConstant,getPadReflect,getPadEdge,averagePool,parseAveragePoolAttributes,createAveragePoolProgramInfo,globalAveragePool,parseGlobalAveragePoolAttributes,maxPool,parseMaxPoolAttributes,createMaxPoolProgramInfo,getAdjustedPoolAttributesAndOutputShape,globalMaxPoolAttributes,globalMaxPoolMetadata,globalMaxPool,validateInputs15,generatePoolingCode,copyArray,offsetToIndices,reduce,parseReduceAttributes,createReduceProgramInfo,validateInputs16,reduceSum,reduceMean,reduceMax,reduceMin,reduceProd,reduceLogSum,reduceLogSumSquare,reshape,upsampleProgramMetadata,upsample,parseUpsampleAttributesV7,parseUpsampleAttributesV9,parseUpsampleAttributes,createUpsampleProgramInfo,validateInputs17,scalesValidation,resizeProgramMetadata,resize,parseResizeAttributesV10,parseResizeAttributesV11,createPackedResizeProgramInfo,prepareInputs,parseScalesData,parseScalesDataFromOutputSize,shape,validateInputs18,sliceProgramMetadata,slice,parseSliceAttributes,createSliceProgramInfo,validateInputs19,sliceV10,generateSliceAttributesFromInputs,validateInputsV10,softmaxComputeMaxProgramMetadata,softmaxComputeScaleProgramMetadata,softmaxProgramMetadata,softmax,parseSoftmaxAttributes,parseSoftmaxAttributesV13,softmaxV13,computeSoftmax,createComputeMaxProgramInfo,createComputScaleProgramInfo,createSoftMaxProgramInfo,validateInputs20,splitProgramMetadata,split,parseSplitAttributes,getProgramCount,createSplitProgramInfo,validateInputs21,squeeze,squeezeV13,parseSqueezeAttributes,validateInputs22,validateInputsV13,sum,createSumProgramInfo,validateInputs23,tile,createTileProgramInfo,validateInputs24,unsqueeze,unsqueezeV13,parseUnsqueezeAttributes,validateInputs25,validateInputsV132,WEBGL_OP_RESOLVE_RULES,INLINE_FUNC_DEF_REGEX,FUNC_CALL_REGEX,PreferLogicalStrategy,CoordsGlslLib,EncodingGlslLib,FragColorGlslLib,ShapeUtilsGlslLib,VecGlslLib,glslRegistry,GlslPreprocessor,ProgramManager,TextureManager,WebGLSessionHandler,WebGLContext,cache,WebGLBackend,backendsCache,backend,KernelOp,ExecutionPlan,import_onnx3,Attribute2,import_onnx4,Graph2,Value,Node2,GraphImpl,flatbuffers,import_onnx5,Model2,Session,OnnxjsSessionHandler,onnxjsBackend,__create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__esm=(t,e)=>function(){return t&&(e=(0,t[__getOwnPropNames(t)[0]])(t=0)),e},__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__export=(t,e)=>{for(var r in e)__defProp(t,r,{get:e[r],enumerable:!0})},__copyProps=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of __getOwnPropNames(e))__hasOwnProp.call(t,i)||i===r||__defProp(t,i,{get:()=>e[i],enumerable:!(n=__getOwnPropDesc(e,i))||n.enumerable});return t},__toESM=(t,e,r)=>(r=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.__esModule?r:__defProp(r,"default",{value:t,enumerable:!0}),t)),__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),init_backend_impl=__esm({"common/dist/esm/backend-impl.js"(){"use strict";backends=new Map,backendsSortedByPriority=[],registerBackend=(t,e,r)=>{if(e&&"function"==typeof e.init&&"function"==typeof e.createInferenceSessionHandler){let n=backends.get(t);if(void 0===n)backends.set(t,{backend:e,priority:r});else if(n.priority>r)return;else if(n.priority===r&&n.backend!==e)throw Error(`cannot register backend "${t}" using priority ${r}`);if(r>=0){let e=backendsSortedByPriority.indexOf(t);-1!==e&&backendsSortedByPriority.splice(e,1);for(let e=0;e<backendsSortedByPriority.length;e++)if(backends.get(backendsSortedByPriority[e]).priority<=r)return void backendsSortedByPriority.splice(e,0,t);backendsSortedByPriority.push(t)}return}throw TypeError("not a valid backend")},tryResolveAndInitializeBackend=async t=>{let e=backends.get(t);if(!e)return"backend not found.";if(e.initialized)return e.backend;{if(e.aborted)return e.error;let r=!!e.initPromise;try{return r||(e.initPromise=e.backend.init(t)),await e.initPromise,e.initialized=!0,e.backend}catch(t){return r||(e.error=`${t}`,e.aborted=!0),e.error}finally{delete e.initPromise}}},resolveBackendAndExecutionProviders=async t=>{let e,r=t.executionProviders||[],n=r.map(t=>"string"==typeof t?t:t.name),i=0===n.length?backendsSortedByPriority:n,o=[],s=new Set;for(let t of i){let r=await tryResolveAndInitializeBackend(t);"string"==typeof r?o.push({name:t,err:r}):(e||(e=r),e===r&&s.add(t))}if(!e)throw Error(`no available backend found. ERR: ${o.map(t=>`[${t.name}] ${t.err}`).join(", ")}`);for(let{name:t,err:e}of o)n.includes(t)&&console.warn(`removing requested execution provider "${t}" from session options because it is not available: ${e}`);let a=r.filter(t=>s.has("string"==typeof t?t:t.name));return[e,new Proxy(t,{get:(t,e)=>"executionProviders"===e?a:Reflect.get(t,e)})]}}}),init_backend=__esm({"common/dist/esm/backend.js"(){"use strict";init_backend_impl()}}),init_version=__esm({"common/dist/esm/version.js"(){"use strict";version="1.23.2"}}),init_env_impl=__esm({"common/dist/esm/env-impl.js"(){"use strict";init_version(),logLevelValue="warning",Object.defineProperty(env={wasm:{},webgl:{},webgpu:{},versions:{common:version},set logLevel(value){if(void 0===value)return;if("string"!=typeof value||-1===["verbose","info","warning","error","fatal"].indexOf(value))throw Error(`Unsupported logging level: ${value}`);logLevelValue=value},get logLevel(){return logLevelValue}},"logLevel",{enumerable:!0})}}),init_env=__esm({"common/dist/esm/env.js"(){"use strict";init_env_impl(),env2=env}}),init_tensor_conversion_impl=__esm({"common/dist/esm/tensor-conversion-impl.js"(){"use strict";tensorToDataURL=(t,e)=>{let r="undefined"!=typeof document?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(null!=n){let i,o,s,a;e?.tensorLayout!==void 0&&"NHWC"===e.tensorLayout?(i=t.dims[2],o=t.dims[3]):(i=t.dims[3],o=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",l=e?.norm;void 0===l||void 0===l.mean?s=[255,255,255,255]:"number"==typeof l.mean?s=[l.mean,l.mean,l.mean,l.mean]:(s=[l.mean[0],l.mean[1],l.mean[2],0],void 0!==l.mean[3]&&(s[3]=l.mean[3])),void 0===l||void 0===l.bias?a=[0,0,0,0]:"number"==typeof l.bias?a=[l.bias,l.bias,l.bias,l.bias]:(a=[l.bias[0],l.bias[1],l.bias[2],0],void 0!==l.bias[3]&&(a[3]=l.bias[3]));let c=o*i,d=0,p=c,h=2*c,f=-1;"RGBA"===u?(d=0,p=c,h=2*c,f=3*c):"RGB"===u?(d=0,p=c,h=2*c):"RBG"===u&&(d=0,h=c,p=2*c);for(let e=0;e<o;e++)for(let r=0;r<i;r++)n.fillStyle="rgba("+(t.data[d++]-a[0])*s[0]+","+(t.data[p++]-a[1])*s[1]+","+(t.data[h++]-a[2])*s[2]+","+(-1===f?255:(t.data[f++]-a[3])*s[3])+")",n.fillRect(r,e,1,1);if("toDataURL"in r)return r.toDataURL();throw Error("toDataURL is not supported")}throw Error("Can not access image data")},tensorToImageData=(t,e)=>{let r,n="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null!=n){let i,o,s,a,u;e?.tensorLayout!==void 0&&"NHWC"===e.tensorLayout?(i=t.dims[2],o=t.dims[1],s=t.dims[3]):(i=t.dims[3],o=t.dims[2],s=t.dims[1]);let l=void 0!==e&&void 0!==e.format?e.format:"RGB",c=e?.norm;void 0===c||void 0===c.mean?a=[255,255,255,255]:"number"==typeof c.mean?a=[c.mean,c.mean,c.mean,c.mean]:(a=[c.mean[0],c.mean[1],c.mean[2],255],void 0!==c.mean[3]&&(a[3]=c.mean[3])),void 0===c||void 0===c.bias?u=[0,0,0,0]:"number"==typeof c.bias?u=[c.bias,c.bias,c.bias,c.bias]:(u=[c.bias[0],c.bias[1],c.bias[2],0],void 0!==c.bias[3]&&(u[3]=c.bias[3]));let d=o*i;if(void 0!==e&&(void 0!==e.format&&4===s&&"RGBA"!==e.format||3===s&&"RGB"!==e.format&&"BGR"!==e.format))throw Error("Tensor format doesn't match input tensor dims");let p=4,h=0,f=1,b=2,g=3,m=0,y=d,_=2*d,x=-1;"RGBA"===l?(m=0,y=d,_=2*d,x=3*d):"RGB"===l?(m=0,y=d,_=2*d):"RBG"===l&&(m=0,_=d,y=2*d),r=n.createImageData(i,o);for(let e=0;e<o*i;h+=p,f+=p,b+=p,g+=p,e++)r.data[h]=(t.data[m++]-u[0])*a[0],r.data[f]=(t.data[y++]-u[1])*a[1],r.data[b]=(t.data[_++]-u[2])*a[2],r.data[g]=-1===x?255:(t.data[x++]-u[3])*a[3]}else throw Error("Can not access image data");return r}}}),init_tensor_factory_impl=__esm({"common/dist/esm/tensor-factory-impl.js"(){"use strict";init_tensor_impl(),bufferToTensor=(t,e)=>{let r,n;if(void 0===t)throw Error("Image buffer must be defined");if(void 0===e.height||void 0===e.width)throw Error("Image height and width must be defined");if("NHWC"===e.tensorLayout)throw Error("NHWC Tensor layout is not supported yet");let{height:i,width:o}=e,s=e.norm??{mean:255,bias:0};r="number"==typeof s.mean?[s.mean,s.mean,s.mean,s.mean]:[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],n="number"==typeof s.bias?[s.bias,s.bias,s.bias,s.bias]:[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let a=void 0!==e.format?e.format:"RGBA",u=void 0!==e.tensorFormat&&void 0!==e.tensorFormat?e.tensorFormat:"RGB",l=i*o,c=new Float32Array("RGBA"===u?4*l:3*l),d=4,p=0,h=1,f=2,b=3,g=0,m=l,y=2*l,_=-1;"RGB"===a&&(d=3,p=0,h=1,f=2,b=-1),"RGBA"===u?_=3*l:"RBG"===u?(g=0,y=l,m=2*l):"BGR"===u&&(y=0,m=l,g=2*l);for(let e=0;e<l;e++,p+=d,f+=d,h+=d,b+=d)c[g++]=(t[p]+n[0])/r[0],c[m++]=(t[h]+n[1])/r[1],c[y++]=(t[f]+n[2])/r[2],-1!==_&&-1!==b&&(c[_++]=(t[b]+n[3])/r[3]);return"RGBA"===u?new Tensor("float32",c,[1,4,i,o]):new Tensor("float32",c,[1,3,i,o])},tensorFromImage=async(t,e)=>{let r,n="undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement,i="undefined"!=typeof ImageData&&t instanceof ImageData,o="undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap,s="string"==typeof t,a=e??{},u=()=>{if("undefined"!=typeof document)return document.createElement("canvas");if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(1,1);throw Error("Canvas is not supported")},l=t=>"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||t instanceof OffscreenCanvas?t.getContext("2d"):null;if(n){let n=u();n.width=t.width,n.height=t.height;let i=l(n);if(null!=i){let n=t.height,o=t.width;if(void 0!==e&&void 0!==e.resizedHeight&&void 0!==e.resizedWidth&&(n=e.resizedHeight,o=e.resizedWidth),void 0!==e){if(a=e,void 0!==e.tensorFormat)throw Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=n,a.width=o}else a.tensorFormat="RGBA",a.height=n,a.width=o;i.drawImage(t,0,0),r=i.getImageData(0,0,o,n).data}else throw Error("Can not access image data")}else if(i){let n,i;if(void 0!==e&&void 0!==e.resizedWidth&&void 0!==e.resizedHeight?(n=e.resizedHeight,i=e.resizedWidth):(n=t.height,i=t.width),void 0!==e&&(a=e),a.format="RGBA",a.height=n,a.width=i,void 0!==e){let e=u();e.width=i,e.height=n;let o=l(e);if(null!=o)o.putImageData(t,0,0),r=o.getImageData(0,0,i,n).data;else throw Error("Can not access image data")}else r=t.data}else if(o){if(void 0===e)throw Error("Please provide image config with format for Imagebitmap");let n=u();n.width=t.width,n.height=t.height;let i=l(n);if(null!=i){let e=t.height,n=t.width;return i.drawImage(t,0,0,n,e),r=i.getImageData(0,0,n,e).data,a.height=e,a.width=n,bufferToTensor(r,a)}throw Error("Can not access image data")}else if(s)return new Promise((e,r)=>{let n=u(),i=l(n);if(!t||!i)return r();let o=new Image;o.crossOrigin="Anonymous",o.src=t,o.onload=()=>{n.width=o.width,n.height=o.height,i.drawImage(o,0,0,n.width,n.height);let t=i.getImageData(0,0,n.width,n.height);a.height=n.height,a.width=n.width,e(bufferToTensor(t.data,a))}});else throw Error("Input data provided is not supported - aborted tensor creation");if(void 0!==r)return bufferToTensor(r,a);throw Error("Input data provided is not supported - aborted tensor creation")},tensorFromTexture=(t,e)=>{let{width:r,height:n,download:i,dispose:o}=e;return new Tensor({location:"texture",type:"float32",texture:t,dims:[1,n,r,4],download:i,dispose:o})},tensorFromGpuBuffer=(t,e)=>{let{dataType:r,dims:n,download:i,dispose:o}=e;return new Tensor({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:i,dispose:o})},tensorFromMLTensor=(t,e)=>{let{dataType:r,dims:n,download:i,dispose:o}=e;return new Tensor({location:"ml-tensor",type:r??"float32",mlTensor:t,dims:n,download:i,dispose:o})},tensorFromPinnedBuffer=(t,e,r)=>new Tensor({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}}),init_tensor_impl_type_mapping=__esm({"common/dist/esm/tensor-impl-type-mapping.js"(){"use strict";NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),isTypedArrayChecked=!1,checkTypedArray=()=>{if(!isTypedArrayChecked){isTypedArrayChecked=!0;let t="undefined"!=typeof BigInt64Array&&BigInt64Array.from,e="undefined"!=typeof BigUint64Array&&BigUint64Array.from,r=globalThis.Float16Array,n=void 0!==r&&r.from;t&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64")),e&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64")),n?(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("float16",r),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(r,"float16")):NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("float16",Uint16Array)}}}}),init_tensor_utils_impl=__esm({"common/dist/esm/tensor-utils-impl.js"(){"use strict";init_tensor_impl(),calculateSize=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if("number"!=typeof n||!Number.isSafeInteger(n))throw TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},tensorReshape=(t,e)=>{switch(t.location){case"cpu":return new Tensor(t.type,t.data,e);case"cpu-pinned":return new Tensor({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new Tensor({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new Tensor({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});case"ml-tensor":return new Tensor({location:"ml-tensor",mlTensor:t.mlTensor,type:t.type,dims:e});default:throw Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}}),init_tensor_impl=__esm({"common/dist/esm/tensor-impl.js"(){"use strict";init_tensor_conversion_impl(),init_tensor_factory_impl(),init_tensor_impl_type_mapping(),init_tensor_utils_impl(),Tensor=class{constructor(t,e,r){let n,i;if(checkTypedArray(),"object"==typeof t&&"location"in t)switch(this.dataLocation=t.location,n=t.type,i=t.dims,t.location){case"cpu-pinned":{let e=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(n);if(!e)throw TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof e))throw TypeError(`buffer should be of type ${e.name}`);this.cpuData=t.data;break}case"texture":if("float32"!==n)throw TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break;case"gpu-buffer":if("float32"!==n&&"float16"!==n&&"int32"!==n&&"int64"!==n&&"uint32"!==n&&"uint8"!==n&&"bool"!==n&&"uint4"!==n&&"int4"!==n)throw TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break;case"ml-tensor":if("float32"!==n&&"float16"!==n&&"int32"!==n&&"int64"!==n&&"uint32"!==n&&"uint64"!==n&&"int8"!==n&&"uint8"!==n&&"bool"!==n&&"uint4"!==n&&"int4"!==n)throw TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break;default:throw Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,s;if("string"==typeof t)if(n=t,s=r,"string"===t){if(!Array.isArray(e))throw TypeError("A string tensor's data must be a string array.");o=e}else{let r=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(t);if(void 0===r)throw TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e))if("float16"===t&&r===Uint16Array||"uint4"===t||"int4"===t)throw TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${r.name} as data.`);else o="uint64"===t||"int64"===t?r.from(e,BigInt):r.from(e);else if(e instanceof r)o=e;else if(e instanceof Uint8ClampedArray)if("uint8"===t)o=Uint8Array.from(e);else throw TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if("float16"===t&&e instanceof Uint16Array&&r!==Uint16Array)o=new globalThis.Float16Array(e.buffer,e.byteOffset,e.length);else throw TypeError(`A ${n} tensor's data must be type of ${r}`)}else if(s=e,Array.isArray(t)){if(0===t.length)throw TypeError("Tensor type cannot be inferred from an empty array.");let e=typeof t[0];if("string"===e)n="string",o=t;else if("boolean"===e)n="bool",o=Uint8Array.from(t);else throw TypeError(`Invalid element type of data array: ${e}.`)}else if(t instanceof Uint8ClampedArray)n="uint8",o=Uint8Array.from(t);else{let e=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(t.constructor);if(void 0===e)throw TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=e,o=t}if(void 0===s)s=[o.length];else if(!Array.isArray(s))throw TypeError("A tensor's dims must be a number array");i=s,this.cpuData=o,this.dataLocation="cpu"}let o=calculateSize(i);if(this.cpuData&&o!==this.cpuData.length)if(("uint4"===n||"int4"===n)&&Math.ceil(o/2)===this.cpuData.length);else throw Error(`Tensor's size(${o}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=o}static async fromImage(t,e){return tensorFromImage(t,e)}static fromTexture(t,e){return tensorFromTexture(t,e)}static fromGpuBuffer(t,e){return tensorFromGpuBuffer(t,e)}static fromMLTensor(t,e){return tensorFromMLTensor(t,e)}static fromPinnedBuffer(t,e,r){return tensorFromPinnedBuffer(t,e,r)}toDataURL(t){return tensorToDataURL(this,t)}toImageData(t){return tensorToImageData(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":if(!this.downloader)throw Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}default:throw Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw Error("Cannot reshape a tensor that owns GPU resource.");return tensorReshape(this,t)}}}}),init_tensor=__esm({"common/dist/esm/tensor.js"(){"use strict";init_tensor_impl(),Tensor2=Tensor}}),init_trace=__esm({"common/dist/esm/trace.js"(){"use strict";init_env_impl(),TRACE=(t,e)=>{(void 0===env.trace?env.wasm.trace:env.trace)&&console.timeStamp(`${t}::ORT::${e}`)},TRACE_FUNC=(t,e)=>{let r=Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){let n=`FUNC_${t}::${r[i].trim().split(" ")[1]}`;e&&(n+=`::${e}`),TRACE("CPU",n);return}r[i].includes("TRACE_FUNC")&&(n=!0)}},TRACE_FUNC_BEGIN=t=>{(void 0===env.trace?env.wasm.trace:env.trace)&&TRACE_FUNC("BEGIN",t)},TRACE_FUNC_END=t=>{(void 0===env.trace?env.wasm.trace:env.trace)&&TRACE_FUNC("END",t)},TRACE_EVENT_BEGIN=t=>{(void 0===env.trace?env.wasm.trace:env.trace)&&console.time(`ORT::${t}`)},TRACE_EVENT_END=t=>{(void 0===env.trace?env.wasm.trace:env.trace)&&console.timeEnd(`ORT::${t}`)}}}),init_inference_session_impl=__esm({"common/dist/esm/inference-session-impl.js"(){"use strict";init_backend_impl(),init_tensor(),init_trace(),InferenceSession=class t{constructor(t){this.handler=t}async run(t,e,r){TRACE_FUNC_BEGIN(),TRACE_EVENT_BEGIN("InferenceSession.run");let n={},i={};if("object"!=typeof t||null===t||t instanceof Tensor2||Array.isArray(t))throw TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if("object"==typeof e){if(null===e)throw TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof Tensor2)throw TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(0===e.length)throw TypeError("'fetches' cannot be an empty array.");for(let t of(o=!1,e)){if("string"!=typeof t)throw TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(t))throw RangeError(`'fetches' contains invalid output name: ${t}.`);n[t]=null}if("object"==typeof r&&null!==r)i=r;else if(void 0!==r)throw TypeError("'options' must be an object.")}else{let t=!1,s=Object.getOwnPropertyNames(e);for(let r of this.outputNames)if(-1!==s.indexOf(r)){let i=e[r];(null===i||i instanceof Tensor2)&&(t=!0,o=!1,n[r]=i)}if(t){if("object"==typeof r&&null!==r)i=r;else if(void 0!==r)throw TypeError("'options' must be an object.")}else i=e}}else if(void 0!==e)throw TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let e of this.inputNames)if(void 0===t[e])throw Error(`input '${e}' is missing in 'feeds'.`);if(o)for(let t of this.outputNames)n[t]=null;let s=await this.handler.run(t,n,i),a={};for(let t in s)if(Object.hasOwnProperty.call(s,t)){let e=s[t];e instanceof Tensor2?a[t]=e:a[t]=new Tensor2(e.type,e.data,e.dims)}return TRACE_EVENT_END("InferenceSession.run"),TRACE_FUNC_END(),a}async release(){return this.handler.dispose()}static async create(e,r,n,i){let o;TRACE_FUNC_BEGIN(),TRACE_EVENT_BEGIN("InferenceSession.create");let s={};if("string"==typeof e){if(o=e,"object"==typeof r&&null!==r)s=r;else if(void 0!==r)throw TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(o=e,"object"==typeof r&&null!==r)s=r;else if(void 0!==r)throw TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer){let t=e,a=0,u=e.byteLength;if("object"==typeof r&&null!==r)s=r;else if("number"==typeof r){if(!Number.isSafeInteger(a=r))throw RangeError("'byteOffset' must be an integer.");if(a<0||a>=t.byteLength)throw RangeError(`'byteOffset' is out of range [0, ${t.byteLength}).`);if(u=e.byteLength-a,"number"==typeof n){if(!Number.isSafeInteger(u=n))throw RangeError("'byteLength' must be an integer.");if(u<=0||a+u>t.byteLength)throw RangeError(`'byteLength' is out of range (0, ${t.byteLength-a}].`);if("object"==typeof i&&null!==i)s=i;else if(void 0!==i)throw TypeError("'options' must be an object.")}else if(void 0!==n)throw TypeError("'byteLength' must be a number.")}else if(void 0!==r)throw TypeError("'options' must be an object.");o=new Uint8Array(t,a,u)}else throw TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[a,u]=await resolveBackendAndExecutionProviders(s),l=await a.createInferenceSessionHandler(o,u);return TRACE_EVENT_END("InferenceSession.create"),TRACE_FUNC_END(),new t(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}}),init_inference_session=__esm({"common/dist/esm/inference-session.js"(){"use strict";init_inference_session_impl(),InferenceSession2=InferenceSession}}),init_tensor_conversion=__esm({"common/dist/esm/tensor-conversion.js"(){}}),init_tensor_factory=__esm({"common/dist/esm/tensor-factory.js"(){}}),init_onnx_model=__esm({"common/dist/esm/onnx-model.js"(){}}),init_onnx_value=__esm({"common/dist/esm/onnx-value.js"(){}}),esm_exports={};__export(esm_exports,{InferenceSession:()=>InferenceSession2,TRACE:()=>TRACE,TRACE_EVENT_BEGIN:()=>TRACE_EVENT_BEGIN,TRACE_EVENT_END:()=>TRACE_EVENT_END,TRACE_FUNC_BEGIN:()=>TRACE_FUNC_BEGIN,TRACE_FUNC_END:()=>TRACE_FUNC_END,Tensor:()=>Tensor2,env:()=>env2,registerBackend:()=>registerBackend});var init_esm=__esm({"common/dist/esm/index.js"(){"use strict";init_backend(),init_env(),init_inference_session(),init_tensor(),init_tensor_conversion(),init_tensor_factory(),init_trace(),init_onnx_model(),init_onnx_value()}});function log(t,e,r,n){if(void 0===e)return createCategorizedLogger(t);if(void 0===r)logInternal(t,e,1);else if("number"==typeof r&&void 0===n)logInternal(t,e,r);else if("string"==typeof r&&void 0===n)logInternal(t,r,1,e);else if("string"==typeof r&&"number"==typeof n)logInternal(t,r,n,e);else throw TypeError("input is valid")}function createCategorizedLogger(t){return{verbose:log.verbose.bind(null,t),info:log.info.bind(null,t),warning:log.warning.bind(null,t),error:log.error.bind(null,t),fatal:log.fatal.bind(null,t)}}function logInternal(t,e,r,n){let i=LOGGER_CONFIG_MAP[n||""]||LOGGER_CONFIG_MAP[""];SEVERITY_VALUE[t]<SEVERITY_VALUE[i.minimalSeverity]||(i.logDateTime&&(e=`${new Date().toISOString()}|${e}`),i.logSourceLocation,LOGGER_PROVIDER_MAP[i.provider].log(t,e,n))}var init_instrument=__esm({"web/lib/onnxjs/instrument.ts"(){"use strict";NoOpLoggerProvider=class{log(t,e,r){}},ConsoleLoggerProvider=class{log(t,e,r){console.log(`${this.color(t)} ${r?"\x1b[35m"+r+"\x1b[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";case"fatal":return"\x1b[101mf\x1b[0m";default:throw Error(`unsupported severity: ${t}`)}}},SEVERITY_VALUE={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},LOGGER_PROVIDER_MAP={none:new NoOpLoggerProvider,console:new ConsoleLoggerProvider},LOGGER_CONFIG_MAP={"":LOGGER_DEFAULT_CONFIG={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1}},(t=>{function e(e,r){t("verbose",e,r)}function r(e,r){t("info",e,r)}function n(e,r){t("warning",e,r)}function i(e,r){t("error",e,r)}function o(e,r){t("fatal",e,r)}function s(t){LOGGER_CONFIG_MAP={},a("",t||{})}function a(t,e){if("*"===t)s(e);else{let r=LOGGER_CONFIG_MAP[t]||LOGGER_DEFAULT_CONFIG;LOGGER_CONFIG_MAP[t]={provider:e.provider||r.provider,minimalSeverity:e.minimalSeverity||r.minimalSeverity,logDateTime:void 0===e.logDateTime?r.logDateTime:e.logDateTime,logSourceLocation:void 0===e.logSourceLocation?r.logSourceLocation:e.logSourceLocation}}}t.verbose=e,t.info=r,t.warning=n,t.error=i,t.fatal=o,t.reset=s,t.set=a,t.setWithEnv=function(t){let e={};t.logLevel&&(e.minimalSeverity=t.logLevel),a("",e)}})(log||(log={})),Logger=log,Event=class{constructor(t,e,r,n,i,o){this.category=t,this.name=e,this.startTime=r,this.endCallback=n,this.timer=i,this.ctx=o}async end(){return this.endCallback(this)}async checkTimer(){if(void 0!==this.ctx&&void 0!==this.timer)return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer);throw Error("No webgl timer found")}},EventRecord=class{constructor(t,e,r,n){this.category=t,this.name=e,this.startTime=r,this.endTime=n}},Profiler=class{constructor(t,e,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===r?5e3:r}static create(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=now(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,r,n){let i=this._started?this.begin(t,e,n):void 0,o=!1,s=r();if(s&&"function"==typeof s.then)return o=!0,new Promise((t,e)=>{s.then(async e=>{i&&await i.end(),t(e)},async t=>{i&&await i.end(),e(t)})});if(!o&&i){let t=i.end();if(t&&"function"==typeof t.then)return new Promise((e,r)=>{t.then(()=>{e(s)},t=>{r(t)})})}return s}begin(t,e,r){if(!this._started)throw Error("profiler is not started yet");if(void 0!==r)return new Event(t,e,0,async t=>this.end(t),r.beginTimer(),r);{let r=now();return this.flush(r),new Event(t,e,r,t=>this.endSync(t))}}async end(t){let e=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new EventRecord(t.category,t.name,t.startTime,e)),this.flush(e))}endSync(t){let e=now();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new EventRecord(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){Logger.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=now()}}get started(){return this._started}},now="undefined"!=typeof performance&&performance.now?()=>performance.now():Date.now}});function resolveOperator(t,e,r){for(let n of r){let r=n[0],i=n[1],o=n[2],s=n[3],a=n[4];if(t.opType===r){for(let t of e)if((t.domain===i||"ai.onnx"===t.domain&&""===i)&&matchSelector(t.version,o))return{opImpl:s,opInit:a}}}throw TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(t=>`${t.domain||"ai.onnx"} v${t.version}`).join(", ")}`)}function matchSelector(t,e){if(e.endsWith("+")){let r=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(r)&&r<=t}if(2!==e.split("-").length)return Number.parseInt(e,10)===t;{let r=e.split("-"),n=Number.parseInt(r[0],10),i=Number.parseInt(r[1],10);return!isNaN(n)&&!isNaN(i)&&n<=t&&t<=i}}var init_opset=__esm({"web/lib/onnxjs/opset.ts"(){}}),require_guid=__commonJS({"web/node_modules/guid-typescript/dist/guid.js"(t){"use strict";t.__esModule=!0,t.Guid=function(){function t(e){if(!e)throw TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var r=e.toString();return e&&(e instanceof t||t.validator.test(r))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",r=0;r<t;r++)e+=((1+Math.random())*65536|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}()}});function Long(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function isLong(t){return!0===(t&&t.__isLong__)}function ctz32(t){var e=Math.clz32(t&-t);return t?31-e:e}function fromInt(t,e){var r,n,i;if(e)return(t>>>=0,(i=0<=t&&t<256)&&(n=UINT_CACHE[t]))?n:(r=fromBits(t,0,!0),i&&(UINT_CACHE[t]=r),r);return(t|=0,(i=-128<=t&&t<128)&&(n=INT_CACHE[t]))?n:(r=fromBits(t,t<0?-1:0,!1),i&&(INT_CACHE[t]=r),r)}function fromNumber(t,e){if(isNaN(t))return e?UZERO:ZERO;if(e){if(t<0)return UZERO;if(t>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(t<=-TWO_PWR_63_DBL)return MIN_VALUE;if(t+1>=TWO_PWR_63_DBL)return MAX_VALUE}return t<0?fromNumber(-t,e).neg():fromBits(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,e)}function fromBits(t,e,r){return new Long(t,e,r)}function fromString(t,e,r){if(0===t.length)throw Error("empty string");if("number"==typeof e?(r=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?UZERO:ZERO;if((r=r||10)<2||36<r)throw RangeError("radix");if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return fromString(t.substring(1),e,r).neg();for(var n,i=fromNumber(pow_dbl(r,8)),o=ZERO,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),r);if(a<8){var l=fromNumber(pow_dbl(r,a));o=o.mul(l).add(fromNumber(u))}else o=(o=o.mul(i)).add(fromNumber(u))}return o.unsigned=e,o}function fromValue(t,e){return"number"==typeof t?fromNumber(t,e):"string"==typeof t?fromString(t,e):fromBits(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}var init_long=__esm({"web/node_modules/long/index.js"(){wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong,INT_CACHE={},UINT_CACHE={},Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits,pow_dbl=Math.pow,Long.fromString=fromString,Long.fromValue=fromValue,TWO_PWR_24_DBL=0x1000000,TWO_PWR_63_DBL=(TWO_PWR_64_DBL=(TWO_PWR_32_DBL=(TWO_PWR_16_DBL=65536)*TWO_PWR_16_DBL)*TWO_PWR_32_DBL)/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),Long.ZERO=ZERO=fromInt(0),Long.UZERO=UZERO=fromInt(0,!0),Long.ONE=ONE=fromInt(1),Long.UONE=UONE=fromInt(1,!0),Long.NEG_ONE=NEG_ONE=fromInt(-1),Long.MAX_VALUE=MAX_VALUE=fromBits(-1,0x7fffffff,!1),Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0),Long.MIN_VALUE=MIN_VALUE=fromBits(0,-0x80000000,!1),(LongPrototype=Long.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(!this.eq(MIN_VALUE))return"-"+this.neg().toString(t);else{var e=fromNumber(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}for(var i=fromNumber(pow_dbl(t,6),this.unsigned),o=this,s="";;){var a=o.div(i),u=(o.sub(a.mul(i)).toInt()>>>0).toString(t);if((o=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return 0!=this.high?e+33:e+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return(1&this.low)==1},LongPrototype.isEven=function(){return(1&this.low)==0},LongPrototype.equals=function(t){return isLong(t)||(t=fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(t){return!this.eq(t)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(t){return 0>this.comp(t)},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(t){return 0>=this.comp(t)},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(t){return this.comp(t)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(t){if(isLong(t)||(t=fromValue(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(t){isLong(t)||(t=fromValue(t));var e,r,n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=t.high>>>16,u=65535&t.high,l=t.low>>>16,c=65535&t.low,d=0,p=0;return e=0+((r=0+(s+c))>>>16),r&=65535,e+=o+l,p+=e>>>16,e&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=n+a,fromBits(e<<16|r,(d&=65535)<<16|p,this.unsigned)},LongPrototype.subtract=function(t){return isLong(t)||(t=fromValue(t)),this.add(t.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(t){if(this.isZero())return this;if(isLong(t)||(t=fromValue(t)),wasm)return fromBits(wasm.mul(this.low,this.high,t.low,t.high),wasm.get_high(),this.unsigned);if(t.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return t.isOdd()?MIN_VALUE:ZERO;if(t.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())if(t.isNegative())return this.neg().mul(t.neg());else return this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(TWO_PWR_24)&&t.lt(TWO_PWR_24))return fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var e,r,n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=t.high>>>16,u=65535&t.high,l=t.low>>>16,c=65535&t.low,d=0,p=0;return e=0+((r=0+s*c)>>>16),r&=65535,e+=o*c,p+=e>>>16,e&=65535,e+=s*l,p+=e>>>16,e&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=o*l,d+=p>>>16,p&=65535,p+=s*u,d+=p>>>16,p&=65535,d+=n*c+i*l+o*u+s*a,fromBits(e<<16|r,(d&=65535)<<16|p,this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(t){if(isLong(t)||(t=fromValue(t)),t.isZero())throw Error("division by zero");if(wasm){var e,r,n;return this.unsigned||-0x80000000!==this.high||-1!==t.low||-1!==t.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,t.low,t.high),wasm.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return UZERO;if(t.gt(this.shru(1)))return UONE;n=UZERO}else{if(this.eq(MIN_VALUE))if(t.eq(ONE)||t.eq(NEG_ONE))return MIN_VALUE;else return t.eq(MIN_VALUE)?ONE:(e=this.shr(1).div(t).shl(1)).eq(ZERO)?t.isNegative()?ONE:NEG_ONE:(r=this.sub(t.mul(e)),n=e.add(r.div(t)));if(t.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();n=ZERO}for(r=this;r.gte(t);){for(var i=Math.ceil(Math.log(e=Math.max(1,Math.floor(r.toNumber()/t.toNumber())))/Math.LN2),o=i<=48?1:pow_dbl(2,i-48),s=fromNumber(e),a=s.mul(t);a.isNegative()||a.gt(r);)e-=o,a=(s=fromNumber(e,this.unsigned)).mul(t);s.isZero()&&(s=ONE),n=n.add(s),r=r.sub(a)}return n},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(t){return(isLong(t)||(t=fromValue(t)),wasm)?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,t.low,t.high),wasm.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},LongPrototype.clz=LongPrototype.countLeadingZeros,LongPrototype.countTrailingZeros=function(){return this.low?ctz32(this.low):ctz32(this.high)+32},LongPrototype.ctz=LongPrototype.countTrailingZeros,LongPrototype.and=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low&t.low,this.high&t.high,this.unsigned)},LongPrototype.or=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low|t.low,this.high|t.high,this.unsigned)},LongPrototype.xor=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low^t.low,this.high^t.high,this.unsigned)},LongPrototype.shiftLeft=function(t){return(isLong(t)&&(t=t.toInt()),0==(t&=63))?this:t<32?fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):fromBits(0,this.low<<t-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(t){return(isLong(t)&&(t=t.toInt()),0==(t&=63))?this:t<32?fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(t){return(isLong(t)&&(t=t.toInt()),0==(t&=63))?this:t<32?fromBits(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):32===t?fromBits(this.high,0,this.unsigned):fromBits(this.high>>>t-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.rotateLeft=function(t){var e;return(isLong(t)&&(t=t.toInt()),0==(t&=63))?this:32===t?fromBits(this.high,this.low,this.unsigned):t<32?(e=32-t,fromBits(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,fromBits(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},LongPrototype.rotl=LongPrototype.rotateLeft,LongPrototype.rotateRight=function(t){var e;return(isLong(t)&&(t=t.toInt()),0==(t&=63))?this:32===t?fromBits(this.high,this.low,this.unsigned):t<32?(e=32-t,fromBits(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,fromBits(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},LongPrototype.rotr=LongPrototype.rotateRight,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},LongPrototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},Long.fromBytes=function(t,e,r){return r?Long.fromBytesLE(t,e):Long.fromBytesBE(t,e)},Long.fromBytesLE=function(t,e){return new Long(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Long.fromBytesBE=function(t,e){return new Long(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},long_default=Long}}),require_arg_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/arg-type.js"(t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.ArgType=void 0,function(t){t[t.INPUT=0]="INPUT",t[t.OUTPUT=1]="OUTPUT"}(e||(t.ArgType=e={}))}}),require_constants=__commonJS({"web/node_modules/flatbuffers/js/constants.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZE_PREFIX_LENGTH=t.FILE_IDENTIFIER_LENGTH=t.SIZEOF_INT=t.SIZEOF_SHORT=void 0,t.SIZEOF_SHORT=2,t.SIZEOF_INT=4,t.FILE_IDENTIFIER_LENGTH=4,t.SIZE_PREFIX_LENGTH=4}}),require_utils=__commonJS({"web/node_modules/flatbuffers/js/utils.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLittleEndian=t.float64=t.float32=t.int32=void 0,t.int32=new Int32Array(2),t.float32=new Float32Array(t.int32.buffer),t.float64=new Float64Array(t.int32.buffer),t.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]}}),require_encoding=__commonJS({"web/node_modules/flatbuffers/js/encoding.js"(t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Encoding=void 0,function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(e||(t.Encoding=e={}))}}),require_byte_buffer=__commonJS({"web/node_modules/flatbuffers/js/byte-buffer.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=void 0;var e=require_constants(),r=require_utils(),n=require_encoding();t.ByteBuffer=class t{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new t(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return r.int32[0]=this.readInt32(t),r.float32[0]}readFloat64(t){return r.int32[+!r.isLittleEndian]=this.readInt32(t),r.int32[+!!r.isLittleEndian]=this.readInt32(t+4),r.float64[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])}writeFloat64(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[+!r.isLittleEndian]),this.writeInt32(t+4,r.int32[+!!r.isLittleEndian])}getBufferIdentifier(){if(this.bytes_.length<this.position_+e.SIZEOF_INT+e.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let r=0;r<e.FILE_IDENTIFIER_LENGTH;r++)t+=String.fromCharCode(this.readInt8(this.position_+e.SIZEOF_INT+r));return t}__offset(t,e){let r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,r){t+=this.readInt32(t);let i=this.readInt32(t);t+=e.SIZEOF_INT;let o=this.bytes_.subarray(t,t+i);return r===n.Encoding.UTF8_BYTES?o:this.text_decoder_.decode(o)}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+e.SIZEOF_INT}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=e.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+e.FILE_IDENTIFIER_LENGTH);for(let r=0;r<e.FILE_IDENTIFIER_LENGTH;r++)if(t.charCodeAt(r)!=this.readInt8(this.position()+e.SIZEOF_INT+r))return!1;return!0}createScalarList(t,e){let r=[];for(let n=0;n<e;++n){let e=t(n);null!==e&&r.push(e)}return r}createObjList(t,e){let r=[];for(let n=0;n<e;++n){let e=t(n);null!==e&&r.push(e.unpack())}return r}}}}),require_builder=__commonJS({"web/node_modules/flatbuffers/js/builder.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;var e=require_byte_buffer(),r=require_constants();t.Builder=class t{constructor(t){let r;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,r=t||1024,this.bb=e.ByteBuffer.allocate(r),this.space=r}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,r){e>this.minalign&&(this.minalign=e);let n=~(this.bb.capacity()-this.space+r)+1&e-1;for(;this.space<n+e+r;){let e=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,r){(this.force_defaults||e!==r)&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,r){e!=r&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){let r=t.capacity();if(0xc0000000&r)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let n=r<<1,i=e.ByteBuffer.allocate(n);return i.setPosition(n-r),i.bytes().set(t.bytes(),n-r),i}addOffset(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let t=this.offset(),e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);let n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);let i=2;this.addInt16(t-this.object_start);let o=(n+i)*r.SIZEOF_SHORT;this.addInt16(o);let s=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){let t=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(t)){for(let e=r.SIZEOF_SHORT;e<o;e+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+e)!=this.bb.readInt16(t+e))continue t;s=this.vtables[e];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){let i=n?r.SIZE_PREFIX_LENGTH:0;if(e){let t=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+i),t.length!=r.FILE_IDENTIFIER_LENGTH)throw TypeError("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(let e=r.FILE_IDENTIFIER_LENGTH-1;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,r.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){let r=this.bb.capacity()-t,n=r-this.bb.readInt32(r);if(!(e<this.bb.readInt16(n)&&0!=this.bb.readInt16(n+e)))throw TypeError("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);let e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){let e;return null==t?0:(e=t instanceof Uint8Array?t:this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createByteVector(t){return null==t?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){let e=[];for(let r=0;r<t.length;++r){let n=t[r];if(null!==n)e.push(this.createObjectOffset(n));else throw TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}}}}),require_flatbuffers=__commonJS({"web/node_modules/flatbuffers/js/flatbuffers.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=t.Builder=t.Encoding=t.isLittleEndian=t.float64=t.float32=t.int32=t.SIZE_PREFIX_LENGTH=t.FILE_IDENTIFIER_LENGTH=t.SIZEOF_INT=t.SIZEOF_SHORT=void 0;var e=require_constants();Object.defineProperty(t,"SIZEOF_SHORT",{enumerable:!0,get:function(){return e.SIZEOF_SHORT}});var r=require_constants();Object.defineProperty(t,"SIZEOF_INT",{enumerable:!0,get:function(){return r.SIZEOF_INT}});var n=require_constants();Object.defineProperty(t,"FILE_IDENTIFIER_LENGTH",{enumerable:!0,get:function(){return n.FILE_IDENTIFIER_LENGTH}});var i=require_constants();Object.defineProperty(t,"SIZE_PREFIX_LENGTH",{enumerable:!0,get:function(){return i.SIZE_PREFIX_LENGTH}});var o=require_utils();Object.defineProperty(t,"int32",{enumerable:!0,get:function(){return o.int32}}),Object.defineProperty(t,"float32",{enumerable:!0,get:function(){return o.float32}}),Object.defineProperty(t,"float64",{enumerable:!0,get:function(){return o.float64}}),Object.defineProperty(t,"isLittleEndian",{enumerable:!0,get:function(){return o.isLittleEndian}});var s=require_encoding();Object.defineProperty(t,"Encoding",{enumerable:!0,get:function(){return s.Encoding}});var a=require_builder();Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return a.Builder}});var u=require_byte_buffer();Object.defineProperty(t,"ByteBuffer",{enumerable:!0,get:function(){return u.ByteBuffer}})}}),require_arg_type_and_index=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/arg-type-and-index.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ArgTypeAndIndex=void 0;var i=n(require_flatbuffers()),o=require_arg_type();t.ArgTypeAndIndex=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsArgTypeAndIndex(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsArgTypeAndIndex(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}argType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):o.ArgType.INPUT}index(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0}static startArgTypeAndIndex(t){t.startObject(2)}static addArgType(t,e){t.addFieldInt8(0,e,o.ArgType.INPUT)}static addIndex(t,e){t.addFieldInt32(1,e,0)}static endArgTypeAndIndex(t){return t.endObject()}static createArgTypeAndIndex(e,r,n){return t.startArgTypeAndIndex(e),t.addArgType(e,r),t.addIndex(e,n),t.endArgTypeAndIndex(e)}}}}),require_attribute_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/attribute-type.js"(t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeType=void 0,function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.INT=2]="INT",t[t.STRING=3]="STRING",t[t.TENSOR=4]="TENSOR",t[t.GRAPH=5]="GRAPH",t[t.FLOATS=6]="FLOATS",t[t.INTS=7]="INTS",t[t.STRINGS=8]="STRINGS",t[t.TENSORS=9]="TENSORS",t[t.GRAPHS=10]="GRAPHS",t[t.SPARSE_TENSOR=11]="SPARSE_TENSOR",t[t.SPARSE_TENSORS=12]="SPARSE_TENSORS"}(e||(t.AttributeType=e={}))}}),require_node_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/node-type.js"(t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=void 0,function(t){t[t.Primitive=0]="Primitive",t[t.Fused=1]="Fused"}(e||(t.NodeType=e={}))}}),require_node=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/node.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;var i=n(require_flatbuffers()),o=require_attribute(),s=require_node_type();t.Node=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNode(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNode(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}sinceVersion(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0}index(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0}opType(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):s.NodeType.Primitive}executionProviderType(t){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}inputs(t,e){let r=this.bb.__offset(this.bb_pos,20);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let r=this.bb.__offset(this.bb_pos,22);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}attributes(t,e){let r=this.bb.__offset(this.bb_pos,24);return r?(e||new o.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}attributesLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCounts(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}inputArgCountsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCountsArray(){let t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}implicitInputs(t,e){let r=this.bb.__offset(this.bb_pos,28);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}implicitInputsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNode(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDomain(t,e){t.addFieldOffset(2,e,0)}static addSinceVersion(t,e){t.addFieldInt32(3,e,0)}static addIndex(t,e){t.addFieldInt32(4,e,0)}static addOpType(t,e){t.addFieldOffset(5,e,0)}static addType(t,e){t.addFieldInt32(6,e,s.NodeType.Primitive)}static addExecutionProviderType(t,e){t.addFieldOffset(7,e,0)}static addInputs(t,e){t.addFieldOffset(8,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(9,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addAttributes(t,e){t.addFieldOffset(10,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addInputArgCounts(t,e){t.addFieldOffset(11,e,0)}static createInputArgCountsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startInputArgCountsVector(t,e){t.startVector(4,e,4)}static addImplicitInputs(t,e){t.addFieldOffset(12,e,0)}static createImplicitInputsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startImplicitInputsVector(t,e){t.startVector(4,e,4)}static endNode(t){return t.endObject()}static createNode(e,r,n,i,o,s,a,u,l,c,d,p,h,f){return t.startNode(e),t.addName(e,r),t.addDocString(e,n),t.addDomain(e,i),t.addSinceVersion(e,o),t.addIndex(e,s),t.addOpType(e,a),t.addType(e,u),t.addExecutionProviderType(e,l),t.addInputs(e,c),t.addOutputs(e,d),t.addAttributes(e,p),t.addInputArgCounts(e,h),t.addImplicitInputs(e,f),t.endNode(e)}}}}),require_edge_end=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/edge-end.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeEnd=void 0,t.EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static sizeOf(){return 12}static createEdgeEnd(t,e,r,n){return t.prep(4,12),t.writeInt32(n),t.writeInt32(r),t.writeInt32(e),t.offset()}}}}),require_node_edge=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/node-edge.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeEdge=void 0;var i=n(require_flatbuffers()),o=require_edge_end();t.NodeEdge=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNodeEdge(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNodeEdge(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}nodeIndex(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}inputEdges(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new o.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*t,this.bb):null}inputEdgesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}outputEdges(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new o.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*t,this.bb):null}outputEdgesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNodeEdge(t){t.startObject(3)}static addNodeIndex(t,e){t.addFieldInt32(0,e,0)}static addInputEdges(t,e){t.addFieldOffset(1,e,0)}static startInputEdgesVector(t,e){t.startVector(12,e,4)}static addOutputEdges(t,e){t.addFieldOffset(2,e,0)}static startOutputEdgesVector(t,e){t.startVector(12,e,4)}static endNodeEdge(t){return t.endObject()}static createNodeEdge(e,r,n,i){return t.startNodeEdge(e),t.addNodeIndex(e,r),t.addInputEdges(e,n),t.addOutputEdges(e,i),t.endNodeEdge(e)}}}}),require_nodes_to_optimize_indices=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/nodes-to-optimize-indices.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.NodesToOptimizeIndices=void 0;var i=n(require_flatbuffers());t.NodesToOptimizeIndices=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNodesToOptimizeIndices(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNodesToOptimizeIndices(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}nodeIndices(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}nodeIndicesLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeIndicesArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}numInputs(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0}numOutputs(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0}hasVariadicInput(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasVariadicOutput(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}numVariadicInputs(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint32(this.bb_pos+t):0}numVariadicOutputs(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint32(this.bb_pos+t):0}static startNodesToOptimizeIndices(t){t.startObject(7)}static addNodeIndices(t,e){t.addFieldOffset(0,e,0)}static createNodeIndicesVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startNodeIndicesVector(t,e){t.startVector(4,e,4)}static addNumInputs(t,e){t.addFieldInt32(1,e,0)}static addNumOutputs(t,e){t.addFieldInt32(2,e,0)}static addHasVariadicInput(t,e){t.addFieldInt8(3,+e,0)}static addHasVariadicOutput(t,e){t.addFieldInt8(4,+e,0)}static addNumVariadicInputs(t,e){t.addFieldInt32(5,e,0)}static addNumVariadicOutputs(t,e){t.addFieldInt32(6,e,0)}static endNodesToOptimizeIndices(t){return t.endObject()}static createNodesToOptimizeIndices(e,r,n,i,o,s,a,u){return t.startNodesToOptimizeIndices(e),t.addNodeIndices(e,r),t.addNumInputs(e,n),t.addNumOutputs(e,i),t.addHasVariadicInput(e,o),t.addHasVariadicOutput(e,s),t.addNumVariadicInputs(e,a),t.addNumVariadicOutputs(e,u),t.endNodesToOptimizeIndices(e)}}}}),require_runtime_optimization_record=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/runtime-optimization-record.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeOptimizationRecord=void 0;var i=n(require_flatbuffers()),o=require_nodes_to_optimize_indices();t.RuntimeOptimizationRecord=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRuntimeOptimizationRecord(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRuntimeOptimizationRecord(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}actionId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nodesToOptimizeIndices(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new o.NodesToOptimizeIndices).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}producedOpIds(t,e){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}producedOpIdsLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRuntimeOptimizationRecord(t){t.startObject(4)}static addActionId(t,e){t.addFieldOffset(0,e,0)}static addNodesToOptimizeIndices(t,e){t.addFieldOffset(1,e,0)}static addProducedOpIds(t,e){t.addFieldOffset(3,e,0)}static createProducedOpIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startProducedOpIdsVector(t,e){t.startVector(4,e,4)}static endRuntimeOptimizationRecord(t){return t.endObject()}}}}),require_runtime_optimization_record_container_entry=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/runtime-optimization-record-container-entry.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeOptimizationRecordContainerEntry=void 0;var i=n(require_flatbuffers()),o=require_runtime_optimization_record();t.RuntimeOptimizationRecordContainerEntry=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRuntimeOptimizationRecordContainerEntry(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRuntimeOptimizationRecordContainerEntry(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}optimizerName(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}runtimeOptimizationRecords(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new o.RuntimeOptimizationRecord).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}runtimeOptimizationRecordsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRuntimeOptimizationRecordContainerEntry(t){t.startObject(2)}static addOptimizerName(t,e){t.addFieldOffset(0,e,0)}static addRuntimeOptimizationRecords(t,e){t.addFieldOffset(1,e,0)}static createRuntimeOptimizationRecordsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startRuntimeOptimizationRecordsVector(t,e){t.startVector(4,e,4)}static endRuntimeOptimizationRecordContainerEntry(t){let e=t.endObject();return t.requiredField(e,4),e}static createRuntimeOptimizationRecordContainerEntry(e,r,n){return t.startRuntimeOptimizationRecordContainerEntry(e),t.addOptimizerName(e,r),t.addRuntimeOptimizationRecords(e,n),t.endRuntimeOptimizationRecordContainerEntry(e)}}}}),require_runtime_optimizations=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/runtime-optimizations.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeOptimizations=void 0;var i=n(require_flatbuffers()),o=require_runtime_optimization_record_container_entry();t.RuntimeOptimizations=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRuntimeOptimizations(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRuntimeOptimizations(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}records(t,e){let r=this.bb.__offset(this.bb_pos,4);return r?(e||new o.RuntimeOptimizationRecordContainerEntry).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}recordsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRuntimeOptimizations(t){t.startObject(1)}static addRecords(t,e){t.addFieldOffset(0,e,0)}static createRecordsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startRecordsVector(t,e){t.startVector(4,e,4)}static endRuntimeOptimizations(t){return t.endObject()}static createRuntimeOptimizations(e,r){return t.startRuntimeOptimizations(e),t.addRecords(e,r),t.endRuntimeOptimizations(e)}}}}),require_tensor_data_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/tensor-data-type.js"(t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.TensorDataType=void 0,function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.UINT8=2]="UINT8",t[t.INT8=3]="INT8",t[t.UINT16=4]="UINT16",t[t.INT16=5]="INT16",t[t.INT32=6]="INT32",t[t.INT64=7]="INT64",t[t.STRING=8]="STRING",t[t.BOOL=9]="BOOL",t[t.FLOAT16=10]="FLOAT16",t[t.DOUBLE=11]="DOUBLE",t[t.UINT32=12]="UINT32",t[t.UINT64=13]="UINT64",t[t.COMPLEX64=14]="COMPLEX64",t[t.COMPLEX128=15]="COMPLEX128",t[t.BFLOAT16=16]="BFLOAT16",t[t.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",t[t.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",t[t.FLOAT8E5M2=19]="FLOAT8E5M2",t[t.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"}(e||(t.TensorDataType=e={}))}}),require_tensor=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/tensor.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;var i=n(require_flatbuffers()),o=require_tensor_data_type();t.Tensor=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensor(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensor(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}dataType(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):o.TensorDataType.UNDEFINED}rawData(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}rawDataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}rawDataArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringData(t,e){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}stringDataLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}externalDataOffset(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt64(this.bb_pos+t):BigInt("-1")}static startTensor(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static addDataType(t,e){t.addFieldInt32(3,e,o.TensorDataType.UNDEFINED)}static addRawData(t,e){t.addFieldOffset(4,e,0)}static createRawDataVector(t,e){t.startVector(1,e.length,1);for(let r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}static startRawDataVector(t,e){t.startVector(1,e,1)}static addStringData(t,e){t.addFieldOffset(5,e,0)}static createStringDataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startStringDataVector(t,e){t.startVector(4,e,4)}static addExternalDataOffset(t,e){t.addFieldInt64(6,e,BigInt("-1"))}static endTensor(t){return t.endObject()}static createTensor(e,r,n,i,o,s,a,u){return t.startTensor(e),t.addName(e,r),t.addDocString(e,n),t.addDims(e,i),t.addDataType(e,o),t.addRawData(e,s),t.addStringData(e,a),t.addExternalDataOffset(e,u),t.endTensor(e)}}}}),require_sparse_tensor=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/sparse-tensor.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.SparseTensor=void 0;var i=n(require_flatbuffers()),o=require_tensor();t.SparseTensor=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSparseTensor(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensor(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}values(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new o.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}indices(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new o.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSparseTensor(t){t.startObject(3)}static addValues(t,e){t.addFieldOffset(0,e,0)}static addIndices(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static endSparseTensor(t){return t.endObject()}}}}),require_map_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/map-type.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.MapType=void 0;var i=n(require_flatbuffers()),o=require_tensor_data_type(),s=require_type_info();t.MapType=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapType(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMapType(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}keyType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):o.TensorDataType.UNDEFINED}valueType(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new s.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startMapType(t){t.startObject(2)}static addKeyType(t,e){t.addFieldInt32(0,e,o.TensorDataType.UNDEFINED)}static addValueType(t,e){t.addFieldOffset(1,e,0)}static endMapType(t){return t.endObject()}}}}),require_sequence_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/sequence-type.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceType=void 0;var i=n(require_flatbuffers()),o=require_type_info();t.SequenceType=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSequenceType(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSequenceType(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}elemType(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new o.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startSequenceType(t){t.startObject(1)}static addElemType(t,e){t.addFieldOffset(0,e,0)}static endSequenceType(t){return t.endObject()}static createSequenceType(e,r){return t.startSequenceType(e),t.addElemType(e,r),t.endSequenceType(e)}}}}),require_dimension_value_type=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/dimension-value-type.js"(t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.DimensionValueType=void 0,function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VALUE=1]="VALUE",t[t.PARAM=2]="PARAM"}(e||(t.DimensionValueType=e={}))}}),require_dimension_value=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/dimension-value.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.DimensionValue=void 0;var i=n(require_flatbuffers()),o=require_dimension_value_type();t.DimensionValue=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimensionValue(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDimensionValue(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}dimType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):o.DimensionValueType.UNKNOWN}dimValue(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}dimParam(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimensionValue(t){t.startObject(3)}static addDimType(t,e){t.addFieldInt8(0,e,o.DimensionValueType.UNKNOWN)}static addDimValue(t,e){t.addFieldInt64(1,e,BigInt("0"))}static addDimParam(t,e){t.addFieldOffset(2,e,0)}static endDimensionValue(t){return t.endObject()}static createDimensionValue(e,r,n,i){return t.startDimensionValue(e),t.addDimType(e,r),t.addDimValue(e,n),t.addDimParam(e,i),t.endDimensionValue(e)}}}}),require_dimension=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/dimension.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Dimension=void 0;var i=n(require_flatbuffers()),o=require_dimension_value();t.Dimension=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimension(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDimension(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}value(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new o.DimensionValue).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}denotation(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimension(t){t.startObject(2)}static addValue(t,e){t.addFieldOffset(0,e,0)}static addDenotation(t,e){t.addFieldOffset(1,e,0)}static endDimension(t){return t.endObject()}static createDimension(e,r,n){return t.startDimension(e),t.addValue(e,r),t.addDenotation(e,n),t.endDimension(e)}}}}),require_shape=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/shape.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var i=n(require_flatbuffers()),o=require_dimension();t.Shape=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsShape(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsShape(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}dim(t,e){let r=this.bb.__offset(this.bb_pos,4);return r?(e||new o.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}dimLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startShape(t){t.startObject(1)}static addDim(t,e){t.addFieldOffset(0,e,0)}static createDimVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startDimVector(t,e){t.startVector(4,e,4)}static endShape(t){return t.endObject()}static createShape(e,r){return t.startShape(e),t.addDim(e,r),t.endShape(e)}}}}),require_tensor_type_and_shape=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/tensor-type-and-shape.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.TensorTypeAndShape=void 0;var i=n(require_flatbuffers()),o=require_shape(),s=require_tensor_data_type();t.TensorTypeAndShape=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensorTypeAndShape(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensorTypeAndShape(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}elemType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):s.TensorDataType.UNDEFINED}shape(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new o.Shape).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startTensorTypeAndShape(t){t.startObject(2)}static addElemType(t,e){t.addFieldInt32(0,e,s.TensorDataType.UNDEFINED)}static addShape(t,e){t.addFieldOffset(1,e,0)}static endTensorTypeAndShape(t){return t.endObject()}}}}),require_type_info_value=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/type-info-value.js"(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionListToTypeInfoValue=t.unionToTypeInfoValue=t.TypeInfoValue=void 0;var e,r=require_map_type(),n=require_sequence_type(),i=require_tensor_type_and_shape();!function(t){t[t.NONE=0]="NONE",t[t.tensor_type=1]="tensor_type",t[t.sequence_type=2]="sequence_type",t[t.map_type=3]="map_type"}(e||(t.TypeInfoValue=e={})),t.unionToTypeInfoValue=function(t,o){switch(e[t]){case"NONE":default:return null;case"tensor_type":return o(new i.TensorTypeAndShape);case"sequence_type":return o(new n.SequenceType);case"map_type":return o(new r.MapType)}},t.unionListToTypeInfoValue=function(t,o,s){switch(e[t]){case"NONE":default:return null;case"tensor_type":return o(s,new i.TensorTypeAndShape);case"sequence_type":return o(s,new n.SequenceType);case"map_type":return o(s,new r.MapType)}}}}),require_type_info=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/type-info.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.TypeInfo=void 0;var i=n(require_flatbuffers()),o=require_type_info_value();t.TypeInfo=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTypeInfo(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTypeInfo(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}denotation(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}valueType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):o.TypeInfoValue.NONE}value(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}static startTypeInfo(t){t.startObject(3)}static addDenotation(t,e){t.addFieldOffset(0,e,0)}static addValueType(t,e){t.addFieldInt8(1,e,o.TypeInfoValue.NONE)}static addValue(t,e){t.addFieldOffset(2,e,0)}static endTypeInfo(t){return t.endObject()}static createTypeInfo(e,r,n,i){return t.startTypeInfo(e),t.addDenotation(e,r),t.addValueType(e,n),t.addValue(e,i),t.endTypeInfo(e)}}}}),require_value_info=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/value-info.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ValueInfo=void 0;var i=n(require_flatbuffers()),o=require_type_info();t.ValueInfo=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsValueInfo(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValueInfo(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(t){let e=this.bb.__offset(this.bb_pos,8);return e?(t||new o.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startValueInfo(t){t.startObject(3)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldOffset(2,e,0)}static endValueInfo(t){return t.endObject()}}}}),require_graph=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/graph.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;var i=n(require_flatbuffers()),o=require_node(),s=require_node_edge(),a=require_runtime_optimizations(),u=require_sparse_tensor(),l=require_tensor(),c=require_value_info();t.Graph=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraph(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGraph(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}initializers(t,e){let r=this.bb.__offset(this.bb_pos,4);return r?(e||new l.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}initializersLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeArgs(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new c.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}nodeArgsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nodes(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new o.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}maxNodeIndex(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0}nodeEdges(t,e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new s.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}nodeEdgesLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}inputs(t,e){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let r=this.bb.__offset(this.bb_pos,16);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}sparseInitializers(t,e){let r=this.bb.__offset(this.bb_pos,18);return r?(e||new u.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}sparseInitializersLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}runtimeOptimizations(t){let e=this.bb.__offset(this.bb_pos,20);return e?(t||new a.RuntimeOptimizations).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startGraph(t){t.startObject(9)}static addInitializers(t,e){t.addFieldOffset(0,e,0)}static createInitializersVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startInitializersVector(t,e){t.startVector(4,e,4)}static addNodeArgs(t,e){t.addFieldOffset(1,e,0)}static createNodeArgsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startNodeArgsVector(t,e){t.startVector(4,e,4)}static addNodes(t,e){t.addFieldOffset(2,e,0)}static createNodesVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startNodesVector(t,e){t.startVector(4,e,4)}static addMaxNodeIndex(t,e){t.addFieldInt32(3,e,0)}static addNodeEdges(t,e){t.addFieldOffset(4,e,0)}static createNodeEdgesVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startNodeEdgesVector(t,e){t.startVector(4,e,4)}static addInputs(t,e){t.addFieldOffset(5,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(6,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addSparseInitializers(t,e){t.addFieldOffset(7,e,0)}static createSparseInitializersVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startSparseInitializersVector(t,e){t.startVector(4,e,4)}static addRuntimeOptimizations(t,e){t.addFieldOffset(8,e,0)}static endGraph(t){return t.endObject()}}}}),require_attribute=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/attribute.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;var i=n(require_flatbuffers()),o=require_attribute_type(),s=require_graph(),a=require_tensor();t.Attribute=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAttribute(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsAttribute(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):o.AttributeType.UNDEFINED}f(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0}i(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}s(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}t(t){let e=this.bb.__offset(this.bb_pos,16);return e?(t||new a.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}g(t){let e=this.bb.__offset(this.bb_pos,18);return e?(t||new s.Graph).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}floats(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0}floatsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}floatsArray(){let t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}ints(t){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}intsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}strings(t,e){let r=this.bb.__offset(this.bb_pos,24);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*t,e):null}stringsLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}tensors(t,e){let r=this.bb.__offset(this.bb_pos,26);return r?(e||new a.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}tensorsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}graphs(t,e){let r=this.bb.__offset(this.bb_pos,28);return r?(e||new s.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}graphsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startAttribute(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldInt32(2,e,o.AttributeType.UNDEFINED)}static addF(t,e){t.addFieldFloat32(3,e,0)}static addI(t,e){t.addFieldInt64(4,e,BigInt("0"))}static addS(t,e){t.addFieldOffset(5,e,0)}static addT(t,e){t.addFieldOffset(6,e,0)}static addG(t,e){t.addFieldOffset(7,e,0)}static addFloats(t,e){t.addFieldOffset(8,e,0)}static createFloatsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addFloat32(e[r]);return t.endVector()}static startFloatsVector(t,e){t.startVector(4,e,4)}static addInts(t,e){t.addFieldOffset(9,e,0)}static createIntsVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startIntsVector(t,e){t.startVector(8,e,8)}static addStrings(t,e){t.addFieldOffset(10,e,0)}static createStringsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startStringsVector(t,e){t.startVector(4,e,4)}static addTensors(t,e){t.addFieldOffset(11,e,0)}static createTensorsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startTensorsVector(t,e){t.startVector(4,e,4)}static addGraphs(t,e){t.addFieldOffset(12,e,0)}static createGraphsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startGraphsVector(t,e){t.startVector(4,e,4)}static endAttribute(t){return t.endObject()}}}}),require_deprecated_kernel_create_infos=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/deprecated-kernel-create-infos.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.DeprecatedKernelCreateInfos=void 0;var i=n(require_flatbuffers());t.DeprecatedKernelCreateInfos=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDeprecatedKernelCreateInfos(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDeprecatedKernelCreateInfos(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}nodeIndices(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}nodeIndicesLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeIndicesArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}kernelDefHashes(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}kernelDefHashesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startDeprecatedKernelCreateInfos(t){t.startObject(2)}static addNodeIndices(t,e){t.addFieldOffset(0,e,0)}static createNodeIndicesVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startNodeIndicesVector(t,e){t.startVector(4,e,4)}static addKernelDefHashes(t,e){t.addFieldOffset(1,e,0)}static createKernelDefHashesVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startKernelDefHashesVector(t,e){t.startVector(8,e,8)}static endDeprecatedKernelCreateInfos(t){return t.endObject()}static createDeprecatedKernelCreateInfos(e,r,n){return t.startDeprecatedKernelCreateInfos(e),t.addNodeIndices(e,r),t.addKernelDefHashes(e,n),t.endDeprecatedKernelCreateInfos(e)}}}}),require_deprecated_node_index_and_kernel_def_hash=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/deprecated-node-index-and-kernel-def-hash.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.DeprecatedNodeIndexAndKernelDefHash=void 0;var i=n(require_flatbuffers());t.DeprecatedNodeIndexAndKernelDefHash=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDeprecatedNodeIndexAndKernelDefHash(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDeprecatedNodeIndexAndKernelDefHash(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}nodeIndex(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}kernelDefHash(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}static startDeprecatedNodeIndexAndKernelDefHash(t){t.startObject(2)}static addNodeIndex(t,e){t.addFieldInt32(0,e,0)}static addKernelDefHash(t,e){t.addFieldInt64(1,e,BigInt("0"))}static endDeprecatedNodeIndexAndKernelDefHash(t){return t.endObject()}static createDeprecatedNodeIndexAndKernelDefHash(e,r,n){return t.startDeprecatedNodeIndexAndKernelDefHash(e),t.addNodeIndex(e,r),t.addKernelDefHash(e,n),t.endDeprecatedNodeIndexAndKernelDefHash(e)}}}}),require_deprecated_sub_graph_session_state=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/deprecated-sub-graph-session-state.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.DeprecatedSubGraphSessionState=void 0;var i=n(require_flatbuffers()),o=require_deprecated_session_state();t.DeprecatedSubGraphSessionState=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDeprecatedSubGraphSessionState(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDeprecatedSubGraphSessionState(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}graphId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}sessionState(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new o.DeprecatedSessionState).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startDeprecatedSubGraphSessionState(t){t.startObject(2)}static addGraphId(t,e){t.addFieldOffset(0,e,0)}static addSessionState(t,e){t.addFieldOffset(1,e,0)}static endDeprecatedSubGraphSessionState(t){let e=t.endObject();return t.requiredField(e,4),e}}}}),require_deprecated_session_state=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/deprecated-session-state.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.DeprecatedSessionState=void 0;var i=n(require_flatbuffers()),o=require_deprecated_kernel_create_infos(),s=require_deprecated_sub_graph_session_state();t.DeprecatedSessionState=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDeprecatedSessionState(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDeprecatedSessionState(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}kernels(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new o.DeprecatedKernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}subGraphSessionStates(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new s.DeprecatedSubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}subGraphSessionStatesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startDeprecatedSessionState(t){t.startObject(2)}static addKernels(t,e){t.addFieldOffset(0,e,0)}static addSubGraphSessionStates(t,e){t.addFieldOffset(1,e,0)}static createSubGraphSessionStatesVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startSubGraphSessionStatesVector(t,e){t.startVector(4,e,4)}static endDeprecatedSessionState(t){return t.endObject()}static createDeprecatedSessionState(e,r,n){return t.startDeprecatedSessionState(e),t.addKernels(e,r),t.addSubGraphSessionStates(e,n),t.endDeprecatedSessionState(e)}}}}),require_kernel_type_str_args_entry=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/kernel-type-str-args-entry.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelTypeStrArgsEntry=void 0;var i=n(require_flatbuffers()),o=require_arg_type_and_index();t.KernelTypeStrArgsEntry=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKernelTypeStrArgsEntry(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKernelTypeStrArgsEntry(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}kernelTypeStr(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}args(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new o.ArgTypeAndIndex).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}argsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startKernelTypeStrArgsEntry(t){t.startObject(2)}static addKernelTypeStr(t,e){t.addFieldOffset(0,e,0)}static addArgs(t,e){t.addFieldOffset(1,e,0)}static createArgsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startArgsVector(t,e){t.startVector(4,e,4)}static endKernelTypeStrArgsEntry(t){let e=t.endObject();return t.requiredField(e,4),e}static createKernelTypeStrArgsEntry(e,r,n){return t.startKernelTypeStrArgsEntry(e),t.addKernelTypeStr(e,r),t.addArgs(e,n),t.endKernelTypeStrArgsEntry(e)}}}}),require_op_id_kernel_type_str_args_entry=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/op-id-kernel-type-str-args-entry.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.OpIdKernelTypeStrArgsEntry=void 0;var i=n(require_flatbuffers()),o=require_kernel_type_str_args_entry();t.OpIdKernelTypeStrArgsEntry=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOpIdKernelTypeStrArgsEntry(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsOpIdKernelTypeStrArgsEntry(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}opId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}kernelTypeStrArgs(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new o.KernelTypeStrArgsEntry).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}kernelTypeStrArgsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startOpIdKernelTypeStrArgsEntry(t){t.startObject(2)}static addOpId(t,e){t.addFieldOffset(0,e,0)}static addKernelTypeStrArgs(t,e){t.addFieldOffset(1,e,0)}static createKernelTypeStrArgsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startKernelTypeStrArgsVector(t,e){t.startVector(4,e,4)}static endOpIdKernelTypeStrArgsEntry(t){let e=t.endObject();return t.requiredField(e,4),e}static createOpIdKernelTypeStrArgsEntry(e,r,n){return t.startOpIdKernelTypeStrArgsEntry(e),t.addOpId(e,r),t.addKernelTypeStrArgs(e,n),t.endOpIdKernelTypeStrArgsEntry(e)}}}}),require_kernel_type_str_resolver=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/kernel-type-str-resolver.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelTypeStrResolver=void 0;var i=n(require_flatbuffers()),o=require_op_id_kernel_type_str_args_entry();t.KernelTypeStrResolver=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKernelTypeStrResolver(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKernelTypeStrResolver(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}opKernelTypeStrArgs(t,e){let r=this.bb.__offset(this.bb_pos,4);return r?(e||new o.OpIdKernelTypeStrArgsEntry).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}opKernelTypeStrArgsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startKernelTypeStrResolver(t){t.startObject(1)}static addOpKernelTypeStrArgs(t,e){t.addFieldOffset(0,e,0)}static createOpKernelTypeStrArgsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startOpKernelTypeStrArgsVector(t,e){t.startVector(4,e,4)}static endKernelTypeStrResolver(t){return t.endObject()}static createKernelTypeStrResolver(e,r){return t.startKernelTypeStrResolver(e),t.addOpKernelTypeStrArgs(e,r),t.endKernelTypeStrResolver(e)}}}}),require_operator_set_id=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/operator-set-id.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorSetId=void 0;var i=n(require_flatbuffers());t.OperatorSetId=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOperatorSetId(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsOperatorSetId(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}domain(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}version(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}static startOperatorSetId(t){t.startObject(2)}static addDomain(t,e){t.addFieldOffset(0,e,0)}static addVersion(t,e){t.addFieldInt64(1,e,BigInt("0"))}static endOperatorSetId(t){return t.endObject()}static createOperatorSetId(e,r,n){return t.startOperatorSetId(e),t.addDomain(e,r),t.addVersion(e,n),t.endOperatorSetId(e)}}}}),require_string_string_entry=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/string-string-entry.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.StringStringEntry=void 0;var i=n(require_flatbuffers());t.StringStringEntry=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStringStringEntry(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStringStringEntry(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startStringStringEntry(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endStringStringEntry(t){return t.endObject()}static createStringStringEntry(e,r,n){return t.startStringStringEntry(e),t.addKey(e,r),t.addValue(e,n),t.endStringStringEntry(e)}}}}),require_model=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/model.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var i=n(require_flatbuffers()),o=require_graph(),s=require_operator_set_id(),a=require_string_string_entry();t.Model=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsModel(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}irVersion(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}opsetImport(t,e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new s.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}opsetImportLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}producerName(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}producerVersion(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}modelVersion(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}docString(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}graph(t){let e=this.bb.__offset(this.bb_pos,18);return e?(t||new o.Graph).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}graphDocString(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}metadataProps(t,e){let r=this.bb.__offset(this.bb_pos,22);return r?(e||new a.StringStringEntry).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}metadataPropsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModel(t){t.startObject(10)}static addIrVersion(t,e){t.addFieldInt64(0,e,BigInt("0"))}static addOpsetImport(t,e){t.addFieldOffset(1,e,0)}static createOpsetImportVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startOpsetImportVector(t,e){t.startVector(4,e,4)}static addProducerName(t,e){t.addFieldOffset(2,e,0)}static addProducerVersion(t,e){t.addFieldOffset(3,e,0)}static addDomain(t,e){t.addFieldOffset(4,e,0)}static addModelVersion(t,e){t.addFieldInt64(5,e,BigInt("0"))}static addDocString(t,e){t.addFieldOffset(6,e,0)}static addGraph(t,e){t.addFieldOffset(7,e,0)}static addGraphDocString(t,e){t.addFieldOffset(8,e,0)}static addMetadataProps(t,e){t.addFieldOffset(9,e,0)}static createMetadataPropsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startMetadataPropsVector(t,e){t.startVector(4,e,4)}static endModel(t){return t.endObject()}}}}),require_inference_session=__commonJS({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs/inference-session.js"(t){"use strict";var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;var i=n(require_flatbuffers()),o=require_kernel_type_str_resolver(),s=require_model();t.InferenceSession=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInferenceSession(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInferenceSession(e,r){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static bufferHasIdentifier(t){return t.__has_identifier("ORTM")}ortVersion(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}model(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new s.Model).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}kernelTypeStrResolver(t){let e=this.bb.__offset(this.bb_pos,10);return e?(t||new o.KernelTypeStrResolver).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startInferenceSession(t){t.startObject(4)}static addOrtVersion(t,e){t.addFieldOffset(0,e,0)}static addModel(t,e){t.addFieldOffset(1,e,0)}static addKernelTypeStrResolver(t,e){t.addFieldOffset(3,e,0)}static endInferenceSession(t){return t.endObject()}static finishInferenceSessionBuffer(t,e){t.finish(e,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(t,e){t.finish(e,"ORTM",!0)}}}}),init_fbs=__esm({"web/lib/onnxjs/ort-schema/flatbuffers/onnxruntime/fbs.ts"(){"use strict";import_arg_type=__toESM(require_arg_type()),import_arg_type_and_index=__toESM(require_arg_type_and_index()),import_attribute=__toESM(require_attribute()),import_attribute_type=__toESM(require_attribute_type()),import_deprecated_kernel_create_infos=__toESM(require_deprecated_kernel_create_infos()),import_deprecated_node_index_and_kernel_def_hash=__toESM(require_deprecated_node_index_and_kernel_def_hash()),import_deprecated_session_state=__toESM(require_deprecated_session_state()),import_deprecated_sub_graph_session_state=__toESM(require_deprecated_sub_graph_session_state()),import_dimension=__toESM(require_dimension()),import_dimension_value=__toESM(require_dimension_value()),import_dimension_value_type=__toESM(require_dimension_value_type()),import_edge_end=__toESM(require_edge_end()),import_graph=__toESM(require_graph()),import_inference_session=__toESM(require_inference_session()),import_kernel_type_str_args_entry=__toESM(require_kernel_type_str_args_entry()),import_kernel_type_str_resolver=__toESM(require_kernel_type_str_resolver()),import_map_type=__toESM(require_map_type()),import_model=__toESM(require_model()),import_node=__toESM(require_node()),import_node_edge=__toESM(require_node_edge()),import_node_type=__toESM(require_node_type()),import_nodes_to_optimize_indices=__toESM(require_nodes_to_optimize_indices()),import_op_id_kernel_type_str_args_entry=__toESM(require_op_id_kernel_type_str_args_entry()),import_operator_set_id=__toESM(require_operator_set_id()),import_runtime_optimization_record=__toESM(require_runtime_optimization_record()),import_runtime_optimization_record_container_entry=__toESM(require_runtime_optimization_record_container_entry()),import_runtime_optimizations=__toESM(require_runtime_optimizations()),import_sequence_type=__toESM(require_sequence_type()),import_shape=__toESM(require_shape()),import_sparse_tensor=__toESM(require_sparse_tensor()),import_string_string_entry=__toESM(require_string_string_entry()),import_tensor2=__toESM(require_tensor()),import_tensor_data_type=__toESM(require_tensor_data_type()),import_tensor_type_and_shape=__toESM(require_tensor_type_and_shape()),import_type_info=__toESM(require_type_info()),import_type_info_value=__toESM(require_type_info_value()),import_value_info=__toESM(require_value_info())}}),init_ort_generated=__esm({"web/lib/onnxjs/ort-schema/flatbuffers/ort-generated.ts"(){"use strict";init_fbs()}}),require_aspromise=__commonJS({"web/node_modules/@protobufjs/aspromise/index.js"(t,e){"use strict";e.exports=function t(t,e){for(var r=Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,s){r[n]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(t){o&&(o=!1,s(t))}})}}}),require_base64=__commonJS({"web/node_modules/@protobufjs/base64/index.js"(t){"use strict";var e,r=t;r.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};var n=Array(64),i=Array(123);for(e=0;e<64;)i[n[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;r.encode=function(t,e,r){for(var i,o=null,s=[],a=0,u=0;e<r;){var l=t[e++];switch(u){case 0:s[a++]=n[l>>2],i=(3&l)<<4,u=1;break;case 1:s[a++]=n[i|l>>4],i=(15&l)<<2,u=2;break;case 2:s[a++]=n[i|l>>6],s[a++]=n[63&l],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return(u&&(s[a++]=n[i],s[a++]=61,1===u&&(s[a++]=61)),o)?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var o="invalid encoding";r.decode=function(t,e,r){for(var n,s=r,a=0,u=0;u<t.length;){var l=t.charCodeAt(u++);if(61===l&&a>1)break;if(void 0===(l=i[l]))throw Error(o);switch(a){case 0:n=l,a=1;break;case 1:e[r++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:e[r++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:e[r++]=(3&n)<<6|l,a=0}}if(1===a)throw Error(o);return r-s},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}}),require_eventemitter=__commonJS({"web/node_modules/@protobufjs/eventemitter/index.js"(t,e){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}}}),require_float=__commonJS({"web/node_modules/@protobufjs/float/index.js"(t,e){"use strict";function r(t){return"undefined"!=typeof Float32Array?!function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(t,n,i){e[0]=t,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function a(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i,t.readFloatLE=n?s:a,t.readFloatBE=n?a:s}():!function(){function e(t,e,r,n){var i=+(e<0);if(i&&(e=-e),0===e)t(1/e>0?0:0x80000000,r,n);else if(isNaN(e))t(0x7fc00000,r,n);else if(e>34028234663852886e22)t((i<<31|0x7f800000)>>>0,r,n);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(e)/Math.LN2),s=8388607&Math.round(e*Math.pow(2,-o)*8388608);t((i<<31|o+127<<23|s)>>>0,r,n)}}function r(t,e,r){var n=t(e,r),i=(n>>31)*2+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:1/0*i:0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,i),t.readFloatLE=r.bind(null,o),t.readFloatBE=r.bind(null,s)}(),"undefined"!=typeof Float64Array?!function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(t,n,i){e[0]=t,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function a(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i,t.readDoubleLE=n?s:a,t.readDoubleBE=n?a:s}():!function(){function e(t,e,r,n,i,o){var s,a=+(n<0);if(a&&(n=-n),0===n)t(0,i,o+e),t(1/n>0?0:0x80000000,i,o+r);else if(isNaN(n))t(0,i,o+e),t(0x7ff80000,i,o+r);else if(n>17976931348623157e292)t(0,i,o+e),t((a<<31|0x7ff00000)>>>0,i,o+r);else if(n<22250738585072014e-324)t((s=n/5e-324)>>>0,i,o+e),t((a<<31|s/0x100000000)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),t(0x10000000000000*(s=n*Math.pow(2,-u))>>>0,i,o+e),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}function r(t,e,r,n,i){var o=t(n,i+e),s=t(n,i+r),a=(s>>31)*2+1,u=s>>>20&2047,l=0x100000000*(1048575&s)+o;return 2047===u?l?NaN:1/0*a:0===u?5e-324*a*l:a*Math.pow(2,u-1075)*(l+0x10000000000000)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,i,4,0),t.readDoubleLE=r.bind(null,o,0,4),t.readDoubleBE=r.bind(null,s,4,0)}(),t}function n(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function i(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}e.exports=r(r)}}),require_inquire=__commonJS({"web/node_modules/@protobufjs/inquire/index.js"(exports,module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire}}),require_utf8=__commonJS({"web/node_modules/@protobufjs/utf8/index.js"(t){"use strict";var e=t;e.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:(64512&r)==55296&&(64512&t.charCodeAt(n+1))==56320?(++n,e+=4):e+=3;return e},e.read=function(t,e,r){if(r-e<1)return"";for(var n,i=null,o=[],s=0;e<r;)(n=t[e++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},e.write=function(t,e,r){for(var n,i,o=r,s=0;s<t.length;++s)(n=t.charCodeAt(s))<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=t.charCodeAt(s+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++s,e[r++]=n>>18|240,e[r++]=n>>12&63|128):e[r++]=n>>12|224,e[r++]=n>>6&63|128),e[r++]=63&n|128);return r-o}}}),require_pool=__commonJS({"web/node_modules/@protobufjs/pool/index.js"(t,e){"use strict";e.exports=function t(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return t(r);s+r>n&&(o=t(n),s=0);var a=e.call(o,s,s+=r);return 7&s&&(s=(7|s)+1),a}}}}),require_longbits=__commonJS({"web/node_modules/protobufjs/src/util/longbits.js"(t,e){"use strict";e.exports=n;var r=require_minimal();function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var r=t>>>0,o=(t-r)/0x100000000>>>0;return e&&(o=~o>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++o>0xffffffff&&(o=0))),new n(r,o)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(r.isString(t))if(!r.Long)return n.fromNumber(parseInt(t,10));else t=r.Long.fromString(t);return t.low||t.high?new n(t.low>>>0,t.high>>>0):i},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+0x100000000*r)}return this.lo+0x100000000*this.hi},n.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,!!t):{low:0|this.lo,high:0|this.hi,unsigned:!!t}};var s=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?i:new n((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}}}),require_minimal=__commonJS({"web/node_modules/protobufjs/src/util/minimal.js"(t){"use strict";var e=t;function r(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function n(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:Error().stack||""}),n&&r(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}e.asPromise=require_aspromise(),e.base64=require_base64(),e.EventEmitter=require_eventemitter(),e.float=require_float(),e.inquire=require_inquire(),e.utf8=require_utf8(),e.pool=require_pool(),e.LongBits=require_longbits(),e.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.isString=function(t){return"string"==typeof t||t instanceof String},e.isObject=function(t){return t&&"object"==typeof t},e.isset=e.isSet=function(t,e){var r=t[e];return!!(null!=r&&t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},e.Buffer=function(){try{var t=e.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(t){return"number"==typeof t?e.Buffer?e._Buffer_allocUnsafe(t):new e.Array(t):e.Buffer?e._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},e.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(t){return t?e.LongBits.from(t).toHash():e.LongBits.zeroHash},e.longFromHash=function(t,r){var n=e.LongBits.fromHash(t);return e.Long?e.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)},e.merge=r,e.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},e.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var t=e.Buffer;if(!t){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},e._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}}}}),require_writer=__commonJS({"web/node_modules/protobufjs/src/writer.js"(t,e){"use strict";e.exports=c;var r,n=require_minimal(),i=n.LongBits,o=n.base64,s=n.utf8;function a(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function c(){this.len=0,this.head=new a(u,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}};function p(t,e,r){e[r]=255&t}function h(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function b(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function g(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}c.create=d(),c.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(c.alloc=n.pool(c.alloc,n.Array.prototype.subarray)),c.prototype._push=function(t,e,r){return this.tail=this.tail.next=new a(t,e,r),this.len+=e,this},f.prototype=Object.create(a.prototype),f.prototype.fn=h,c.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<0x10000000?4:5,t)).len,this},c.prototype.int32=function(t){return t<0?this._push(b,10,i.fromNumber(t)):this.uint32(t)},c.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},c.prototype.uint64=function(t){var e=i.from(t);return this._push(b,e.length(),e)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(b,e.length(),e)},c.prototype.bool=function(t){return this._push(p,1,+!!t)},c.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(t){var e=i.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(t){return this._push(n.float.writeFloatLE,4,t)},c.prototype.double=function(t){return this._push(n.float.writeDoubleLE,8,t)};var m=n.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};c.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(n.isString(t)){var r=c.alloc(e=o.length(t));o.decode(t,r,0),t=r}return this.uint32(e)._push(m,e,t)},c.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(p,1,0)},c.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new a(u,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(u,0,0),this.len=0),this},c.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},c.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},c._configure=function(t){r=t,c.create=d(),r._configure()}}}),require_writer_buffer=__commonJS({"web/node_modules/protobufjs/src/writer_buffer.js"(t,e){"use strict";e.exports=i;var r=require_writer();(i.prototype=Object.create(r.prototype)).constructor=i;var n=require_minimal();function i(){r.call(this)}function o(t,e,r){t.length<40?n.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},i.prototype.bytes=function(t){n.isString(t)&&(t=n._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},i._configure()}}),require_reader=__commonJS({"web/node_modules/protobufjs/src/reader.js"(t,e){"use strict";e.exports=a;var r,n=require_minimal(),i=n.LongBits,o=n.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function a(t){this.buf=t,this.pos=0,this.len=t.length}var u="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(a.create=function(t){return n.Buffer.isBuffer(t)?new r(t):u(t)})(t)}:u};function c(){var t=new i(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}a.create=l(),a.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,a.prototype.uint32=function(){var t=0xffffffff;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return t}}(),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},a.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},a.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw s(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,r);if(e===r){var i=n.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,r)},a.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},a.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do if(this.pos>=this.len)throw s(this);while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},a._configure=function(t){r=t,a.create=l(),r._configure();var e=n.Long?"toLong":"toNumber";n.merge(a.prototype,{int64:function(){return c.call(this)[e](!1)},uint64:function(){return c.call(this)[e](!0)},sint64:function(){return c.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}}}),require_reader_buffer=__commonJS({"web/node_modules/protobufjs/src/reader_buffer.js"(t,e){"use strict";e.exports=i;var r=require_reader();(i.prototype=Object.create(r.prototype)).constructor=i;var n=require_minimal();function i(t){r.call(this,t)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()}}),require_service=__commonJS({"web/node_modules/protobufjs/src/rpc/service.js"(t,e){"use strict";e.exports=n;var r=require_minimal();function n(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!n}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(t,a,e,n,i,o);if(!a.rpcImpl)return void setTimeout(function(){s(Error("already ended"))},0);try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,r){if(t)return a.emit("error",t,e),s(t);if(null===r)return void a.end(!0);if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",r,e),s(null,r)})}catch(t){a.emit("error",t,e),setTimeout(function(){s(t)},0);return}},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}}),require_rpc=__commonJS({"web/node_modules/protobufjs/src/rpc.js"(t){"use strict";t.Service=require_service()}}),require_roots=__commonJS({"web/node_modules/protobufjs/src/roots.js"(t,e){"use strict";e.exports={}}}),require_index_minimal=__commonJS({"web/node_modules/protobufjs/src/index-minimal.js"(t){"use strict";var e=t;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}e.build="minimal",e.Writer=require_writer(),e.BufferWriter=require_writer_buffer(),e.Reader=require_reader(),e.BufferReader=require_reader_buffer(),e.util=require_minimal(),e.rpc=require_rpc(),e.roots=require_roots(),e.configure=r,r()}}),require_minimal2=__commonJS({"web/node_modules/protobufjs/minimal.js"(t,e){"use strict";e.exports=require_index_minimal()}}),require_onnx=__commonJS({"web/lib/onnxjs/ort-schema/protobuf/onnx.js"(t,e){"use strict";var r=require_minimal2(),n=r.Reader,i=r.Writer,o=r.util,s=r.roots.default||(r.roots.default={});s.onnx=function(){var t={};return t.Version=function(){var t={},e=Object.create(t);return e[t[0]="_START_VERSION"]=0,e[t[1]="IR_VERSION_2017_10_10"]=1,e[t[2]="IR_VERSION_2017_10_30"]=2,e[t[3]="IR_VERSION_2017_11_3"]=3,e[t[4]="IR_VERSION_2019_1_22"]=4,e[t[5]="IR_VERSION_2019_3_18"]=5,e[t[6]="IR_VERSION_2019_9_19"]=6,e[t[7]="IR_VERSION_2020_5_8"]=7,e[t[8]="IR_VERSION_2021_7_30"]=8,e[t[9]="IR_VERSION"]=9,e}(),t.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=o.Long?o.Long.fromBits(0,0,!1):0,t.prototype.s=o.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.sparseTensor=null,t.prototype.tp=null,t.prototype.floats=o.emptyArray,t.prototype.ints=o.emptyArray,t.prototype.strings=o.emptyArray,t.prototype.tensors=o.emptyArray,t.prototype.graphs=o.emptyArray,t.prototype.sparseTensors=o.emptyArray,t.prototype.typeProtos=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(10).string(t.name),null!=t.f&&Object.hasOwnProperty.call(t,"f")&&e.uint32(21).float(t.f),null!=t.i&&Object.hasOwnProperty.call(t,"i")&&e.uint32(24).int64(t.i),null!=t.s&&Object.hasOwnProperty.call(t,"s")&&e.uint32(34).bytes(t.s),null!=t.t&&Object.hasOwnProperty.call(t,"t")&&s.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&Object.hasOwnProperty.call(t,"g")&&s.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var r=0;r<t.floats.length;++r)e.float(t.floats[r]);e.ldelim()}if(null!=t.ints&&t.ints.length){e.uint32(66).fork();for(var r=0;r<t.ints.length;++r)e.int64(t.ints[r]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(var r=0;r<t.strings.length;++r)e.uint32(74).bytes(t.strings[r]);if(null!=t.tensors&&t.tensors.length)for(var r=0;r<t.tensors.length;++r)s.onnx.TensorProto.encode(t.tensors[r],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(var r=0;r<t.graphs.length;++r)s.onnx.GraphProto.encode(t.graphs[r],e.uint32(90).fork()).ldelim();if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(106).string(t.docString),null!=t.tp&&Object.hasOwnProperty.call(t,"tp")&&s.onnx.TypeProto.encode(t.tp,e.uint32(114).fork()).ldelim(),null!=t.typeProtos&&t.typeProtos.length)for(var r=0;r<t.typeProtos.length;++r)s.onnx.TypeProto.encode(t.typeProtos[r],e.uint32(122).fork()).ldelim();if(null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&Object.hasOwnProperty.call(t,"refAttrName")&&e.uint32(170).string(t.refAttrName),null!=t.sparseTensor&&Object.hasOwnProperty.call(t,"sparseTensor")&&s.onnx.SparseTensorProto.encode(t.sparseTensor,e.uint32(178).fork()).ldelim(),null!=t.sparseTensors&&t.sparseTensors.length)for(var r=0;r<t.sparseTensors.length;++r)s.onnx.SparseTensorProto.encode(t.sparseTensors[r],e.uint32(186).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.AttributeProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.name=t.string();break;case 21:i.refAttrName=t.string();break;case 13:i.docString=t.string();break;case 20:i.type=t.int32();break;case 2:i.f=t.float();break;case 3:i.i=t.int64();break;case 4:i.s=t.bytes();break;case 5:i.t=s.onnx.TensorProto.decode(t,t.uint32());break;case 6:i.g=s.onnx.GraphProto.decode(t,t.uint32());break;case 22:i.sparseTensor=s.onnx.SparseTensorProto.decode(t,t.uint32());break;case 14:i.tp=s.onnx.TypeProto.decode(t,t.uint32());break;case 7:if(i.floats&&i.floats.length||(i.floats=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.floats.push(t.float());else i.floats.push(t.float());break;case 8:if(i.ints&&i.ints.length||(i.ints=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.ints.push(t.int64());else i.ints.push(t.int64());break;case 9:i.strings&&i.strings.length||(i.strings=[]),i.strings.push(t.bytes());break;case 10:i.tensors&&i.tensors.length||(i.tensors=[]),i.tensors.push(s.onnx.TensorProto.decode(t,t.uint32()));break;case 11:i.graphs&&i.graphs.length||(i.graphs=[]),i.graphs.push(s.onnx.GraphProto.decode(t,t.uint32()));break;case 23:i.sparseTensors&&i.sparseTensors.length||(i.sparseTensors=[]),i.sparseTensors.push(s.onnx.SparseTensorProto.decode(t,t.uint32()));break;case 15:i.typeProtos&&i.typeProtos.length||(i.typeProtos=[]),i.typeProtos.push(s.onnx.TypeProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!o.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!o.isInteger(t.i)&&!(t.i&&o.isInteger(t.i.low)&&o.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||o.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")){var e=s.onnx.TensorProto.verify(t.t);if(e)return"t."+e}if(null!=t.g&&t.hasOwnProperty("g")){var e=s.onnx.GraphProto.verify(t.g);if(e)return"g."+e}if(null!=t.sparseTensor&&t.hasOwnProperty("sparseTensor")){var e=s.onnx.SparseTensorProto.verify(t.sparseTensor);if(e)return"sparseTensor."+e}if(null!=t.tp&&t.hasOwnProperty("tp")){var e=s.onnx.TypeProto.verify(t.tp);if(e)return"tp."+e}if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var r=0;r<t.floats.length;++r)if("number"!=typeof t.floats[r])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(var r=0;r<t.ints.length;++r)if(!o.isInteger(t.ints[r])&&!(t.ints[r]&&o.isInteger(t.ints[r].low)&&o.isInteger(t.ints[r].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(var r=0;r<t.strings.length;++r)if(!(t.strings[r]&&"number"==typeof t.strings[r].length||o.isString(t.strings[r])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(var r=0;r<t.tensors.length;++r){var e=s.onnx.TensorProto.verify(t.tensors[r]);if(e)return"tensors."+e}}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(var r=0;r<t.graphs.length;++r){var e=s.onnx.GraphProto.verify(t.graphs[r]);if(e)return"graphs."+e}}if(null!=t.sparseTensors&&t.hasOwnProperty("sparseTensors")){if(!Array.isArray(t.sparseTensors))return"sparseTensors: array expected";for(var r=0;r<t.sparseTensors.length;++r){var e=s.onnx.SparseTensorProto.verify(t.sparseTensors[r]);if(e)return"sparseTensors."+e}}if(null!=t.typeProtos&&t.hasOwnProperty("typeProtos")){if(!Array.isArray(t.typeProtos))return"typeProtos: array expected";for(var r=0;r<t.typeProtos.length;++r){var e=s.onnx.TypeProto.verify(t.typeProtos[r]);if(e)return"typeProtos."+e}}return null},t.fromObject=function(t){if(t instanceof s.onnx.AttributeProto)return t;var e=new s.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){default:"number"==typeof t.type&&(e.type=t.type);break;case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"SPARSE_TENSOR":case 11:e.type=11;break;case"TYPE_PROTO":case 13:e.type=13;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10;break;case"SPARSE_TENSORS":case 12:e.type=12;break;case"TYPE_PROTOS":case 14:e.type=14}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(o.Long?(e.i=o.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new o.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?o.base64.decode(t.s,e.s=o.newBuffer(o.base64.length(t.s)),0):t.s.length>=0&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=s.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=s.onnx.GraphProto.fromObject(t.g)}if(null!=t.sparseTensor){if("object"!=typeof t.sparseTensor)throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");e.sparseTensor=s.onnx.SparseTensorProto.fromObject(t.sparseTensor)}if(null!=t.tp){if("object"!=typeof t.tp)throw TypeError(".onnx.AttributeProto.tp: object expected");e.tp=s.onnx.TypeProto.fromObject(t.tp)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var r=0;r<t.floats.length;++r)e.floats[r]=Number(t.floats[r])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");e.ints=[];for(var r=0;r<t.ints.length;++r)o.Long?(e.ints[r]=o.Long.fromValue(t.ints[r])).unsigned=!1:"string"==typeof t.ints[r]?e.ints[r]=parseInt(t.ints[r],10):"number"==typeof t.ints[r]?e.ints[r]=t.ints[r]:"object"==typeof t.ints[r]&&(e.ints[r]=new o.LongBits(t.ints[r].low>>>0,t.ints[r].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");e.strings=[];for(var r=0;r<t.strings.length;++r)"string"==typeof t.strings[r]?o.base64.decode(t.strings[r],e.strings[r]=o.newBuffer(o.base64.length(t.strings[r])),0):t.strings[r].length>=0&&(e.strings[r]=t.strings[r])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");e.tensors=[];for(var r=0;r<t.tensors.length;++r){if("object"!=typeof t.tensors[r])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[r]=s.onnx.TensorProto.fromObject(t.tensors[r])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");e.graphs=[];for(var r=0;r<t.graphs.length;++r){if("object"!=typeof t.graphs[r])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[r]=s.onnx.GraphProto.fromObject(t.graphs[r])}}if(t.sparseTensors){if(!Array.isArray(t.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");e.sparseTensors=[];for(var r=0;r<t.sparseTensors.length;++r){if("object"!=typeof t.sparseTensors[r])throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");e.sparseTensors[r]=s.onnx.SparseTensorProto.fromObject(t.sparseTensors[r])}}if(t.typeProtos){if(!Array.isArray(t.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");e.typeProtos=[];for(var r=0;r<t.typeProtos.length;++r){if("object"!=typeof t.typeProtos[r])throw TypeError(".onnx.AttributeProto.typeProtos: object expected");e.typeProtos[r]=s.onnx.TypeProto.fromObject(t.typeProtos[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.floats=[],r.ints=[],r.strings=[],r.tensors=[],r.graphs=[],r.typeProtos=[],r.sparseTensors=[]),e.defaults){if(r.name="",r.f=0,o.Long){var n=new o.Long(0,0,!1);r.i=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.i=e.longs===String?"0":0;e.bytes===String?r.s="":(r.s=[],e.bytes!==Array&&(r.s=o.newBuffer(r.s))),r.t=null,r.g=null,r.docString="",r.tp=null,r.type=e.enums===String?"UNDEFINED":0,r.refAttrName="",r.sparseTensor=null}if(null!=t.name&&t.hasOwnProperty("name")&&(r.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(r.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?r.i=e.longs===String?String(t.i):t.i:r.i=e.longs===String?o.Long.prototype.toString.call(t.i):e.longs===Number?new o.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(r.s=e.bytes===String?o.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(r.t=s.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(r.g=s.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){r.floats=[];for(var i=0;i<t.floats.length;++i)r.floats[i]=e.json&&!isFinite(t.floats[i])?String(t.floats[i]):t.floats[i]}if(t.ints&&t.ints.length){r.ints=[];for(var i=0;i<t.ints.length;++i)"number"==typeof t.ints[i]?r.ints[i]=e.longs===String?String(t.ints[i]):t.ints[i]:r.ints[i]=e.longs===String?o.Long.prototype.toString.call(t.ints[i]):e.longs===Number?new o.LongBits(t.ints[i].low>>>0,t.ints[i].high>>>0).toNumber():t.ints[i]}if(t.strings&&t.strings.length){r.strings=[];for(var i=0;i<t.strings.length;++i)r.strings[i]=e.bytes===String?o.base64.encode(t.strings[i],0,t.strings[i].length):e.bytes===Array?Array.prototype.slice.call(t.strings[i]):t.strings[i]}if(t.tensors&&t.tensors.length){r.tensors=[];for(var i=0;i<t.tensors.length;++i)r.tensors[i]=s.onnx.TensorProto.toObject(t.tensors[i],e)}if(t.graphs&&t.graphs.length){r.graphs=[];for(var i=0;i<t.graphs.length;++i)r.graphs[i]=s.onnx.GraphProto.toObject(t.graphs[i],e)}if(null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),null!=t.tp&&t.hasOwnProperty("tp")&&(r.tp=s.onnx.TypeProto.toObject(t.tp,e)),t.typeProtos&&t.typeProtos.length){r.typeProtos=[];for(var i=0;i<t.typeProtos.length;++i)r.typeProtos[i]=s.onnx.TypeProto.toObject(t.typeProtos[i],e)}if(null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?void 0===s.onnx.AttributeProto.AttributeType[t.type]?t.type:s.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(r.refAttrName=t.refAttrName),null!=t.sparseTensor&&t.hasOwnProperty("sparseTensor")&&(r.sparseTensor=s.onnx.SparseTensorProto.toObject(t.sparseTensor,e)),t.sparseTensors&&t.sparseTensors.length){r.sparseTensors=[];for(var i=0;i<t.sparseTensors.length;++i)r.sparseTensors[i]=s.onnx.SparseTensorProto.toObject(t.sparseTensors[i],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.AttributeProto"},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[11]="SPARSE_TENSOR"]=11,e[t[13]="TYPE_PROTO"]=13,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e[t[12]="SPARSE_TENSORS"]=12,e[t[14]="TYPE_PROTOS"]=14,e}(),t}(),t.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(10).string(t.name),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&s.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.ValueInfoProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.name=t.string();break;case 2:i.type=s.onnx.TypeProto.decode(t,t.uint32());break;case 3:i.docString=t.string();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=s.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.ValueInfoProto)return t;var e=new s.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=s.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.name="",r.type=null,r.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(r.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(r.type=s.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.ValueInfoProto"},t}(),t.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.input=o.emptyArray,t.prototype.output=o.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=o.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.input&&t.input.length)for(var r=0;r<t.input.length;++r)e.uint32(10).string(t.input[r]);if(null!=t.output&&t.output.length)for(var r=0;r<t.output.length;++r)e.uint32(18).string(t.output[r]);if(null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(26).string(t.name),null!=t.opType&&Object.hasOwnProperty.call(t,"opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(var r=0;r<t.attribute.length;++r)s.onnx.AttributeProto.encode(t.attribute[r],e.uint32(42).fork()).ldelim();return null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(50).string(t.docString),null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.NodeProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.input&&i.input.length||(i.input=[]),i.input.push(t.string());break;case 2:i.output&&i.output.length||(i.output=[]),i.output.push(t.string());break;case 3:i.name=t.string();break;case 4:i.opType=t.string();break;case 7:i.domain=t.string();break;case 5:i.attribute&&i.attribute.length||(i.attribute=[]),i.attribute.push(s.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:i.docString=t.string();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!o.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(var e=0;e<t.output.length;++e)if(!o.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!o.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!o.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(var e=0;e<t.attribute.length;++e){var r=s.onnx.AttributeProto.verify(t.attribute[e]);if(r)return"attribute."+r}}return null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.NodeProto)return t;var e=new s.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var r=0;r<t.input.length;++r)e.input[r]=String(t.input[r])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");e.output=[];for(var r=0;r<t.output.length;++r)e.output[r]=String(t.output[r])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");e.attribute=[];for(var r=0;r<t.attribute.length;++r){if("object"!=typeof t.attribute[r])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[r]=s.onnx.AttributeProto.fromObject(t.attribute[r])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.input=[],r.output=[],r.attribute=[]),e.defaults&&(r.name="",r.opType="",r.docString="",r.domain=""),t.input&&t.input.length){r.input=[];for(var n=0;n<t.input.length;++n)r.input[n]=t.input[n]}if(t.output&&t.output.length){r.output=[];for(var n=0;n<t.output.length;++n)r.output[n]=t.output[n]}if(null!=t.name&&t.hasOwnProperty("name")&&(r.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(r.opType=t.opType),t.attribute&&t.attribute.length){r.attribute=[];for(var n=0;n<t.attribute.length;++n)r.attribute[n]=s.onnx.AttributeProto.toObject(t.attribute[n],e)}return null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(r.domain=t.domain),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.NodeProto"},t}(),t.TrainingInfoProto=function(){function t(t){if(this.initializationBinding=[],this.updateBinding=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.initialization=null,t.prototype.algorithm=null,t.prototype.initializationBinding=o.emptyArray,t.prototype.updateBinding=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.initialization&&Object.hasOwnProperty.call(t,"initialization")&&s.onnx.GraphProto.encode(t.initialization,e.uint32(10).fork()).ldelim(),null!=t.algorithm&&Object.hasOwnProperty.call(t,"algorithm")&&s.onnx.GraphProto.encode(t.algorithm,e.uint32(18).fork()).ldelim(),null!=t.initializationBinding&&t.initializationBinding.length)for(var r=0;r<t.initializationBinding.length;++r)s.onnx.StringStringEntryProto.encode(t.initializationBinding[r],e.uint32(26).fork()).ldelim();if(null!=t.updateBinding&&t.updateBinding.length)for(var r=0;r<t.updateBinding.length;++r)s.onnx.StringStringEntryProto.encode(t.updateBinding[r],e.uint32(34).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TrainingInfoProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.initialization=s.onnx.GraphProto.decode(t,t.uint32());break;case 2:i.algorithm=s.onnx.GraphProto.decode(t,t.uint32());break;case 3:i.initializationBinding&&i.initializationBinding.length||(i.initializationBinding=[]),i.initializationBinding.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 4:i.updateBinding&&i.updateBinding.length||(i.updateBinding=[]),i.updateBinding.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.initialization&&t.hasOwnProperty("initialization")){var e=s.onnx.GraphProto.verify(t.initialization);if(e)return"initialization."+e}if(null!=t.algorithm&&t.hasOwnProperty("algorithm")){var e=s.onnx.GraphProto.verify(t.algorithm);if(e)return"algorithm."+e}if(null!=t.initializationBinding&&t.hasOwnProperty("initializationBinding")){if(!Array.isArray(t.initializationBinding))return"initializationBinding: array expected";for(var r=0;r<t.initializationBinding.length;++r){var e=s.onnx.StringStringEntryProto.verify(t.initializationBinding[r]);if(e)return"initializationBinding."+e}}if(null!=t.updateBinding&&t.hasOwnProperty("updateBinding")){if(!Array.isArray(t.updateBinding))return"updateBinding: array expected";for(var r=0;r<t.updateBinding.length;++r){var e=s.onnx.StringStringEntryProto.verify(t.updateBinding[r]);if(e)return"updateBinding."+e}}return null},t.fromObject=function(t){if(t instanceof s.onnx.TrainingInfoProto)return t;var e=new s.onnx.TrainingInfoProto;if(null!=t.initialization){if("object"!=typeof t.initialization)throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");e.initialization=s.onnx.GraphProto.fromObject(t.initialization)}if(null!=t.algorithm){if("object"!=typeof t.algorithm)throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");e.algorithm=s.onnx.GraphProto.fromObject(t.algorithm)}if(t.initializationBinding){if(!Array.isArray(t.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");e.initializationBinding=[];for(var r=0;r<t.initializationBinding.length;++r){if("object"!=typeof t.initializationBinding[r])throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");e.initializationBinding[r]=s.onnx.StringStringEntryProto.fromObject(t.initializationBinding[r])}}if(t.updateBinding){if(!Array.isArray(t.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");e.updateBinding=[];for(var r=0;r<t.updateBinding.length;++r){if("object"!=typeof t.updateBinding[r])throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");e.updateBinding[r]=s.onnx.StringStringEntryProto.fromObject(t.updateBinding[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.initializationBinding=[],r.updateBinding=[]),e.defaults&&(r.initialization=null,r.algorithm=null),null!=t.initialization&&t.hasOwnProperty("initialization")&&(r.initialization=s.onnx.GraphProto.toObject(t.initialization,e)),null!=t.algorithm&&t.hasOwnProperty("algorithm")&&(r.algorithm=s.onnx.GraphProto.toObject(t.algorithm,e)),t.initializationBinding&&t.initializationBinding.length){r.initializationBinding=[];for(var n=0;n<t.initializationBinding.length;++n)r.initializationBinding[n]=s.onnx.StringStringEntryProto.toObject(t.initializationBinding[n],e)}if(t.updateBinding&&t.updateBinding.length){r.updateBinding=[];for(var n=0;n<t.updateBinding.length;++n)r.updateBinding[n]=s.onnx.StringStringEntryProto.toObject(t.updateBinding[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TrainingInfoProto"},t}(),t.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.irVersion=o.Long?o.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=o.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=o.Long?o.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=o.emptyArray,t.prototype.trainingInfo=o.emptyArray,t.prototype.functions=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.irVersion&&Object.hasOwnProperty.call(t,"irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&Object.hasOwnProperty.call(t,"producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&Object.hasOwnProperty.call(t,"producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&Object.hasOwnProperty.call(t,"modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(50).string(t.docString),null!=t.graph&&Object.hasOwnProperty.call(t,"graph")&&s.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var r=0;r<t.opsetImport.length;++r)s.onnx.OperatorSetIdProto.encode(t.opsetImport[r],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(var r=0;r<t.metadataProps.length;++r)s.onnx.StringStringEntryProto.encode(t.metadataProps[r],e.uint32(114).fork()).ldelim();if(null!=t.trainingInfo&&t.trainingInfo.length)for(var r=0;r<t.trainingInfo.length;++r)s.onnx.TrainingInfoProto.encode(t.trainingInfo[r],e.uint32(162).fork()).ldelim();if(null!=t.functions&&t.functions.length)for(var r=0;r<t.functions.length;++r)s.onnx.FunctionProto.encode(t.functions[r],e.uint32(202).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.ModelProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.irVersion=t.int64();break;case 8:i.opsetImport&&i.opsetImport.length||(i.opsetImport=[]),i.opsetImport.push(s.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:i.producerName=t.string();break;case 3:i.producerVersion=t.string();break;case 4:i.domain=t.string();break;case 5:i.modelVersion=t.int64();break;case 6:i.docString=t.string();break;case 7:i.graph=s.onnx.GraphProto.decode(t,t.uint32());break;case 14:i.metadataProps&&i.metadataProps.length||(i.metadataProps=[]),i.metadataProps.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 20:i.trainingInfo&&i.trainingInfo.length||(i.trainingInfo=[]),i.trainingInfo.push(s.onnx.TrainingInfoProto.decode(t,t.uint32()));break;case 25:i.functions&&i.functions.length||(i.functions=[]),i.functions.push(s.onnx.FunctionProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!o.isInteger(t.irVersion)&&!(t.irVersion&&o.isInteger(t.irVersion.low)&&o.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e){var r=s.onnx.OperatorSetIdProto.verify(t.opsetImport[e]);if(r)return"opsetImport."+r}}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!o.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!o.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!o.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!o.isInteger(t.modelVersion)&&!(t.modelVersion&&o.isInteger(t.modelVersion.low)&&o.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")){var r=s.onnx.GraphProto.verify(t.graph);if(r)return"graph."+r}if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(var e=0;e<t.metadataProps.length;++e){var r=s.onnx.StringStringEntryProto.verify(t.metadataProps[e]);if(r)return"metadataProps."+r}}if(null!=t.trainingInfo&&t.hasOwnProperty("trainingInfo")){if(!Array.isArray(t.trainingInfo))return"trainingInfo: array expected";for(var e=0;e<t.trainingInfo.length;++e){var r=s.onnx.TrainingInfoProto.verify(t.trainingInfo[e]);if(r)return"trainingInfo."+r}}if(null!=t.functions&&t.hasOwnProperty("functions")){if(!Array.isArray(t.functions))return"functions: array expected";for(var e=0;e<t.functions.length;++e){var r=s.onnx.FunctionProto.verify(t.functions[e]);if(r)return"functions."+r}}return null},t.fromObject=function(t){if(t instanceof s.onnx.ModelProto)return t;var e=new s.onnx.ModelProto;if(null!=t.irVersion&&(o.Long?(e.irVersion=o.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new o.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var r=0;r<t.opsetImport.length;++r){if("object"!=typeof t.opsetImport[r])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[r]=s.onnx.OperatorSetIdProto.fromObject(t.opsetImport[r])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(o.Long?(e.modelVersion=o.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new o.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=s.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");e.metadataProps=[];for(var r=0;r<t.metadataProps.length;++r){if("object"!=typeof t.metadataProps[r])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[r]=s.onnx.StringStringEntryProto.fromObject(t.metadataProps[r])}}if(t.trainingInfo){if(!Array.isArray(t.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");e.trainingInfo=[];for(var r=0;r<t.trainingInfo.length;++r){if("object"!=typeof t.trainingInfo[r])throw TypeError(".onnx.ModelProto.trainingInfo: object expected");e.trainingInfo[r]=s.onnx.TrainingInfoProto.fromObject(t.trainingInfo[r])}}if(t.functions){if(!Array.isArray(t.functions))throw TypeError(".onnx.ModelProto.functions: array expected");e.functions=[];for(var r=0;r<t.functions.length;++r){if("object"!=typeof t.functions[r])throw TypeError(".onnx.ModelProto.functions: object expected");e.functions[r]=s.onnx.FunctionProto.fromObject(t.functions[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.opsetImport=[],r.metadataProps=[],r.trainingInfo=[],r.functions=[]),e.defaults){if(o.Long){var n=new o.Long(0,0,!1);r.irVersion=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.irVersion=e.longs===String?"0":0;if(r.producerName="",r.producerVersion="",r.domain="",o.Long){var n=new o.Long(0,0,!1);r.modelVersion=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.modelVersion=e.longs===String?"0":0;r.docString="",r.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?r.irVersion=e.longs===String?String(t.irVersion):t.irVersion:r.irVersion=e.longs===String?o.Long.prototype.toString.call(t.irVersion):e.longs===Number?new o.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(r.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(r.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(r.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?r.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:r.modelVersion=e.longs===String?o.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new o.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(r.graph=s.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){r.opsetImport=[];for(var i=0;i<t.opsetImport.length;++i)r.opsetImport[i]=s.onnx.OperatorSetIdProto.toObject(t.opsetImport[i],e)}if(t.metadataProps&&t.metadataProps.length){r.metadataProps=[];for(var i=0;i<t.metadataProps.length;++i)r.metadataProps[i]=s.onnx.StringStringEntryProto.toObject(t.metadataProps[i],e)}if(t.trainingInfo&&t.trainingInfo.length){r.trainingInfo=[];for(var i=0;i<t.trainingInfo.length;++i)r.trainingInfo[i]=s.onnx.TrainingInfoProto.toObject(t.trainingInfo[i],e)}if(t.functions&&t.functions.length){r.functions=[];for(var i=0;i<t.functions.length;++i)r.functions[i]=s.onnx.FunctionProto.toObject(t.functions[i],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.ModelProto"},t}(),t.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).string(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.StringStringEntryProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.key=t.string();break;case 2:i.value=t.string();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!o.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!o.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.StringStringEntryProto)return t;var e=new s.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.key="",r.value=""),null!=t.key&&t.hasOwnProperty("key")&&(r.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(r.value=t.value),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.StringStringEntryProto"},t}(),t.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.tensorName&&Object.hasOwnProperty.call(t,"tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var r=0;r<t.quantParameterTensorNames.length;++r)s.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[r],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TensorAnnotation;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.tensorName=t.string();break;case 2:i.quantParameterTensorNames&&i.quantParameterTensorNames.length||(i.quantParameterTensorNames=[]),i.quantParameterTensorNames.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!o.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var r=s.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(r)return"quantParameterTensorNames."+r}}return null},t.fromObject=function(t){if(t instanceof s.onnx.TensorAnnotation)return t;var e=new s.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r){if("object"!=typeof t.quantParameterTensorNames[r])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[r]=s.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.quantParameterTensorNames=[]),e.defaults&&(r.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(r.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){r.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n)r.quantParameterTensorNames[n]=s.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorAnnotation"},t}(),t.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.node=o.emptyArray,t.prototype.name="",t.prototype.initializer=o.emptyArray,t.prototype.sparseInitializer=o.emptyArray,t.prototype.docString="",t.prototype.input=o.emptyArray,t.prototype.output=o.emptyArray,t.prototype.valueInfo=o.emptyArray,t.prototype.quantizationAnnotation=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.node&&t.node.length)for(var r=0;r<t.node.length;++r)s.onnx.NodeProto.encode(t.node[r],e.uint32(10).fork()).ldelim();if(null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(var r=0;r<t.initializer.length;++r)s.onnx.TensorProto.encode(t.initializer[r],e.uint32(42).fork()).ldelim();if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(var r=0;r<t.input.length;++r)s.onnx.ValueInfoProto.encode(t.input[r],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(var r=0;r<t.output.length;++r)s.onnx.ValueInfoProto.encode(t.output[r],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(var r=0;r<t.valueInfo.length;++r)s.onnx.ValueInfoProto.encode(t.valueInfo[r],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(var r=0;r<t.quantizationAnnotation.length;++r)s.onnx.TensorAnnotation.encode(t.quantizationAnnotation[r],e.uint32(114).fork()).ldelim();if(null!=t.sparseInitializer&&t.sparseInitializer.length)for(var r=0;r<t.sparseInitializer.length;++r)s.onnx.SparseTensorProto.encode(t.sparseInitializer[r],e.uint32(122).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.GraphProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.node&&i.node.length||(i.node=[]),i.node.push(s.onnx.NodeProto.decode(t,t.uint32()));break;case 2:i.name=t.string();break;case 5:i.initializer&&i.initializer.length||(i.initializer=[]),i.initializer.push(s.onnx.TensorProto.decode(t,t.uint32()));break;case 15:i.sparseInitializer&&i.sparseInitializer.length||(i.sparseInitializer=[]),i.sparseInitializer.push(s.onnx.SparseTensorProto.decode(t,t.uint32()));break;case 10:i.docString=t.string();break;case 11:i.input&&i.input.length||(i.input=[]),i.input.push(s.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:i.output&&i.output.length||(i.output=[]),i.output.push(s.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:i.valueInfo&&i.valueInfo.length||(i.valueInfo=[]),i.valueInfo.push(s.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:i.quantizationAnnotation&&i.quantizationAnnotation.length||(i.quantizationAnnotation=[]),i.quantizationAnnotation.push(s.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e){var r=s.onnx.NodeProto.verify(t.node[e]);if(r)return"node."+r}}if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(var e=0;e<t.initializer.length;++e){var r=s.onnx.TensorProto.verify(t.initializer[e]);if(r)return"initializer."+r}}if(null!=t.sparseInitializer&&t.hasOwnProperty("sparseInitializer")){if(!Array.isArray(t.sparseInitializer))return"sparseInitializer: array expected";for(var e=0;e<t.sparseInitializer.length;++e){var r=s.onnx.SparseTensorProto.verify(t.sparseInitializer[e]);if(r)return"sparseInitializer."+r}}if(null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e){var r=s.onnx.ValueInfoProto.verify(t.input[e]);if(r)return"input."+r}}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(var e=0;e<t.output.length;++e){var r=s.onnx.ValueInfoProto.verify(t.output[e]);if(r)return"output."+r}}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(var e=0;e<t.valueInfo.length;++e){var r=s.onnx.ValueInfoProto.verify(t.valueInfo[e]);if(r)return"valueInfo."+r}}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var e=0;e<t.quantizationAnnotation.length;++e){var r=s.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]);if(r)return"quantizationAnnotation."+r}}return null},t.fromObject=function(t){if(t instanceof s.onnx.GraphProto)return t;var e=new s.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var r=0;r<t.node.length;++r){if("object"!=typeof t.node[r])throw TypeError(".onnx.GraphProto.node: object expected");e.node[r]=s.onnx.NodeProto.fromObject(t.node[r])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");e.initializer=[];for(var r=0;r<t.initializer.length;++r){if("object"!=typeof t.initializer[r])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[r]=s.onnx.TensorProto.fromObject(t.initializer[r])}}if(t.sparseInitializer){if(!Array.isArray(t.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");e.sparseInitializer=[];for(var r=0;r<t.sparseInitializer.length;++r){if("object"!=typeof t.sparseInitializer[r])throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");e.sparseInitializer[r]=s.onnx.SparseTensorProto.fromObject(t.sparseInitializer[r])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");e.input=[];for(var r=0;r<t.input.length;++r){if("object"!=typeof t.input[r])throw TypeError(".onnx.GraphProto.input: object expected");e.input[r]=s.onnx.ValueInfoProto.fromObject(t.input[r])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");e.output=[];for(var r=0;r<t.output.length;++r){if("object"!=typeof t.output[r])throw TypeError(".onnx.GraphProto.output: object expected");e.output[r]=s.onnx.ValueInfoProto.fromObject(t.output[r])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");e.valueInfo=[];for(var r=0;r<t.valueInfo.length;++r){if("object"!=typeof t.valueInfo[r])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[r]=s.onnx.ValueInfoProto.fromObject(t.valueInfo[r])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");e.quantizationAnnotation=[];for(var r=0;r<t.quantizationAnnotation.length;++r){if("object"!=typeof t.quantizationAnnotation[r])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[r]=s.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.node=[],r.initializer=[],r.input=[],r.output=[],r.valueInfo=[],r.quantizationAnnotation=[],r.sparseInitializer=[]),e.defaults&&(r.name="",r.docString=""),t.node&&t.node.length){r.node=[];for(var n=0;n<t.node.length;++n)r.node[n]=s.onnx.NodeProto.toObject(t.node[n],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(r.name=t.name),t.initializer&&t.initializer.length){r.initializer=[];for(var n=0;n<t.initializer.length;++n)r.initializer[n]=s.onnx.TensorProto.toObject(t.initializer[n],e)}if(null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),t.input&&t.input.length){r.input=[];for(var n=0;n<t.input.length;++n)r.input[n]=s.onnx.ValueInfoProto.toObject(t.input[n],e)}if(t.output&&t.output.length){r.output=[];for(var n=0;n<t.output.length;++n)r.output[n]=s.onnx.ValueInfoProto.toObject(t.output[n],e)}if(t.valueInfo&&t.valueInfo.length){r.valueInfo=[];for(var n=0;n<t.valueInfo.length;++n)r.valueInfo[n]=s.onnx.ValueInfoProto.toObject(t.valueInfo[n],e)}if(t.quantizationAnnotation&&t.quantizationAnnotation.length){r.quantizationAnnotation=[];for(var n=0;n<t.quantizationAnnotation.length;++n)r.quantizationAnnotation[n]=s.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[n],e)}if(t.sparseInitializer&&t.sparseInitializer.length){r.sparseInitializer=[];for(var n=0;n<t.sparseInitializer.length;++n)r.sparseInitializer[n]=s.onnx.SparseTensorProto.toObject(t.sparseInitializer[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.GraphProto"},t}(),t.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.dims=o.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=o.emptyArray,t.prototype.int32Data=o.emptyArray,t.prototype.stringData=o.emptyArray,t.prototype.int64Data=o.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=o.newBuffer([]),t.prototype.externalData=o.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=o.emptyArray,t.prototype.uint64Data=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var r=0;r<t.dims.length;++r)e.int64(t.dims[r]);e.ldelim()}if(null!=t.dataType&&Object.hasOwnProperty.call(t,"dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&Object.hasOwnProperty.call(t,"segment")&&s.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){e.uint32(34).fork();for(var r=0;r<t.floatData.length;++r)e.float(t.floatData[r]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){e.uint32(42).fork();for(var r=0;r<t.int32Data.length;++r)e.int32(t.int32Data[r]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(var r=0;r<t.stringData.length;++r)e.uint32(50).bytes(t.stringData[r]);if(null!=t.int64Data&&t.int64Data.length){e.uint32(58).fork();for(var r=0;r<t.int64Data.length;++r)e.int64(t.int64Data[r]);e.ldelim()}if(null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(66).string(t.name),null!=t.rawData&&Object.hasOwnProperty.call(t,"rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){e.uint32(82).fork();for(var r=0;r<t.doubleData.length;++r)e.double(t.doubleData[r]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){e.uint32(90).fork();for(var r=0;r<t.uint64Data.length;++r)e.uint64(t.uint64Data[r]);e.ldelim()}if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(var r=0;r<t.externalData.length;++r)s.onnx.StringStringEntryProto.encode(t.externalData[r],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&Object.hasOwnProperty.call(t,"dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TensorProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:if(i.dims&&i.dims.length||(i.dims=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.dims.push(t.int64());else i.dims.push(t.int64());break;case 2:i.dataType=t.int32();break;case 3:i.segment=s.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(i.floatData&&i.floatData.length||(i.floatData=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.floatData.push(t.float());else i.floatData.push(t.float());break;case 5:if(i.int32Data&&i.int32Data.length||(i.int32Data=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.int32Data.push(t.int32());else i.int32Data.push(t.int32());break;case 6:i.stringData&&i.stringData.length||(i.stringData=[]),i.stringData.push(t.bytes());break;case 7:if(i.int64Data&&i.int64Data.length||(i.int64Data=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.int64Data.push(t.int64());else i.int64Data.push(t.int64());break;case 8:i.name=t.string();break;case 12:i.docString=t.string();break;case 9:i.rawData=t.bytes();break;case 13:i.externalData&&i.externalData.length||(i.externalData=[]),i.externalData.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:i.dataLocation=t.int32();break;case 10:if(i.doubleData&&i.doubleData.length||(i.doubleData=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.doubleData.push(t.double());else i.doubleData.push(t.double());break;case 11:if(i.uint64Data&&i.uint64Data.length||(i.uint64Data=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.uint64Data.push(t.uint64());else i.uint64Data.push(t.uint64());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!o.isInteger(t.dims[e])&&!(t.dims[e]&&o.isInteger(t.dims[e].low)&&o.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!o.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")){var r=s.onnx.TensorProto.Segment.verify(t.segment);if(r)return"segment."+r}if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(var e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(var e=0;e<t.int32Data.length;++e)if(!o.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(var e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||o.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(var e=0;e<t.int64Data.length;++e)if(!o.isInteger(t.int64Data[e])&&!(t.int64Data[e]&&o.isInteger(t.int64Data[e].low)&&o.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||o.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(var e=0;e<t.externalData.length;++e){var r=s.onnx.StringStringEntryProto.verify(t.externalData[e]);if(r)return"externalData."+r}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(var e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(var e=0;e<t.uint64Data.length;++e)if(!o.isInteger(t.uint64Data[e])&&!(t.uint64Data[e]&&o.isInteger(t.uint64Data[e].low)&&o.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof s.onnx.TensorProto)return t;var e=new s.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var r=0;r<t.dims.length;++r)o.Long?(e.dims[r]=o.Long.fromValue(t.dims[r])).unsigned=!1:"string"==typeof t.dims[r]?e.dims[r]=parseInt(t.dims[r],10):"number"==typeof t.dims[r]?e.dims[r]=t.dims[r]:"object"==typeof t.dims[r]&&(e.dims[r]=new o.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=s.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");e.floatData=[];for(var r=0;r<t.floatData.length;++r)e.floatData[r]=Number(t.floatData[r])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");e.int32Data=[];for(var r=0;r<t.int32Data.length;++r)e.int32Data[r]=0|t.int32Data[r]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");e.stringData=[];for(var r=0;r<t.stringData.length;++r)"string"==typeof t.stringData[r]?o.base64.decode(t.stringData[r],e.stringData[r]=o.newBuffer(o.base64.length(t.stringData[r])),0):t.stringData[r].length>=0&&(e.stringData[r]=t.stringData[r])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");e.int64Data=[];for(var r=0;r<t.int64Data.length;++r)o.Long?(e.int64Data[r]=o.Long.fromValue(t.int64Data[r])).unsigned=!1:"string"==typeof t.int64Data[r]?e.int64Data[r]=parseInt(t.int64Data[r],10):"number"==typeof t.int64Data[r]?e.int64Data[r]=t.int64Data[r]:"object"==typeof t.int64Data[r]&&(e.int64Data[r]=new o.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?o.base64.decode(t.rawData,e.rawData=o.newBuffer(o.base64.length(t.rawData)),0):t.rawData.length>=0&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");e.externalData=[];for(var r=0;r<t.externalData.length;++r){if("object"!=typeof t.externalData[r])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[r]=s.onnx.StringStringEntryProto.fromObject(t.externalData[r])}}switch(t.dataLocation){default:"number"==typeof t.dataLocation&&(e.dataLocation=t.dataLocation);break;case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");e.doubleData=[];for(var r=0;r<t.doubleData.length;++r)e.doubleData[r]=Number(t.doubleData[r])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");e.uint64Data=[];for(var r=0;r<t.uint64Data.length;++r)o.Long?(e.uint64Data[r]=o.Long.fromValue(t.uint64Data[r])).unsigned=!0:"string"==typeof t.uint64Data[r]?e.uint64Data[r]=parseInt(t.uint64Data[r],10):"number"==typeof t.uint64Data[r]?e.uint64Data[r]=t.uint64Data[r]:"object"==typeof t.uint64Data[r]&&(e.uint64Data[r]=new o.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.dims=[],r.floatData=[],r.int32Data=[],r.stringData=[],r.int64Data=[],r.doubleData=[],r.uint64Data=[],r.externalData=[]),e.defaults&&(r.dataType=0,r.segment=null,r.name="",e.bytes===String?r.rawData="":(r.rawData=[],e.bytes!==Array&&(r.rawData=o.newBuffer(r.rawData))),r.docString="",r.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){r.dims=[];for(var n=0;n<t.dims.length;++n)"number"==typeof t.dims[n]?r.dims[n]=e.longs===String?String(t.dims[n]):t.dims[n]:r.dims[n]=e.longs===String?o.Long.prototype.toString.call(t.dims[n]):e.longs===Number?new o.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber():t.dims[n]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(r.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(r.segment=s.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length){r.floatData=[];for(var n=0;n<t.floatData.length;++n)r.floatData[n]=e.json&&!isFinite(t.floatData[n])?String(t.floatData[n]):t.floatData[n]}if(t.int32Data&&t.int32Data.length){r.int32Data=[];for(var n=0;n<t.int32Data.length;++n)r.int32Data[n]=t.int32Data[n]}if(t.stringData&&t.stringData.length){r.stringData=[];for(var n=0;n<t.stringData.length;++n)r.stringData[n]=e.bytes===String?o.base64.encode(t.stringData[n],0,t.stringData[n].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[n]):t.stringData[n]}if(t.int64Data&&t.int64Data.length){r.int64Data=[];for(var n=0;n<t.int64Data.length;++n)"number"==typeof t.int64Data[n]?r.int64Data[n]=e.longs===String?String(t.int64Data[n]):t.int64Data[n]:r.int64Data[n]=e.longs===String?o.Long.prototype.toString.call(t.int64Data[n]):e.longs===Number?new o.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber():t.int64Data[n]}if(null!=t.name&&t.hasOwnProperty("name")&&(r.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(r.rawData=e.bytes===String?o.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length){r.doubleData=[];for(var n=0;n<t.doubleData.length;++n)r.doubleData[n]=e.json&&!isFinite(t.doubleData[n])?String(t.doubleData[n]):t.doubleData[n]}if(t.uint64Data&&t.uint64Data.length){r.uint64Data=[];for(var n=0;n<t.uint64Data.length;++n)"number"==typeof t.uint64Data[n]?r.uint64Data[n]=e.longs===String?String(t.uint64Data[n]):t.uint64Data[n]:r.uint64Data[n]=e.longs===String?o.Long.prototype.toString.call(t.uint64Data[n]):e.longs===Number?new o.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0):t.uint64Data[n]}if(null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),t.externalData&&t.externalData.length){r.externalData=[];for(var n=0;n<t.externalData.length;++n)r.externalData[n]=s.onnx.StringStringEntryProto.toObject(t.externalData[n],e)}return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(r.dataLocation=e.enums===String?void 0===s.onnx.TensorProto.DataLocation[t.dataLocation]?t.dataLocation:s.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorProto"},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e[t[17]="FLOAT8E4M3FN"]=17,e[t[18]="FLOAT8E4M3FNUZ"]=18,e[t[19]="FLOAT8E5M2"]=19,e[t[20]="FLOAT8E5M2FNUZ"]=20,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.begin=o.Long?o.Long.fromBits(0,0,!1):0,t.prototype.end=o.Long?o.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.begin&&Object.hasOwnProperty.call(t,"begin")&&e.uint32(8).int64(t.begin),null!=t.end&&Object.hasOwnProperty.call(t,"end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TensorProto.Segment;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.begin=t.int64();break;case 2:i.end=t.int64();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!o.isInteger(t.begin)&&!(t.begin&&o.isInteger(t.begin.low)&&o.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!o.isInteger(t.end)&&!(t.end&&o.isInteger(t.end.low)&&o.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof s.onnx.TensorProto.Segment)return t;var e=new s.onnx.TensorProto.Segment;return null!=t.begin&&(o.Long?(e.begin=o.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new o.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(o.Long?(e.end=o.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new o.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var r={};if(e.defaults){if(o.Long){var n=new o.Long(0,0,!1);r.begin=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.begin=e.longs===String?"0":0;if(o.Long){var n=new o.Long(0,0,!1);r.end=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?r.begin=e.longs===String?String(t.begin):t.begin:r.begin=e.longs===String?o.Long.prototype.toString.call(t.begin):e.longs===Number?new o.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?r.end=e.longs===String?String(t.end):t.end:r.end=e.longs===String?o.Long.prototype.toString.call(t.end):e.longs===Number?new o.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorProto.Segment"},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),t.SparseTensorProto=function(){function t(t){if(this.dims=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.values=null,t.prototype.indices=null,t.prototype.dims=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.values&&Object.hasOwnProperty.call(t,"values")&&s.onnx.TensorProto.encode(t.values,e.uint32(10).fork()).ldelim(),null!=t.indices&&Object.hasOwnProperty.call(t,"indices")&&s.onnx.TensorProto.encode(t.indices,e.uint32(18).fork()).ldelim(),null!=t.dims&&t.dims.length){e.uint32(26).fork();for(var r=0;r<t.dims.length;++r)e.int64(t.dims[r]);e.ldelim()}return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.SparseTensorProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.values=s.onnx.TensorProto.decode(t,t.uint32());break;case 2:i.indices=s.onnx.TensorProto.decode(t,t.uint32());break;case 3:if(i.dims&&i.dims.length||(i.dims=[]),(7&o)==2)for(var a=t.uint32()+t.pos;t.pos<a;)i.dims.push(t.int64());else i.dims.push(t.int64());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.values&&t.hasOwnProperty("values")){var e=s.onnx.TensorProto.verify(t.values);if(e)return"values."+e}if(null!=t.indices&&t.hasOwnProperty("indices")){var e=s.onnx.TensorProto.verify(t.indices);if(e)return"indices."+e}if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var r=0;r<t.dims.length;++r)if(!o.isInteger(t.dims[r])&&!(t.dims[r]&&o.isInteger(t.dims[r].low)&&o.isInteger(t.dims[r].high)))return"dims: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof s.onnx.SparseTensorProto)return t;var e=new s.onnx.SparseTensorProto;if(null!=t.values){if("object"!=typeof t.values)throw TypeError(".onnx.SparseTensorProto.values: object expected");e.values=s.onnx.TensorProto.fromObject(t.values)}if(null!=t.indices){if("object"!=typeof t.indices)throw TypeError(".onnx.SparseTensorProto.indices: object expected");e.indices=s.onnx.TensorProto.fromObject(t.indices)}if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");e.dims=[];for(var r=0;r<t.dims.length;++r)o.Long?(e.dims[r]=o.Long.fromValue(t.dims[r])).unsigned=!1:"string"==typeof t.dims[r]?e.dims[r]=parseInt(t.dims[r],10):"number"==typeof t.dims[r]?e.dims[r]=t.dims[r]:"object"==typeof t.dims[r]&&(e.dims[r]=new o.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber())}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.dims=[]),e.defaults&&(r.values=null,r.indices=null),null!=t.values&&t.hasOwnProperty("values")&&(r.values=s.onnx.TensorProto.toObject(t.values,e)),null!=t.indices&&t.hasOwnProperty("indices")&&(r.indices=s.onnx.TensorProto.toObject(t.indices,e)),t.dims&&t.dims.length){r.dims=[];for(var n=0;n<t.dims.length;++n)"number"==typeof t.dims[n]?r.dims[n]=e.longs===String?String(t.dims[n]):t.dims[n]:r.dims[n]=e.longs===String?o.Long.prototype.toString.call(t.dims[n]):e.longs===Number?new o.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber():t.dims[n]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.SparseTensorProto"},t}(),t.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.dim=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.dim&&t.dim.length)for(var r=0;r<t.dim.length;++r)s.onnx.TensorShapeProto.Dimension.encode(t.dim[r],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TensorShapeProto;t.pos<r;){var o=t.uint32();o>>>3==1?(i.dim&&i.dim.length||(i.dim=[]),i.dim.push(s.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var r=s.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(r)return"dim."+r}}return null},t.fromObject=function(t){if(t instanceof s.onnx.TensorShapeProto)return t;var e=new s.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var r=0;r<t.dim.length;++r){if("object"!=typeof t.dim[r])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[r]=s.onnx.TensorShapeProto.Dimension.fromObject(t.dim[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.dim=[]),t.dim&&t.dim.length){r.dim=[];for(var n=0;n<t.dim.length;++n)r.dim[n]=s.onnx.TensorShapeProto.Dimension.toObject(t.dim[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorShapeProto"},t.Dimension=function(){var t;function e(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return e.prototype.dimValue=null,e.prototype.dimParam=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:o.oneOfGetter(t=["dimValue","dimParam"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(t,e){return e||(e=i.create()),null!=t.dimValue&&Object.hasOwnProperty.call(t,"dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&Object.hasOwnProperty.call(t,"dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&Object.hasOwnProperty.call(t,"denotation")&&e.uint32(26).string(t.denotation),e},e.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},e.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TensorShapeProto.Dimension;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.dimValue=t.int64();break;case 2:i.dimParam=t.string();break;case 3:i.denotation=t.string();break;default:t.skipType(7&o)}}return i},e.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},e.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!o.isInteger(t.dimValue)&&!(t.dimValue&&o.isInteger(t.dimValue.low)&&o.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!o.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!o.isString(t.denotation)?"denotation: string expected":null},e.fromObject=function(t){if(t instanceof s.onnx.TensorShapeProto.Dimension)return t;var e=new s.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(o.Long?(e.dimValue=o.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new o.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},e.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?r.dimValue=e.longs===String?String(t.dimValue):t.dimValue:r.dimValue=e.longs===String?o.Long.prototype.toString.call(t.dimValue):e.longs===Number?new o.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(r.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(r.dimParam=t.dimParam,e.oneofs&&(r.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(r.denotation=t.denotation),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TensorShapeProto.Dimension"},e}(),t}(),t.TypeProto=function(){var t;function e(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return e.prototype.tensorType=null,e.prototype.sequenceType=null,e.prototype.mapType=null,e.prototype.optionalType=null,e.prototype.sparseTensorType=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:o.oneOfGetter(t=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(t,e){return e||(e=i.create()),null!=t.tensorType&&Object.hasOwnProperty.call(t,"tensorType")&&s.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.sequenceType&&Object.hasOwnProperty.call(t,"sequenceType")&&s.onnx.TypeProto.Sequence.encode(t.sequenceType,e.uint32(34).fork()).ldelim(),null!=t.mapType&&Object.hasOwnProperty.call(t,"mapType")&&s.onnx.TypeProto.Map.encode(t.mapType,e.uint32(42).fork()).ldelim(),null!=t.denotation&&Object.hasOwnProperty.call(t,"denotation")&&e.uint32(50).string(t.denotation),null!=t.sparseTensorType&&Object.hasOwnProperty.call(t,"sparseTensorType")&&s.onnx.TypeProto.SparseTensor.encode(t.sparseTensorType,e.uint32(66).fork()).ldelim(),null!=t.optionalType&&Object.hasOwnProperty.call(t,"optionalType")&&s.onnx.TypeProto.Optional.encode(t.optionalType,e.uint32(74).fork()).ldelim(),e},e.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},e.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TypeProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.tensorType=s.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 4:i.sequenceType=s.onnx.TypeProto.Sequence.decode(t,t.uint32());break;case 5:i.mapType=s.onnx.TypeProto.Map.decode(t,t.uint32());break;case 9:i.optionalType=s.onnx.TypeProto.Optional.decode(t,t.uint32());break;case 8:i.sparseTensorType=s.onnx.TypeProto.SparseTensor.decode(t,t.uint32());break;case 6:i.denotation=t.string();break;default:t.skipType(7&o)}}return i},e.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},e.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){e.value=1;var r=s.onnx.TypeProto.Tensor.verify(t.tensorType);if(r)return"tensorType."+r}if(null!=t.sequenceType&&t.hasOwnProperty("sequenceType")){if(1===e.value)return"value: multiple values";e.value=1;var r=s.onnx.TypeProto.Sequence.verify(t.sequenceType);if(r)return"sequenceType."+r}if(null!=t.mapType&&t.hasOwnProperty("mapType")){if(1===e.value)return"value: multiple values";e.value=1;var r=s.onnx.TypeProto.Map.verify(t.mapType);if(r)return"mapType."+r}if(null!=t.optionalType&&t.hasOwnProperty("optionalType")){if(1===e.value)return"value: multiple values";e.value=1;var r=s.onnx.TypeProto.Optional.verify(t.optionalType);if(r)return"optionalType."+r}if(null!=t.sparseTensorType&&t.hasOwnProperty("sparseTensorType")){if(1===e.value)return"value: multiple values";e.value=1;var r=s.onnx.TypeProto.SparseTensor.verify(t.sparseTensorType);if(r)return"sparseTensorType."+r}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!o.isString(t.denotation)?"denotation: string expected":null},e.fromObject=function(t){if(t instanceof s.onnx.TypeProto)return t;var e=new s.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=s.onnx.TypeProto.Tensor.fromObject(t.tensorType)}if(null!=t.sequenceType){if("object"!=typeof t.sequenceType)throw TypeError(".onnx.TypeProto.sequenceType: object expected");e.sequenceType=s.onnx.TypeProto.Sequence.fromObject(t.sequenceType)}if(null!=t.mapType){if("object"!=typeof t.mapType)throw TypeError(".onnx.TypeProto.mapType: object expected");e.mapType=s.onnx.TypeProto.Map.fromObject(t.mapType)}if(null!=t.optionalType){if("object"!=typeof t.optionalType)throw TypeError(".onnx.TypeProto.optionalType: object expected");e.optionalType=s.onnx.TypeProto.Optional.fromObject(t.optionalType)}if(null!=t.sparseTensorType){if("object"!=typeof t.sparseTensorType)throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");e.sparseTensorType=s.onnx.TypeProto.SparseTensor.fromObject(t.sparseTensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},e.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(r.tensorType=s.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(r.value="tensorType")),null!=t.sequenceType&&t.hasOwnProperty("sequenceType")&&(r.sequenceType=s.onnx.TypeProto.Sequence.toObject(t.sequenceType,e),e.oneofs&&(r.value="sequenceType")),null!=t.mapType&&t.hasOwnProperty("mapType")&&(r.mapType=s.onnx.TypeProto.Map.toObject(t.mapType,e),e.oneofs&&(r.value="mapType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(r.denotation=t.denotation),null!=t.sparseTensorType&&t.hasOwnProperty("sparseTensorType")&&(r.sparseTensorType=s.onnx.TypeProto.SparseTensor.toObject(t.sparseTensorType,e),e.oneofs&&(r.value="sparseTensorType")),null!=t.optionalType&&t.hasOwnProperty("optionalType")&&(r.optionalType=s.onnx.TypeProto.Optional.toObject(t.optionalType,e),e.oneofs&&(r.value="optionalType")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto"},e.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&Object.hasOwnProperty.call(t,"shape")&&s.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TypeProto.Tensor;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.elemType=t.int32();break;case 2:i.shape=s.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!o.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=s.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto.Tensor)return t;var e=new s.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=s.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.elemType=0,r.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(r.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(r.shape=s.onnx.TensorShapeProto.toObject(t.shape,e)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Tensor"},t}(),e.Sequence=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.elemType=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&s.onnx.TypeProto.encode(t.elemType,e.uint32(10).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TypeProto.Sequence;t.pos<r;){var o=t.uint32();o>>>3==1?i.elemType=s.onnx.TypeProto.decode(t,t.uint32()):t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")){var e=s.onnx.TypeProto.verify(t.elemType);if(e)return"elemType."+e}return null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto.Sequence)return t;var e=new s.onnx.TypeProto.Sequence;if(null!=t.elemType){if("object"!=typeof t.elemType)throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");e.elemType=s.onnx.TypeProto.fromObject(t.elemType)}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.elemType=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(r.elemType=s.onnx.TypeProto.toObject(t.elemType,e)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Sequence"},t}(),e.Map=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.keyType=0,t.prototype.valueType=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.keyType&&Object.hasOwnProperty.call(t,"keyType")&&e.uint32(8).int32(t.keyType),null!=t.valueType&&Object.hasOwnProperty.call(t,"valueType")&&s.onnx.TypeProto.encode(t.valueType,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TypeProto.Map;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.keyType=t.int32();break;case 2:i.valueType=s.onnx.TypeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.keyType&&t.hasOwnProperty("keyType")&&!o.isInteger(t.keyType))return"keyType: integer expected";if(null!=t.valueType&&t.hasOwnProperty("valueType")){var e=s.onnx.TypeProto.verify(t.valueType);if(e)return"valueType."+e}return null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto.Map)return t;var e=new s.onnx.TypeProto.Map;if(null!=t.keyType&&(e.keyType=0|t.keyType),null!=t.valueType){if("object"!=typeof t.valueType)throw TypeError(".onnx.TypeProto.Map.valueType: object expected");e.valueType=s.onnx.TypeProto.fromObject(t.valueType)}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.keyType=0,r.valueType=null),null!=t.keyType&&t.hasOwnProperty("keyType")&&(r.keyType=t.keyType),null!=t.valueType&&t.hasOwnProperty("valueType")&&(r.valueType=s.onnx.TypeProto.toObject(t.valueType,e)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Map"},t}(),e.Optional=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.elemType=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&s.onnx.TypeProto.encode(t.elemType,e.uint32(10).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TypeProto.Optional;t.pos<r;){var o=t.uint32();o>>>3==1?i.elemType=s.onnx.TypeProto.decode(t,t.uint32()):t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")){var e=s.onnx.TypeProto.verify(t.elemType);if(e)return"elemType."+e}return null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto.Optional)return t;var e=new s.onnx.TypeProto.Optional;if(null!=t.elemType){if("object"!=typeof t.elemType)throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");e.elemType=s.onnx.TypeProto.fromObject(t.elemType)}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.elemType=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(r.elemType=s.onnx.TypeProto.toObject(t.elemType,e)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.Optional"},t}(),e.SparseTensor=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.elemType&&Object.hasOwnProperty.call(t,"elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&Object.hasOwnProperty.call(t,"shape")&&s.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.TypeProto.SparseTensor;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.elemType=t.int32();break;case 2:i.shape=s.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!o.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=s.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto.SparseTensor)return t;var e=new s.onnx.TypeProto.SparseTensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");e.shape=s.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.elemType=0,r.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(r.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(r.shape=s.onnx.TensorShapeProto.toObject(t.shape,e)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.TypeProto.SparseTensor"},t}(),e}(),t.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.domain="",t.prototype.version=o.Long?o.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=i.create()),null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(10).string(t.domain),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.OperatorSetIdProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.domain=t.string();break;case 2:i.version=t.int64();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!o.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!o.isInteger(t.version)&&!(t.version&&o.isInteger(t.version.low)&&o.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof s.onnx.OperatorSetIdProto)return t;var e=new s.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(o.Long?(e.version=o.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new o.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var r={};if(e.defaults)if(r.domain="",o.Long){var n=new o.Long(0,0,!1);r.version=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(r.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?r.version=e.longs===String?String(t.version):t.version:r.version=e.longs===String?o.Long.prototype.toString.call(t.version):e.longs===Number?new o.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.OperatorSetIdProto"},t}(),t.OperatorStatus=function(){var t={},e=Object.create(t);return e[t[0]="EXPERIMENTAL"]=0,e[t[1]="STABLE"]=1,e}(),t.FunctionProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.name="",t.prototype.input=o.emptyArray,t.prototype.output=o.emptyArray,t.prototype.attribute=o.emptyArray,t.prototype.attributeProto=o.emptyArray,t.prototype.node=o.emptyArray,t.prototype.docString="",t.prototype.opsetImport=o.emptyArray,t.prototype.domain="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=i.create()),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(10).string(t.name),null!=t.input&&t.input.length)for(var r=0;r<t.input.length;++r)e.uint32(34).string(t.input[r]);if(null!=t.output&&t.output.length)for(var r=0;r<t.output.length;++r)e.uint32(42).string(t.output[r]);if(null!=t.attribute&&t.attribute.length)for(var r=0;r<t.attribute.length;++r)e.uint32(50).string(t.attribute[r]);if(null!=t.node&&t.node.length)for(var r=0;r<t.node.length;++r)s.onnx.NodeProto.encode(t.node[r],e.uint32(58).fork()).ldelim();if(null!=t.docString&&Object.hasOwnProperty.call(t,"docString")&&e.uint32(66).string(t.docString),null!=t.opsetImport&&t.opsetImport.length)for(var r=0;r<t.opsetImport.length;++r)s.onnx.OperatorSetIdProto.encode(t.opsetImport[r],e.uint32(74).fork()).ldelim();if(null!=t.domain&&Object.hasOwnProperty.call(t,"domain")&&e.uint32(82).string(t.domain),null!=t.attributeProto&&t.attributeProto.length)for(var r=0;r<t.attributeProto.length;++r)s.onnx.AttributeProto.encode(t.attributeProto[r],e.uint32(90).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof n||(t=n.create(t));for(var r=void 0===e?t.len:t.pos+e,i=new s.onnx.FunctionProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:i.name=t.string();break;case 4:i.input&&i.input.length||(i.input=[]),i.input.push(t.string());break;case 5:i.output&&i.output.length||(i.output=[]),i.output.push(t.string());break;case 6:i.attribute&&i.attribute.length||(i.attribute=[]),i.attribute.push(t.string());break;case 11:i.attributeProto&&i.attributeProto.length||(i.attributeProto=[]),i.attributeProto.push(s.onnx.AttributeProto.decode(t,t.uint32()));break;case 7:i.node&&i.node.length||(i.node=[]),i.node.push(s.onnx.NodeProto.decode(t,t.uint32()));break;case 8:i.docString=t.string();break;case 9:i.opsetImport&&i.opsetImport.length||(i.opsetImport=[]),i.opsetImport.push(s.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 10:i.domain=t.string();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof n||(t=new n(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!o.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(var e=0;e<t.output.length;++e)if(!o.isString(t.output[e]))return"output: string[] expected"}if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(var e=0;e<t.attribute.length;++e)if(!o.isString(t.attribute[e]))return"attribute: string[] expected"}if(null!=t.attributeProto&&t.hasOwnProperty("attributeProto")){if(!Array.isArray(t.attributeProto))return"attributeProto: array expected";for(var e=0;e<t.attributeProto.length;++e){var r=s.onnx.AttributeProto.verify(t.attributeProto[e]);if(r)return"attributeProto."+r}}if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e){var r=s.onnx.NodeProto.verify(t.node[e]);if(r)return"node."+r}}if(null!=t.docString&&t.hasOwnProperty("docString")&&!o.isString(t.docString))return"docString: string expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e){var r=s.onnx.OperatorSetIdProto.verify(t.opsetImport[e]);if(r)return"opsetImport."+r}}return null!=t.domain&&t.hasOwnProperty("domain")&&!o.isString(t.domain)?"domain: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.FunctionProto)return t;var e=new s.onnx.FunctionProto;if(null!=t.name&&(e.name=String(t.name)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.FunctionProto.input: array expected");e.input=[];for(var r=0;r<t.input.length;++r)e.input[r]=String(t.input[r])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.FunctionProto.output: array expected");e.output=[];for(var r=0;r<t.output.length;++r)e.output[r]=String(t.output[r])}if(t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");e.attribute=[];for(var r=0;r<t.attribute.length;++r)e.attribute[r]=String(t.attribute[r])}if(t.attributeProto){if(!Array.isArray(t.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");e.attributeProto=[];for(var r=0;r<t.attributeProto.length;++r){if("object"!=typeof t.attributeProto[r])throw TypeError(".onnx.FunctionProto.attributeProto: object expected");e.attributeProto[r]=s.onnx.AttributeProto.fromObject(t.attributeProto[r])}}if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.FunctionProto.node: array expected");e.node=[];for(var r=0;r<t.node.length;++r){if("object"!=typeof t.node[r])throw TypeError(".onnx.FunctionProto.node: object expected");e.node[r]=s.onnx.NodeProto.fromObject(t.node[r])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");e.opsetImport=[];for(var r=0;r<t.opsetImport.length;++r){if("object"!=typeof t.opsetImport[r])throw TypeError(".onnx.FunctionProto.opsetImport: object expected");e.opsetImport[r]=s.onnx.OperatorSetIdProto.fromObject(t.opsetImport[r])}}return null!=t.domain&&(e.domain=String(t.domain)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.input=[],r.output=[],r.attribute=[],r.node=[],r.opsetImport=[],r.attributeProto=[]),e.defaults&&(r.name="",r.docString="",r.domain=""),null!=t.name&&t.hasOwnProperty("name")&&(r.name=t.name),t.input&&t.input.length){r.input=[];for(var n=0;n<t.input.length;++n)r.input[n]=t.input[n]}if(t.output&&t.output.length){r.output=[];for(var n=0;n<t.output.length;++n)r.output[n]=t.output[n]}if(t.attribute&&t.attribute.length){r.attribute=[];for(var n=0;n<t.attribute.length;++n)r.attribute[n]=t.attribute[n]}if(t.node&&t.node.length){r.node=[];for(var n=0;n<t.node.length;++n)r.node[n]=s.onnx.NodeProto.toObject(t.node[n],e)}if(null!=t.docString&&t.hasOwnProperty("docString")&&(r.docString=t.docString),t.opsetImport&&t.opsetImport.length){r.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n)r.opsetImport[n]=s.onnx.OperatorSetIdProto.toObject(t.opsetImport[n],e)}if(null!=t.domain&&t.hasOwnProperty("domain")&&(r.domain=t.domain),t.attributeProto&&t.attributeProto.length){r.attributeProto=[];for(var n=0;n<t.attributeProto.length;++n)r.attributeProto[n]=s.onnx.AttributeProto.toObject(t.attributeProto[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/onnx.FunctionProto"},t}(),t}(),e.exports=s}});function assert(t,e){if(!t)throw Error("string"==typeof e?e:e())}function decodeUtf8String(t){return new TextDecoder().decode(t)}var init_util=__esm({"web/lib/onnxjs/util.ts"(){"use strict";init_long(),import_onnx=__toESM(require_onnx()),init_tensor2(),ArrayUtil=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},MatMulUtil=class{static preprocessInputShapes(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]}static postprocessOutputShape(t,e,r){1===e&&t.splice(t.length-2,1),1===r&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},BroadcastUtil=class t{static calcShape(t,e,r=!1){let n=t.length,i=e.length;if(0===n)return e;if(0===i)return t;let o=Math.max(t.length,e.length),s=Array(o);if(r){if(n<2||i<2)return;let r=MatMulUtil.calcMatMulShape([t[n-2],t[n-1]],[e[i-2],e[i-1]]);if(void 0===r)return;[s[o-2],s[o-1]]=r}for(let a=r?3:1;a<=o;a++){let r=n-a<0?1:t[n-a],u=i-a<0?1:e[i-a];if(r!==u&&r>1&&u>1)return;s[o-a]=Math.max(r,u)}return s}static index(e,r){let n=Array(r.length);return t.fillIndex(e,r,n),n}static fillIndex(t,e,r){let n=t.length-e.length;for(let i=0;i<e.length;i++)r[i]=t[n+i]%e[i]}static calc(e,r,n,i,o){let s=t.calcShape(e.dims,r.dims);if(s){if(i&&!ShapeUtil.areEqual(s,e.dims))return;let a=ShapeUtil.size(s),u=i?e:new Tensor4(s,o||e.type);if(0===s.length)u.set([],n(e.get([]),r.get([])));else{let i,o=Array(s.length),l=Array(e.dims.length),c=Array(r.dims.length),d=0,p=0,h=!1,f=!1;0===e.dims.length&&(d=e.get([]),h=!0),0===r.dims.length&&(p=r.get([]),f=!0);for(let b=0;b<a;b++){i=b;for(let t=s.length-1;t>=0;t--)o[t]=i%s[t],i=Math.floor(i/s[t]);h||(t.fillIndex(o,e.dims,l),d=e.get(l)),f||(t.fillIndex(o,r.dims,c),p=r.get(c)),u.set(o,n(d,p))}}return u}}static isValidBroadcast(t,e){let r=t.length,n=e.length;if(r>n)return!1;for(let i=1;i<=r;i++)if(1!==t[r-i]&&t[r-i]!==e[n-i])return!1;return!0}static getBroadcastDims(t,e){let r=t.length,n=[];for(let i=0;i<r;i++){let o=r-1-i,s=t[o]||1;(e[e.length-1-i]||1)>1&&1===s&&n.unshift(o)}return n}},GemmUtil=class{static getShapeOfGemmResult(t,e,r,n,i){let o,s,a;if(2!==t.length||2!==r.length)throw Error("shape need to be of size 2");e?(o=t[1],s=t[0]):(o=t[0],s=t[1]);let u=-1;if(n?(a=r[0],u=1):(a=r[1],u=0),r[u]!==s)throw Error("dimension mismatch");if(o<=0||a<=0||s<=0)throw Error("invalid shape specified");if(i&&!BroadcastUtil.isValidBroadcast(i,[o,a]))throw Error("gemm: invalid bias shape for broadcast");return[o,a,s]}},ProtoUtil=class t{static tensorDataTypeFromProto(t){switch(t){case import_onnx.onnx.TensorProto.DataType.INT8:return"int8";case import_onnx.onnx.TensorProto.DataType.UINT8:return"uint8";case import_onnx.onnx.TensorProto.DataType.BOOL:return"bool";case import_onnx.onnx.TensorProto.DataType.INT16:return"int16";case import_onnx.onnx.TensorProto.DataType.UINT16:return"uint16";case import_onnx.onnx.TensorProto.DataType.INT32:return"int32";case import_onnx.onnx.TensorProto.DataType.UINT32:return"uint32";case import_onnx.onnx.TensorProto.DataType.FLOAT:return"float32";case import_onnx.onnx.TensorProto.DataType.DOUBLE:return"float64";case import_onnx.onnx.TensorProto.DataType.STRING:return"string";case import_onnx.onnx.TensorProto.DataType.INT64:return"int32";case import_onnx.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw Error(`unsupported data type: ${import_onnx.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return import_onnx.onnx.TensorProto.DataType.INT8;case"uint8":return import_onnx.onnx.TensorProto.DataType.UINT8;case"bool":return import_onnx.onnx.TensorProto.DataType.BOOL;case"int16":return import_onnx.onnx.TensorProto.DataType.INT16;case"uint16":return import_onnx.onnx.TensorProto.DataType.UINT16;case"int32":return import_onnx.onnx.TensorProto.DataType.INT32;case"uint32":return import_onnx.onnx.TensorProto.DataType.UINT32;case"float32":return import_onnx.onnx.TensorProto.DataType.FLOAT;case"float64":return import_onnx.onnx.TensorProto.DataType.DOUBLE;case"string":return import_onnx.onnx.TensorProto.DataType.STRING;case"int64":return import_onnx.onnx.TensorProto.DataType.INT64;case"uint64":return import_onnx.onnx.TensorProto.DataType.UINT64;default:throw Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map(t=>long_default.isLong(t)?t.toNumber():t)}static tensorValueTypeFromProto(e){return{tensorType:t.tensorDataTypeFromProto(e.elemType),shape:{dims:t.tensorDimsFromProto(e.shape.dim.map(t=>t.dimValue))}}}static tensorDimsFromORTFormat(t){let e=[];for(let r=0;r<t.dimsLength();r++)e.push(LongUtil.longToNumber(t.dims(r)));return e}static tensorAttributesFromORTFormat(t){let e=[];for(let r=0;r<t.attributesLength();r++)e.push(t.attributes(r));return e}},LongUtil=class{static longToNumber(t){return long_default.isLong(t)?t.toNumber():"bigint"==typeof t?Number(t):t}static isLong(t){return long_default.isLong(t)||"bigint"==typeof t}},ShapeUtil=class t{static size(e){return t.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,r){if(r<0||r>e.length)throw Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return t.getSizeFromDimensionRange(e,r,e.length)}static sizeToDimension(e,r){if(r<0||r>e.length)throw Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${e.length} dimensions.`);return t.getSizeFromDimensionRange(e,0,r)}static getSizeFromDimensionRange(t,e,r){let n=1;for(let i=e;i<r;i++){if(t[i]<=0)throw Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");n*=t[i]}return n}static computeStrides(t){let e=t.length;if(0===e)return[];if(1===e)return[1];let r=Array(e);r[e-1]=1,r[e-2]=t[e-1];for(let n=e-3;n>=0;--n)r[n]=r[n+1]*t[n+1];return r}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,e,r){void 0===r&&(r=t.length);let n=0;for(let i=0;i<r;++i)n+=e[i]*t[i];return n}static offsetToIndices(t,e){let r=e.length;if(0===r)return[];if(1===r)return[t*e[0]];let n=Array(e.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/e[r]),t-=n[r]*e[r];return n[n.length-1]=t,n}static normalizeAxis(t,e){if(t<-e&&t>=e)throw Error("unsupported axis for this operation.");return t<0?t+e:t}static normalizeAxes(t,e){return t.map(t=>this.normalizeAxis(t,e))}static incrementIndex(t,e,r){if(0===e.length||0===t.length)throw Error("Index incrementing unsupported for scalar Tensor");if(void 0===r)r=e.length;else if(r<=0||r>e.length)throw Error("Incorrect axis to increment on");for(let n=r-1;n>=0&&(t[n]++,!(t[n]<e[n]));--n)t[n]=0}static calculateReshapedDims(e,r){if(0===r.length)if(0===e.length||1===t.size(e))return[];else throw Error("cannot reshape to a scalar Tensor");let n=r.length,i=Array(n),o=-1,s=1;for(let t=0;t<n;t++){if(r[t]<-1)throw Error("a dimension in shape hints cannot be less than -1");if(-1===r[t]){if(-1!==o)throw Error("at most one dimension in shape hints can be -1");o=t}else{if(0===r[t]){if(t>=e.length)throw Error("the dimension with value zero exceeds the dimension size of the input tensor");i[t]=e[t]}else i[t]=r[t];s*=i[t]}}let a=t.size(e);if(-1!==o){if(a%s!=0)throw Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${r}]`);i[o]=a/s}else if(s!==a)throw Error("reshapedDims and originalDims don't have matching sizes");return i}static sortBasedOnPerm(t,e){return e?e.map(e=>t[e]):t.slice().reverse()}static padShape(t,e){let r=t.length;return t.map((t,n)=>t+e[n]+e[n+r])}static areEqual(t,e){return t.length===e.length&&t.every((t,r)=>t===e[r])}static validateDimsAndCalcSize(t){if(t.length>6)throw TypeError("Only rank 0 to 6 is supported for tensor shape.");let e=1;for(let r of t){if(!Number.isInteger(r))throw TypeError(`Invalid shape: ${r} is not an integer`);if(r<0||r>0x7fffffff)throw TypeError(`Invalid shape: length ${r} is not allowed`);e*=r}return e}static flattenShape(t,e){e<0&&(e+=t.length);let r=t.reduce((t,e)=>t*e,1),n=t.slice(e).reduce((t,e)=>t*e,1);return[r/n,n]}static squeezeShape(e,r){let n=[];r=t.normalizeAxes(r,e.length);for(let t=0;t<e.length;t++){let i=r.indexOf(t)>=0;if(i&&1!==e[t])throw Error("squeeze an axis of size different than 1");(0===r.length&&e[t]>1||r.length>0&&!i)&&n.push(e[t])}return n}static unsqueezeShape(e,r){let n=Array(e.length+r.length);n.fill(0);for(let e=0;e<r.length;e++){let i=t.normalizeAxis(r[e],n.length);if(i>=n.length)throw Error("'axes' has an out of range axis");if(0!==n[i])throw Error("'axes' has a duplicate axis");n[i]=1}let i=0;for(let t=0;t<n.length;t++)0===n[t]&&(n[t]=e[i++]);if(i!==e.length)throw Error("the unsqueezed dimension could not be established");return n}},SplitUtil=class t{static splitShape(e,r,n,i){if(0===n.length){if(!i)throw Error("need to know number of outputs when the 'split' attribute is not specified");t.determineSplit(e[r],i,n)}let o=[],s=[0];for(let t=0;t<n.length;++t){0!==t&&s.push(s[t-1]+n[t-1]);let i=e.slice();i[r]=n[t],o.push(i)}return[o,s]}static determineSplit(t,e,r){if(t%e!=0)throw Error("cannot split tensor to equal sized parts");for(let n=0;n<e;++n)r.push(t/e)}},PoolConvUtil=class t{static adjustPoolAttributes(t,e,r,n,i,o){if(!t&&r.length!==e.length-2)throw Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let t=0;t<e.length-2;t++)t>=r.length?r.push(e[t+2]):r[t]=e[t+2];for(let t=0;t<r.length;t++)if(t<n.length){if(n[t]<0)throw Error("strides should be greater than or equal to 1")}else n.push(1);for(let t=0;t<r.length;t++)if(t<i.length){if(i[t]<0)throw Error("dilations should be greater than or equal to 1")}else i.push(1);for(let t=0;t<2*r.length;t++)if(t<o.length){if(o[t]<0)throw Error("pad should be greater than or equal to 1")}else o.push(0);for(let t=0;t<r.length;t++){if(r[t]<=0)throw Error("kernel shapes need to be greater than 0");if(o[t]>=r[t]||o[t+r.length]>=r[t])throw Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,r,n,i,o,s){if(s){if(o.length!==2*(e.length-2))throw Error("length of pads should be twice the length of data dimensions");if(r.length!==e.length-2)throw Error("length of strides should be the length of data dimensions");if(i.length!==e.length-2)throw Error("length of kernel shapes should be the length of data dimensions");for(let a=0;a<e.length-2;a++)t.adjustPadAndReturnShape(e[a+2],r[a],n[a],i[a],o,a,a+e.length-2,s)}}static computePoolOutputShape(e,r,n,i,o,s,a){if(r.length<=0)throw Error("input shape must be of size greater than 0");let u=[r[0],r[1]];return t.computeShapeHelper(e,r,u,n,i,o,s,a),u}static computeConvOutputShape(e,r,n,i,o,s,a){if(e.length<=0||r.length<=0)throw Error("invalid input tensor dims or invalid filter tensor dims");let u=[e[0],r[0]];return t.computeShapeHelper(!1,e,u,n,i,o,s,a),u}static computeShapeHelper(e,r,n,i,o,s,a,u){if(e)for(let t=0;t<r.length-2;t++)n.push(1);else for(let e=0;e<r.length-2;e++)n.push(t.adjustPadAndReturnShape(r[e+2],i[e],o[e],s[e],a,e,e+r.length-2,u))}static adjustPadAndReturnShape(t,e,r,n,i,o,s,a){let u=r*(n-1)+1;if(!a||"NOTSET"===a)return Math.floor((t+i[o]+i[s]-u)/e+1);switch(a){case"VALID":return i[o]=0,i[s]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==r)throw Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let r=((t+e-1)/e-1)*e+n-t;return i[o]="SAME_LOWER"===a?Math.floor((r+1)/2):Math.floor(r/2),i[s]=r-i[o],Math.floor((t+r-n)/e+1)}default:throw Error("Unsupported AutoPad type")}}},MIN_CLIP=-34028234663852886e22,MAX_CLIP=34028234663852886e22}});function sizeof(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw Error(`cannot calculate sizeof() on type ${t}`)}}function sizeofProto(t){switch(t){case import_onnx2.onnx.TensorProto.DataType.UINT8:case import_onnx2.onnx.TensorProto.DataType.INT8:case import_onnx2.onnx.TensorProto.DataType.BOOL:return 1;case import_onnx2.onnx.TensorProto.DataType.UINT16:case import_onnx2.onnx.TensorProto.DataType.INT16:return 2;case import_onnx2.onnx.TensorProto.DataType.FLOAT:case import_onnx2.onnx.TensorProto.DataType.INT32:case import_onnx2.onnx.TensorProto.DataType.UINT32:return 4;case import_onnx2.onnx.TensorProto.DataType.INT64:case import_onnx2.onnx.TensorProto.DataType.DOUBLE:case import_onnx2.onnx.TensorProto.DataType.UINT64:return 8;default:throw Error(`cannot calculate sizeof() on type ${import_onnx2.onnx.TensorProto.DataType[t]}`)}}function createView(t,e){return new(dataviewConstructor(e))(t)}function dataviewConstructor(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw Error("unspecified error")}}function longToNumber(t,e){if(e===import_onnx2.onnx.TensorProto.DataType.INT64||e===import_tensor_data_type.TensorDataType.INT64){if(t.greaterThanOrEqual(0x80000000)||t.lessThan(-0x80000000))throw TypeError("int64 is not supported")}else if(e===import_onnx2.onnx.TensorProto.DataType.UINT32||e===import_tensor_data_type.TensorDataType.UINT32||e===import_onnx2.onnx.TensorProto.DataType.UINT64||e===import_tensor_data_type.TensorDataType.UINT64){if(t.greaterThanOrEqual(0x100000000)||t.lessThan(0))throw TypeError("uint64 is not supported")}else throw TypeError(`not a LONG type: ${import_onnx2.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function readProto(t,e,r){switch(e){case import_onnx2.onnx.TensorProto.DataType.BOOL:case import_onnx2.onnx.TensorProto.DataType.UINT8:return t.getUint8(r);case import_onnx2.onnx.TensorProto.DataType.INT8:return t.getInt8(r);case import_onnx2.onnx.TensorProto.DataType.UINT16:return t.getUint16(r,!0);case import_onnx2.onnx.TensorProto.DataType.INT16:return t.getInt16(r,!0);case import_onnx2.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(r,!0);case import_onnx2.onnx.TensorProto.DataType.INT32:return t.getInt32(r,!0);case import_onnx2.onnx.TensorProto.DataType.UINT32:return t.getUint32(r,!0);case import_onnx2.onnx.TensorProto.DataType.INT64:return longToNumber(long_default.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!1),e);case import_onnx2.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(r,!0);case import_onnx2.onnx.TensorProto.DataType.UINT64:return longToNumber(long_default.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!0),e);default:throw Error(`cannot read from DataView for type ${import_onnx2.onnx.TensorProto.DataType[e]}`)}}var init_tensor2=__esm({"web/lib/onnxjs/tensor.ts"(){"use strict";import_guid_typescript=__toESM(require_guid()),init_long(),init_ort_generated(),import_onnx2=__toESM(require_onnx()),init_util(),Tensor4=class t{constructor(t,e,r,n,i,o=import_guid_typescript.Guid.create()){this.dims=t,this.type=e,this.dataProvider=r,this.asyncDataProvider=n,this.cache=i,this.dataId=o,this.size=ShapeUtil.validateDimsAndCalcSize(t);let s=this.size,a=void 0===r&&void 0===n&&void 0===i;if(void 0!==i&&i.length!==s)throw RangeError("Input dims doesn't match data length.");if("string"===e){if(void 0!==i&&(!Array.isArray(i)||!i.every(t=>"string"==typeof t)))throw TypeError("cache should be a string array");a&&(this.cache=Array(s))}else{if(void 0!==i){let t=dataviewConstructor(e);if(!(i instanceof t))throw TypeError(`cache should be type ${t.name}`)}if(a){let t=new ArrayBuffer(s*sizeof(e));this.cache=createView(t,e)}}}get data(){if(void 0===this.cache){let t=this.dataProvider(this.dataId);if(t.length!==this.size)throw Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if("string"!==this.type)throw TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw TypeError("type cannot be non-number (string)")}get(t){return this.data[ShapeUtil.indicesToOffset(t,this.strides)]}set(t,e){this.data[ShapeUtil.indicesToOffset(t,this.strides)]=e}async getData(){return void 0===this.cache&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=ShapeUtil.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw Error("cannot construct Value from an empty tensor");let r=ProtoUtil.tensorDataTypeFromProto(e.dataType),n=new t(ProtoUtil.tensorDimsFromProto(e.dims),r);if("string"===r)e.stringData.forEach((t,e)=>{n.data[e]=decodeUtf8String(t)});else if(e.rawData&&"number"==typeof e.rawData.byteLength&&e.rawData.byteLength>0){let t=n.data,r=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),i=sizeofProto(e.dataType),o=e.rawData.byteLength/i;if(e.rawData.byteLength%i!=0)throw Error("invalid buffer length");if(t.length!==o)throw Error("buffer length mismatch");for(let n=0;n<o;n++){let o=readProto(r,e.dataType,n*i);t[n]=o}}else{let t;switch(e.dataType){case import_onnx2.onnx.TensorProto.DataType.FLOAT:t=e.floatData;break;case import_onnx2.onnx.TensorProto.DataType.INT32:case import_onnx2.onnx.TensorProto.DataType.INT16:case import_onnx2.onnx.TensorProto.DataType.UINT16:case import_onnx2.onnx.TensorProto.DataType.INT8:case import_onnx2.onnx.TensorProto.DataType.UINT8:case import_onnx2.onnx.TensorProto.DataType.BOOL:t=e.int32Data;break;case import_onnx2.onnx.TensorProto.DataType.INT64:t=e.int64Data;break;case import_onnx2.onnx.TensorProto.DataType.DOUBLE:t=e.doubleData;break;case import_onnx2.onnx.TensorProto.DataType.UINT32:case import_onnx2.onnx.TensorProto.DataType.UINT64:t=e.uint64Data;break;default:throw Error("unspecific error")}if(null==t)throw Error("failed to populate data from a tensorproto value");let r=n.data;if(r.length!==t.length)throw Error("array length mismatch");for(let n=0;n<t.length;n++){let i=t[n];long_default.isLong(i)?r[n]=longToNumber(i,e.dataType):r[n]=i}}return n}static fromData(e,r,n){return new t(r,n,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw Error("cannot construct Value from an empty tensor");let r=ProtoUtil.tensorDimsFromORTFormat(e),n=ProtoUtil.tensorDataTypeFromProto(e.dataType()),i=new t(r,n);if("string"===n)for(let t=0;t<e.stringDataLength();t++)i.data[t]=e.stringData(t);else if(e.rawDataArray()&&"number"==typeof e.rawDataLength()&&e.rawDataLength()>0){let t=i.data,r=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),n=sizeofProto(e.dataType()),o=e.rawDataLength()/n;if(e.rawDataLength()%n!=0)throw Error("invalid buffer length");if(t.length!==o)throw Error("buffer length mismatch");for(let i=0;i<o;i++){let o=readProto(r,e.dataType(),i*n);t[i]=o}}return i}}}});function getGlsl(t){return 1===t?GLSL_ES_2_0:GLSL_ES_3_0}function getVertexShaderSource(t){let e=getGlsl(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function getFragShaderPreamble(t){let e=getGlsl(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function getDefaultFragShaderMain(t,e){let r=getGlsl(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${r.output} = result;
  }
  `}var init_glsl_source=__esm({"web/lib/onnxjs/backends/webgl/glsl-source.ts"(){"use strict";GLSL_ES_2_0={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},GLSL_ES_3_0={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}}),init_types=__esm({"web/lib/onnxjs/backends/webgl/types.ts"(){}});async function repeatedTry(t,e=t=>0,r){return new Promise((n,i)=>{let o=0,s=()=>{if(t())return void n();let a=e(++o);null!=r&&o>=r?i():setTimeout(s,a)};s()})}function generateShaderFuncNameFromInputSamplerName(t){return assert(void 0!==t&&0!==t.length,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function generateShaderFuncNameFromInputSamplerNameAtOutCoords(t){return assert(void 0!==t&&0!==t.length,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function squeezeInputShape(t,e){JSON.parse(JSON.stringify(t));return e}function getSqueezedParams(t,e){return e.map(e=>t[e]).join(", ")}function getCoordsDataType(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";else if(6===t)return"ivec6";else throw Error(`GPU for rank ${t} is not yet supported`)}function getGlChannels(t=6){return["x","y","z","w","u","v"].slice(0,t)}var init_utils=__esm({"web/lib/onnxjs/backends/webgl/utils.ts"(){"use strict";init_util()}});function getVecChannels(t,e){return getGlChannels(e).map(e=>`${t}.${e}`)}function getChannels(t,e){return 1===e?[t]:getVecChannels(t,e)}function unpackFromChannel(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var init_packing_utils=__esm({"web/lib/onnxjs/backends/webgl/ops/packing-utils.ts"(){"use strict";init_utils()}});function getOutOfBoundsCondition(t,e,r){if(0===t)return"false";if(1===t)return`rc > ${e[0]}`;let n="";for(let i=t-2;i<t;i++)n+=`${r[i]} >= ${e[i-t+2]}`,i<t-1&&(n+="||");return n}function getOutput(t,e){let r=t.length;if(0===r)return"getA(), 0, 0, 0";if(1===r)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let n="r, c",i="r, cp1",o="rp1, c",s="rp1, cp1",a="";if(r>2)for(let t=0;t<r-2;++t)a+=`${e[t]},`;return`getA(${a}${n}),
          rEdge ? 0. : getA(${a}${o}),
          cEdge ? 0. : getA(${a}${i}),
          rEdge || cEdge ? 0. : getA(${a}${s})`}function getSetup(t,e,r,n){return 0===t||1===t?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${n};
    bool cEdge = cp1 >= ${r};
    `}var init_pack=__esm({"web/lib/onnxjs/backends/webgl/ops/pack.ts"(){"use strict";init_glsl_source(),init_types(),init_utils(),init_packing_utils(),packProgramMetadata={name:"pack",inputNames:["A"],inputTypes:[1]},createPackProgramInfo=(t,e)=>{let r,n=getGlsl(t.session.backend.glContext.version),i=e.dims,o=i.length,s=e.dims.length,a=getCoordsDataType(s),u=getChannels("rc",s),l=getSetup(s,u,i[i.length-2],i[i.length-1]);r=0===o?[1,1]:1===o?[i[0],1]:[i[s-1],i[s-2]];let c=getOutOfBoundsCondition(s,r,u),d=getOutput(i,u),p=`
        void main() {
          ${a} rc = getOutputCoords();

          if(${c}) {
            ${n.output} = vec4(0);
          } else {
            ${l}

            ${n.output} = vec4(${d});
          }
        }
      `;return{...packProgramMetadata,hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:p}},createPackProgramInfoLoader=(t,e)=>({...packProgramMetadata,get:()=>createPackProgramInfo(t,e)})}});function processDims3D(t){if(0===t.length)return[1,1,1];let e=1;for(let r=0;r<t.length-2;++r)e*=t[r];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function isReshapeCheap(t,e){return 0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2])}function getReshapedInputCoords(t){let e=ShapeUtil.computeStrides(t),r=["b","r","c"],n="index",i=e.map((t,i)=>{let o=`int ${r[i]} = ${n} / ${t}`,s=i===e.length-1?`int ${r[i+1]} = ${n} - ${r[i]} * ${t}`:`index -= ${r[i]} * ${t}`;return`${o}; ${s};`}).join("");return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${i}
      return ivec3(b, r, c);
    }
  `}function getFlattenedIndexFrom3D(t){let e=ShapeUtil.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var init_reshape_packed=__esm({"web/lib/onnxjs/backends/webgl/ops/reshape-packed.ts"(){"use strict";init_util(),init_glsl_source(),init_types(),init_packing_utils(),createPackedReshape3DProgramMetadata=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),createPackedReshape3DProgramInfo=(t,e,r,n)=>{let i=e.dims,o=n,s="";for(let t=0;t<4;t++){let e="";switch(t){case 0:e="outputCoords = rc;";break;case 1:e="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:e="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:e="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw Error()}s+=`
        ${e}
        ${t>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${t}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${t>0?"}":""}
      `}let a=getGlsl(t.session.backend.glContext.version),u=`
      ${getReshapedInputCoords(i)}
      ${getFlattenedIndexFrom3D(o)}
      ${unpackFromChannel()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${o[2]};
        int cols = ${o[1]};

        ${s}
        ${a.output} = result;
      }
    `;return{...r,output:{dims:o,type:e.type,textureType:2},shaderSource:u,hasMain:!0}},createPackedReshape3DProgramInfoLoader=(t,e,r)=>{let n=createPackedReshape3DProgramMetadata(r);return{...n,get:()=>createPackedReshape3DProgramInfo(t,e,n,r)}}}}),init_uint8_encode=__esm({"web/lib/onnxjs/backends/webgl/ops/uint8-encode.ts"(){"use strict";init_glsl_source(),init_types(),encodeAsUint8=(t,e)=>{let r=e.shape,n=getGlsl(t.session.backend.glContext.version),i=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${n.texture2D}(X,TexCoords).r;
      ${n.output} = encodeAsUint8(value);
    }`,o={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:e.tensor.type,textureType:3},shaderSource:i,hasMain:!0};return t.executeProgram(o,[e.tensor])}}});function getSourceCoords(t,e){if(1===t)return"rc";let r="";for(let n=0;n<t;n++)r+=e[n],n<t-1&&(r+=",");return r}var init_unpack=__esm({"web/lib/onnxjs/backends/webgl/ops/unpack.ts"(){"use strict";init_glsl_source(),init_types(),init_utils(),init_packing_utils(),unpackProgramMetadata={name:"unpack",inputNames:["A"],inputTypes:[2]},createUnpackProgramInfo=(t,e)=>{let r=e.dims.length,n=getChannels("rc",r),i=n.slice(-2),o=getCoordsDataType(r),s=unpackFromChannel(),a=0===e.dims.length?"":getSourceCoords(r,n),u=r<=1?"rc":`vec2(${i.join(",")})`,l=getGlsl(t.session.backend.glContext.version),c=`
    ${s}
    void main() {
      ${o} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${a});

       ${l.output} = vec4(getChannel(packedInput, ${u}), 0, 0, 0);
     }
   `;return{...unpackProgramMetadata,hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:c}},createUnpackProgramInfoLoader=(t,e)=>({...unpackProgramMetadata,get:()=>createUnpackProgramInfo(t,e)})}}),init_texture_data_encoder=__esm({"web/lib/onnxjs/backends/webgl/texture-data-encoder.ts"(){"use strict";init_instrument(),RedFloat32DataEncoder=class{constructor(t,e=1){if(1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(4===e)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw Error(`Invalid number of channels: ${e}`)}encode(t,e){let r,n;return t.constructor!==Float32Array&&(Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),n=new Float32Array(t)),e*this.channelSize>t.length?(Logger.warning("Encoder","Source data too small. Allocating larger array"),n=t,r=this.allocate(e*this.channelSize),n.forEach((t,e)=>r[e]=t)):r=n=t,r}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter((t,e)=>e%4==0).subarray(0,e):t.subarray(0,e)}},RGBAFloatDataEncoder=class{constructor(t,e=1,r){if(1!==e&&4!==e)throw Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=r||t.FLOAT}encode(t,e){let r=t;return 1===this.channelSize&&(Logger.verbose("Encoder","Exploding into a larger array"),r=this.allocate(e),t.forEach((t,e)=>r[4*e]=t)),r}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter((t,e)=>e%4==0).subarray(0,e):t.subarray(0,e)}},Uint8DataEncoder=class{constructor(t,e=1){if(this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(4===e)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw Error(`Invalid array type: ${t.constructor}`)}}}}),init_texture_layout=__esm({"web/lib/onnxjs/backends/webgl/texture-layout.ts"(){"use strict";init_util(),init_types(),createTextureLayoutFromTextureType=(t,e,r)=>{let n=0===r||1===r?1:4,i=2===r,o=1===r||2===r,s=4===r?e.length-1:void 0,a=4===r?e.map((t,r)=>r===e.length-1?4*t:t):void 0;return createTextureLayoutFromShape(t,e,n,a,{isPacked:i,reverseWH:o,breakAxis:s})},calculateTextureWidthAndHeight=(t,e,r)=>{let n=createTextureLayoutFromTextureType(t,e,r);return[n.width,n.height]},createTextureLayoutFromShape=(t,e,r=1,n,i)=>{let o=!!(i&&i.isPacked),[s,a]=t.computeTextureWH(o&&n||e,i),u=e.length,l=e.slice(0);if(0===u&&(l=[1]),1===r)n=e;else if(o){if(4!==r)throw Error("a packed texture must be 4-channel");n=e,u>0&&(l[u-1]=Math.ceil(l[u-1]/2)),u>1&&(l[u-2]=Math.ceil(l[u-2]/2))}else if(!n)throw Error("Unpacked shape is needed when using channels > 1");return{width:s,height:a,channels:r,isPacked:o,shape:l,strides:ShapeUtil.computeStrides(l),unpackedShape:n,reversedWH:i&&i.reverseWH}}}}),init_inference_handler=__esm({"web/lib/onnxjs/backends/webgl/inference-handler.ts"(){"use strict";init_instrument(),init_tensor2(),init_util(),init_pack(),init_reshape_packed(),init_uint8_encode(),init_unpack(),init_texture_data_encoder(),init_texture_layout(),init_types(),getProgramInfoUniqueKey=(t,e)=>{let r=e.map(t=>`${t.unpackedShape.join(",")};${t.width}x${t.height}`).join("_"),n=t.name;return t.cacheHint&&(n+="["+t.cacheHint+"]"),n+=":"+r},WebGLInferenceHandler=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return calculateTextureWidthAndHeight(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw Error("input names size does not match input types");let r=[];for(let n=0;n<t.inputNames.length;++n)r[n]=this.getOrCreateTextureData(e[n],t.inputTypes[n]);let n=getProgramInfoUniqueKey(t,r),i=this.session.programManager.getArtifact(n),o=i?i.programInfo:"function"==typeof t.get?t.get():t,s=createTextureLayoutFromTextureType(this.session.layoutStrategy,o.output.dims,o.output.textureType),a=this.createTextureData(s,o.output.type);return i||(i=this.session.programManager.build(o,r,a),this.session.programManager.setArtifact(n,i)),this.runProgram(i,r,a),a}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,r){for(let r=0;r<e.length;++r)if(!!e[r].isPacked!=(2===t.programInfo.inputTypes[r]))throw Error(`input[${r}] property packed inconsistent`);if(!!r.isPacked!=(2===t.programInfo.output.textureType))throw Error("output property packed inconsistent");this.session.programManager.run(t,e,r)}getOrCreateTextureData(t,e){let r=this.getTextureData(t.dataId,2===e);if(!r&&(r=this.getTextureData(t.dataId,2!==e)))if(2===e)return this.pack(r);else return this.unpack(r);if(!r){let n=createTextureLayoutFromTextureType(this.session.layoutStrategy,t.dims,e);if(4===e){let r=1,n=4,i=t.dims;if(4===i.length){let o=[i[0],Math.ceil(i[1]*i[2]*i[3]/n)],s=createTextureLayoutFromTextureType(this.session.layoutStrategy,o,e),a=t.numberData;if(i[1]*i[2]*i[3]%n!=0){let e=i[0],o=i[1]*i[2]*i[3],s=Math.ceil(o*r/n)*n;a=new Float32Array(e*s);for(let n=0;n<e;++n){let e=n*o,i=n*s+n%r*o;a.set(t.numberData.subarray(e,e+o),i)}}return this.createTextureData(s,t.type,a,t,1)}}if(2===e){let e=createTextureLayoutFromShape(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),n=this.createTextureData(e,t.type,t.numberData,t,1);r=this.pack(n)}else r=this.createTextureData(n,t.type,t.numberData,t,1)}return r}createTextureDataFromLayoutBindTensor(t,e,r,n){return this.createTextureData(t,e,r,n,1)}createTextureData(t,e,r,n,i){Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let o=this.session.textureManager.createTextureFromLayout(e,t,r,i);return this.createTextureDataFromTexture(t,e,o,n)}reshapeUnpacked(t,e){let r=this.getOrCreateTextureData(t,0),n={channels:r.channels,height:r.height,width:r.width,shape:0!==e.length?e:[1],strides:ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(n,t.type,r.texture).tensor}reshapePacked(t,e){let r=this.getOrCreateTextureData(t,2);if(isReshapeCheap(t.dims,e)){let n={channels:r.channels,height:r.height,width:r.width,shape:0!==e.length?e:[1],strides:ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(n,t.type,r.texture).tensor}let n=processDims3D(t.dims),i=processDims3D(e),o=this.reshapePacked(t,n),s=this.run(createPackedReshape3DProgramInfoLoader(this,o,i),[o]);return this.reshapePacked(s,e)}cast(t,e){let r=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(r,e,r.texture).tensor}createTextureDataFromTexture(t,e,r,n,i){let o={...t,tensor:n||new Tensor4(t.unpackedShape,e,t=>this.readTexture(o),async t=>this.readTextureAsync(o),void 0,i),texture:r};return this.setTextureData(o.tensor.dataId,o,t.isPacked),o}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(encodeAsUint8(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(encodeAsUint8(this,t))}pack(t){return this.executeProgram(createPackProgramInfoLoader(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(createUnpackProgramInfoLoader(this,t.tensor),[t.tensor])}}}}),init_attribute_with_cache_key=__esm({"web/lib/onnxjs/attribute-with-cache-key.ts"(){"use strict";AttributeWithCacheKeyImpl=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},createAttributeWithCacheKey=t=>new AttributeWithCacheKeyImpl(t)}}),init_batch_normalization=__esm({"web/lib/onnxjs/backends/webgl/ops/batch-normalization.ts"(){"use strict";init_attribute_with_cache_key(),init_glsl_source(),init_types(),batchNormalizationProgramMetadata={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},batchNormalization=(t,e,r)=>(validateInputs(e),[t.run({...batchNormalizationProgramMetadata,cacheHint:r.cacheKey,get:()=>createBatchNormalizationProgramInfo(t,e,r)},e)]),parseBatchNormalizationAttributes=t=>{let e=t.attributes.getFloat("epsilon",1e-5),r=t.attributes.getFloat("momentum",.9),n=t.attributes.getInt("spatial",1);return createAttributeWithCacheKey({epsilon:e,momentum:r,spatial:n})},createBatchNormalizationProgramInfo=(t,e,r)=>{let n=getGlsl(t.session.backend.glContext.version),i=e[0].dims.length,[o,s]=t.calculateTextureWidthAndHeight(e[1].dims,0),a=`
  float process(int[${i}] indices) {
    vec2 position = offsetToCoords(indices[1], ${o}, ${s});
    float scale = getColorAsFloat(${n.texture2D}(Scale, position));
    float mean = getColorAsFloat(${n.texture2D}(Mean, position));
    float variance = getColorAsFloat(${n.texture2D}(Variance, position));
    float b = getColorAsFloat(${n.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;
  }`;return{...batchNormalizationProgramMetadata,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:a}},validateInputs=t=>{if(!t||5!==t.length)throw Error("BatchNormalization requires 5 inputs.");let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4];if(e.dims.length<3||1!==r.dims.length||1!==n.dims.length||1!==i.dims.length||1!==o.dims.length||r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1])throw Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==o.type&&"float64"!==o.type)throw Error("invalid input tensor types.")}}}),init_glsl_definitions=__esm({"web/lib/onnxjs/backends/webgl/glsl-definitions.ts"(){"use strict";GlslContext=class{constructor(t,e,r,n){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=r,this.outputTextureLayout=n}},GlslLib=class{constructor(t){this.context=t}},GlslLibRoutine=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},GlslLibRoutineNode=class{constructor(t,e,r){this.name=t,r?this.dependencies=r:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},TopologicalSortGlslRoutines=class{static returnOrderedNodes(t){if(!t||0===t.length)return[];if(1===t.length)return t;let e=new Set,r=new Set,n=[];return this.createOrderedNodes(t,e,r,n),n}static createOrderedNodes(t,e,r,n){for(let i=0;i<t.length;++i)this.dfsTraverse(t[i],e,r,n)}static dfsTraverse(t,e,r,n){if(!t||r.has(t.name))return;if(e.has(t.name))throw Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let i=t.dependencies;if(i&&i.length>0)for(let t=0;t<i.length;++t)this.dfsTraverse(i[t],e,r,n);n.push(t),r.add(t.name),e.delete(t.name)}}}});function glslAdd(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function glslDiv(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function glslMul(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function glslSub(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function glslEqual(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function glslGreater(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function glslLess(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function glslAnd(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function glslOr(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function glslXor(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function glslPow(){return glslBuiltinBinary("pow")}function glslPRelu(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function glslBuiltinBinary(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var init_binary_op=__esm({"web/lib/onnxjs/backends/webgl/ops/binary-op.ts"(){"use strict";init_util(),init_glsl_definitions(),init_glsl_source(),init_types(),createBinaryProgramInfoLoader=(t,e,r,n=e[0].type,i)=>{let o=2*!!t.session.pack;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],cacheHint:i,get:()=>createBinaryProgramInfo(t,e,r,n)}},createBinaryProgramInfo=(t,e,r,n=e[0].type)=>{let i=2*!!t.session.pack,o=!ShapeUtil.areEqual(e[0].dims,e[1].dims),s=e[0].dims,a=t.session.pack;if(o){let o=BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!o)throw Error("Can't perform binary op on the given tensors");let u=(s=o).length,l=0!==e[0].dims.length?e[0].dims.length:1,c=0!==e[1].dims.length?e[1].dims.length:1,d=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",p=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",h=getGlsl(t.session.backend.glContext.version),f=a?`
      ${r.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${r.name}(a, b);
        ${h.output} = result;
      }`:`
      ${r.body}
      float process(int indices[${u}]) {
        int aindices[${l}];
        int bindices[${c}];
        ${d}
        ${p}
        return ${r.name}(_A(aindices), _B(bindices));
      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:s,type:n,textureType:i},shaderSource:f,hasMain:a}}let u=getGlsl(t.session.backend.glContext.version),l=`
    ${r.body}
    void main() {
      vec4 v1 = ${u.texture2D}(A, TexCoords);
      vec4 v2 = ${u.texture2D}(B, TexCoords);
      vec4 result = ${r.name}(v1, v2);
      ${u.output} = result;
    }
    `;return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:e[0].dims,type:n,textureType:i},shaderSource:l,hasMain:!0}},add2=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslAdd()),e)],and2=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslAnd(),"bool"),e)],div=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslDiv()),e)],equal=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslEqual(),"bool"),e)],greater=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslGreater(),"bool"),e)],less=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslLess(),"bool"),e)],mul=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslMul()),e)],or2=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslOr(),"bool"),e)],pow=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslPow()),e)],pRelu=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslPRelu()),e)],sub=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslSub()),e)],xor2=(t,e)=>[t.run(createBinaryProgramInfoLoader(t,e,glslXor(),"bool"),e)]}}),init_cast=__esm({"web/lib/onnxjs/backends/webgl/ops/cast.ts"(){"use strict";init_util(),cast=(t,e,r)=>(validateInputs2(e),[t.cast(e[0],r)]),parseCastAttributes=t=>ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to")),validateInputs2=t=>{if(!t||1!==t.length)throw Error("Cast requires 1 input.");if("string"===t[0].type)throw Error("Invalid input type.")}}}),init_concat_packed=__esm({"web/lib/onnxjs/backends/webgl/ops/concat-packed.ts"(){"use strict";init_glsl_source(),init_types(),init_utils(),init_packing_utils(),createPackedConcatProgramMetadata=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(t,e)=>`X${e}`),inputTypes:Array(t).fill(2),cacheHint:e}),createPackedConcatProgramInfo=(t,e,r,n)=>{let i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);let o=i.slice(0);for(let t=1;t<r.length;t++){let e=r[t].dims.slice();for(let t=0;t<i.length;t++)if(t===n)o[n]+=e[t];else if(i[t]!==e[t])throw Error("non concat dimensions must match")}let s=o.length,a=getChannels("coords",s),u=getCoordsDataType(s),l=unpackFromChannel(),c=r.map(t=>t.dims),d=getGlChannels(s),p=Array(c.length-1);p[0]=c[0][n];for(let t=1;t<p.length;t++)p[t]=p[t-1]+c[t][n];let h=d[n],f=d.slice(-2),b=d.join(),g=`if (${h} < ${p[0]}) {
        return getChannel(
            getX0(${b}), vec2(${f.join()}));
        }`;for(let t=1;t<p.length;t++){let e=p[t-1];g+=`
            if (${h} < ${p[t]}  && ${h} >= ${p[t-1]}) {
              return getChannel(
                getX${t}(${getShiftedChannelsSnippet(d,h,e)}),
                vec2(${getShiftedChannelsSnippet(f,h,e)}));
            }`}let m=p.length,y=p[p.length-1];g+=`
            return getChannel(
              getX${m}(${getShiftedChannelsSnippet(d,h,y)}),
              vec2(${getShiftedChannelsSnippet(f,h,y)}));`;let _=getGlsl(t.session.backend.glContext.version),x=`
          ${l}
          float getValue(${d.map(t=>"int "+t)}) {
            ${g}
          }

          void main() {
            ${u} coords = getOutputCoords();
            int lastDim = coords.${d[s-1]};
            coords.${d[s-1]} = coords.${d[s-2]};
            coords.${d[s-2]} = lastDim;

            vec4 result = vec4(getValue(${a}), 0., 0., 0.);

            ${a[s-1]} = ${a[s-1]} + 1;
            if (${a[s-1]} < ${o[s-1]}) {
              result.g = getValue(${a});
            }

            ${a[s-2]} = ${a[s-2]} + 1;
            if (${a[s-2]} < ${o[s-2]}) {
              result.a = getValue(${a});
            }

            ${a[s-1]} = ${a[s-1]} - 1;
            if (${a[s-2]} < ${o[s-2]} &&
                ${a[s-1]} < ${o[s-1]}) {
              result.b = getValue(${a});
            }
            ${_.output} = result;
          }
        `;return{...e,output:{dims:o,type:r[0].type,textureType:2},shaderSource:x,hasMain:!0}},createPackedConcatProgramInfoLoader=(t,e,r)=>{let n=createPackedConcatProgramMetadata(e.length,r.cacheKey);return{...n,get:()=>createPackedConcatProgramInfo(t,n,e,r.axis)}},getShiftedChannelsSnippet=(t,e,r)=>{let n=t.indexOf(e);return t.map((t,e)=>e===n?`${t} - ${r}`:t).join()}}}),init_concat=__esm({"web/lib/onnxjs/backends/webgl/ops/concat.ts"(){"use strict";init_attribute_with_cache_key(),init_types(),init_concat_packed(),concat=(t,e,r)=>(validateInputs3(e),t.session.pack&&e[0].dims.length>1)?[t.run(createPackedConcatProgramInfoLoader(t,e,r),e)]:[t.run(createUnpackedConcatProgramInfoLoader(t,e,r),e)],createUnpackedConcatProgramMetadata=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(t,e)=>`X${e}`),inputTypes:Array(t).fill(0),cacheHint:e}),createUnpackedConcatProgramInfo=(t,e,r,n)=>{let i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);let o=i.slice(0);for(let t=1;t<r.length;t++){let e=r[t].dims.slice();for(let t=0;t<i.length;t++)if(t===n)o[n]+=e[t];else if(i[t]!==e[t])throw Error("non concat dimensions must match")}let s=o.length,a=Array(r.length),u=0;for(let t=0;t<a.length;++t)u+=r[t].dims[n],a[t]=u;let l="";l=r.length<5?getTextureIndexWhereDataResidesLinearSearch(a):getTextureIndexWhereDataResidesBinarySearch(a);let c=getFetchDataFromCorrectTextureMethod(r.length,s),d=getGetSizeInConcatAxisValueFromIndexMethod(a),p=`
        ${c}
        ${d}
        ${l}
        float process(int indices[${s}]) {
          int textureIndex = getTextureWhereDataResides (indices[${n}]);

          if(textureIndex != 0) {
            indices[${n}] = indices[${n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...e,output:{dims:o,type:r[0].type,textureType:0},shaderSource:p}},createUnpackedConcatProgramInfoLoader=(t,e,r)=>{let n=createUnpackedConcatProgramMetadata(e.length,r.cacheKey);return{...n,get:()=>createUnpackedConcatProgramInfo(t,n,e,r.axis)}},getTextureIndexWhereDataResidesLinearSearch=t=>{let e=t.map((t,e)=>`if(index<${t}) {return ${e};}
`);return`int getTextureWhereDataResides(int index) {
      ${e.join("")}
    }`},getTextureIndexWhereDataResidesBinarySearch=t=>getTextureIndexWhereDataResidesLinearSearch(t),getFetchDataFromCorrectTextureMethod=(t,e)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let e=0;e<t;++e)0===e?r.push(`	if (textureIndex == ${e}) { return _X${e}(indices); }`):e===t-1?r.push(`	else { return _X${e}(indices); }`):r.push(`	else if (textureIndex == ${e}) { return _X${e}(indices); }`);return r.push("	}"),r.join("\n")},getGetSizeInConcatAxisValueFromIndexMethod=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<t.length;++r)0===r?e.push(`	if (index == ${r}) { return ${t[r]}; }`):r===t.length-1?e.push(`	else { return ${t[r]}; }`):e.push(`	else if (index == ${r}) { return ${t[r]}; }`);return e.push("	}"),e.join("\n")},parseConcatAttributes=t=>createAttributeWithCacheKey({axis:t.attributes.getInt("axis")}),validateInputs3=t=>{if(!t||t.length<1)throw Error("too few inputs");let e=t[0].type,r=t[0].dims.length;if("string"===e)throw Error("string tensor is not supported yet");for(let n of t){if(n.type!==e)throw Error("input tensors should be one type");if(n.dims.length!==r)throw Error("input tensors should have the same shape")}}}});function glslAbs(){return glslBuiltinUnary("abs")}function glslAcos(){return glslBuiltinUnary("acos")}function glslAsin(){return glslBuiltinUnary("asin")}function glslAtan(){return glslBuiltinUnary("atan")}function glslCeil(){return glslBuiltinUnary("ceil")}function glslCos(){return glslBuiltinUnary("cos")}function glslElu(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function glslExp(){return glslBuiltinUnary("exp")}function glslFloor(){return glslBuiltinUnary("floor")}function glslClip(t,e){let r="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${r}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${r}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:r,type:0}}function glslIdentity(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function glslLeakyRelu(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function glslLog(){return glslBuiltinUnary("log")}function glslNeg(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function glslNot(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function glslSin(){return glslBuiltinUnary("sin")}function glslRelu(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function glslSigmoid(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function glslSqrt(){return glslBuiltinUnary("sqrt")}function glslTan(){return glslBuiltinUnary("tan")}function glslTanh(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function glslBuiltinUnary(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var init_unary_op=__esm({"web/lib/onnxjs/backends/webgl/ops/unary-op.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_glsl_definitions(),init_glsl_source(),init_types(),createElementwiseProgramInfo=(t,e,r,n)=>{let i=2*!!t.session.pack,o=getGlsl(t.session.backend.glContext.version);return{...e,output:{dims:r.dims,type:r.type,textureType:i},shaderSource:`
     ${n.body}
     void main() {
       vec4 v = ${o.texture2D}(A, TexCoords);
       v = ${n.name}_(v);
       ${o.output} = v;
     }
     `,hasMain:!0}},createElementwiseProgramInfoLoader=(t,e,r,n)=>{let i=2*!!t.session.pack,o={name:r.name,inputTypes:[i],inputNames:["A"],cacheHint:n};return{...o,get:()=>createElementwiseProgramInfo(t,o,e,r)}},abs=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslAbs()),e)],acos=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslAcos()),e)],asin=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslAsin()),e)],atan=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslAtan()),e)],clip=(t,e,r)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslClip(r.min,r.max),r.cacheKey),e)],parseClipAttributes=t=>createAttributeWithCacheKey({min:t.attributes.getFloat("min",MIN_CLIP),max:t.attributes.getFloat("max",MAX_CLIP)}),clipV11=(t,e)=>{let r=generateClipAttributesFromInputs(t,e);return clip(t,[e[0]],r)},generateClipAttributesFromInputs=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw Error("dynamic clip attributes are not allowed");let r=e.length>=3?e[1].numberData[0]:MIN_CLIP,n=e.length>=3?e[2].numberData[0]:MAX_CLIP;return createAttributeWithCacheKey({min:r,max:n})},ceil=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslCeil()),e)],cos=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslCos()),e)],elu=(t,e,r)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslElu(r.alpha),r.cacheKey),e)],parseEluAttributes=t=>createAttributeWithCacheKey({alpha:t.attributes.getFloat("alpha",1)}),exp=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslExp()),e)],floor=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslFloor()),e)],identity=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslIdentity()),e)],leakyRelu=(t,e,r)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslLeakyRelu(r.alpha),r.cacheKey),e)],parseLeakyReluAttributes=t=>createAttributeWithCacheKey({alpha:t.attributes.getFloat("alpha",.01)}),log2=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslLog()),e)],neg=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslNeg()),e)],not2=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslNot()),e)],relu=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslRelu()),e)],sigmoid=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslSigmoid()),e)],sin=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslSin()),e)],sqrt=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslSqrt()),e)],tan=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslTan()),e)],tanh=(t,e)=>[t.run(createElementwiseProgramInfoLoader(t,e[0],glslTanh()),e)]}});function getActivationSnippet(t){let e;switch(t.activation){case"Relu":e=glslRelu();break;case"Sigmoid":e=glslSigmoid();break;case"Clip":e=glslClip(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=e.name;return{activationFunction:e.body,applyActivation:`value = ${r}_(value);`}}var init_fuse_utils=__esm({"web/lib/onnxjs/backends/webgl/ops/fuse-utils.ts"(){"use strict";init_util(),init_unary_op(),parseInternalActivationAttributes=t=>{let e=t.getString("activation","");if("Clip"===e){let[r,n]=t.getFloats("activation_params",[MIN_CLIP,MAX_CLIP]);return{activation:e,clipMax:n,clipMin:r,activationCacheKey:`${e}:${r},${n}`}}return{activation:e,activationCacheKey:e}}}}),init_conv_grouped=__esm({"web/lib/onnxjs/backends/webgl/ops/conv-grouped.ts"(){"use strict";init_instrument(),init_glsl_source(),init_types(),init_conv(),init_fuse_utils(),createUnpackedGroupedConvProgramMetadata=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),createUnpackedGroupedConvProgramInfo=(t,e,r,n)=>{let i=e.length>2?"value += getBias(output_channel);":"",o=e[0].dims.slice(),s=e[1].dims.slice(),a=s[0]/n.group;Logger.verbose("GroupedConv",`autpPad:${n.autoPad}, dilations:${n.dilations}, group:${n.group}, kernelShape:${n.kernelShape}, pads:${n.pads}, strides:${n.strides}`);let u=calculateOutputShape(o,s,n.dilations,n.pads,n.strides),l=getGlsl(t.session.backend.glContext.version),{activationFunction:c,applyActivation:d}=getActivationSnippet(n),p=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${c}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${a};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${s[1]}; wInChannel++) {
      int input_channel = group_id * ${s[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${s[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${n.dilations[0]};

        if (xHeight < 0 || xHeight >= ${o[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${s[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${n.dilations[1]};
          if (xWidth < 0 || xWidth >= ${o[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${i}
    ${d}
    ${l.output} = vec4(value, .0, .0, .0);
  }
`;return{...r,output:{dims:u,type:e[0].type,textureType:0},shaderSource:p,hasMain:!0}},createUnpackedGroupedConvProgramInfoLoader=(t,e,r)=>{let n=createUnpackedGroupedConvProgramMetadata(e.length>2,r.cacheKey);return{...n,get:()=>createUnpackedGroupedConvProgramInfo(t,e,n,r)}}}}),init_im2col_pack=__esm({"web/lib/onnxjs/backends/webgl/ops/im2col-pack.ts"(){"use strict";init_glsl_source(),init_types(),init_packing_utils(),createPackedIm2ColProgramMetadata=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),createPackedIm2ColProgramInfo=(t,e,r,n,i,o)=>{let s=r.dims,a=n.dims,u=2,l=3,c=i.length,d=[a[1]*a[2]*a[3],i[2]*i[3]],p=a[2]*a[3],h=unpackFromChannel(),f=getGlsl(t.session.backend.glContext.version),b="";for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)b+=`
            blockIndex = rc.x + ${e};
            pos = rc.y + ${t};

            if(blockIndex < ${d[1]} && pos < ${d[0]}) {
              offsetY = int(blockIndex / (${i[c-1]})) * ${o.strides[0]} -
                ${o.pads[0]};
              d0 = offsetY + ${o.dilations[0]} * (imod(pos, ${p}) / ${a[2]});

              if(d0 < ${s[u]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${i[c-1]}) * ${o.strides[1]} -
                  ${o.pads[1]};
                d1 = offsetX + ${o.dilations[1]} * imod(imod(pos, ${p}), ${a[2]});

                if(d1 < ${s[l]} && d1 >= 0) {

                  ch = int(float(pos)/ ${p}.);
                    innerDims = vec2(d0, d1);
                    result[${2*t+e}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let g=`
      ${h}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${b}
          ${f.output} = result;
      }
            `;return{...e,output:{dims:d,type:r.type,textureType:2},shaderSource:g,hasMain:!0}},createPackedIm2ColProgramInfoLoader=(t,e,r,n,i)=>{let o=createPackedIm2ColProgramMetadata(i.cacheKey);return{...o,get:()=>createPackedIm2ColProgramInfo(t,o,e,r,n,i)}}}});function createMatmulProgramInfo(t,e,r){let n=e[0].dims,i=e[1].dims,o=BroadcastUtil.calcShape(n,i,!0);if(!o)throw Error("Can't use matmul on the given tensors");let s=getCoordsDataType(o.length),a=getGlChannels(),{activationFunction:u,applyActivation:l}=getActivationSnippet(r),c=e.length>2,d=c?"value += getBiasForMatmul();":"",p=c?`${getBiasForMatmul(s,a,e[2].dims,o,!1)}`:"",h=o.length,f=n.length,b=i.length,g=n[n.length-1],m=`
    ${u}
    ${p}
    float process(int indices[${h}]) {
        int a[${f}];
        int b[${b}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${g}; ++k) {
            a[${f-1}] = k;
            b[${b-2}] = k;
            value += _A(a) * _B(b);
        }
        ${d}
        ${l}
        return value;
    }`;return{...t,output:{dims:o,type:e[0].type,textureType:0},shaderSource:m}}function createMatmulProgramInfoLoader(t,e){let r=createMatmulProgramMetadata(t.length>2,e.activationCacheKey);return{...r,get:()=>createMatmulProgramInfo(r,t,e)}}function getBiasForMatmul(t,e,r,n,i){let o="",s=r.length,a=n.length,u=a-s;o=a<2&&s>0?"coords":r.map((t,r)=>`coords.${e[r+u]}`).join(", ");let l=BroadcastUtil.getBroadcastDims(r,n).map(t=>`coords.${e[t+u]} = 0;`).join("\n"),c=1===ShapeUtil.size(r),d="vec4(outputValue.xx, outputValue.yy)";return c&&(d="vec4(outputValue.x)"),i?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${l}
  vec4 outputValue = getBias(${o});
  return ${d};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${l}
  return getBias(coords.x);
}`}var init_matmul=__esm({"web/lib/onnxjs/backends/webgl/ops/matmul.ts"(){"use strict";init_util(),init_types(),init_utils(),init_fuse_utils(),init_matmul_pack(),matMul=(t,e,r)=>(validateInputs4(e),t.session.pack)?[t.run(createPackedMatmulProgramInfoLoader(t,e,r),e)]:[t.run(createMatmulProgramInfoLoader(e,r),e)],parseMatMulAttributes=t=>parseInternalActivationAttributes(t.attributes),createMatmulProgramMetadata=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),validateInputs4=t=>{if(!t||2!==t.length)throw Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw Error("inputs should be float type");if(t[0].type!==t[1].type)throw Error("inputs types should match")}}});function getBcastSamplerForMatmul(t,e,r,n){let i=[],o=[],s=r[0].dims,a=r[1].dims,u=s.length,l=a.length,c=n.length,d=c-u,p=c-l;(i=s.map((t,r)=>`coords.${e[r+d]}`))[u-1]="i*2",i.join(", "),(o=a.map((t,r)=>`coords.${e[r+p]}`))[l-2]="i*2",o.join(", ");let h=BroadcastUtil.getBroadcastDims(s,n),f=BroadcastUtil.getBroadcastDims(a,n),b=h.map(t=>`coords.${e[t+d]} = 0;`).join("\n"),g=f.map(t=>`coords.${e[t+p]} = 0;`).join("\n"),m=`int lastDim = coords.${e[c-1]};
  coords.${e[c-1]} = coords.${e[c-2]};
  coords.${e[c-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${m}
  ${b}
  vec4 outputValue = getA(${i});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${m}
  ${g}
  vec4 outputValue = getB(${o});
  return outputValue;
}`}function getA(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+`rc.${t[e-2]}, i*2`}function getB(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+`i*2, rc.${t[e-1]}`}var init_matmul_pack=__esm({"web/lib/onnxjs/backends/webgl/ops/matmul-pack.ts"(){"use strict";init_util(),init_glsl_source(),init_types(),init_utils(),init_fuse_utils(),init_matmul(),createPackedMatmulProgramMetadata=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),createPackedMatmulProgramInfo=(t,e,r,n)=>{let i=r.length>2,o=i?"value += getBiasForMatmul();":"",s=r[0].dims,a=r[1].dims,u=BroadcastUtil.calcShape(s,a,!0),l=!ShapeUtil.areEqual(r[0].dims,r[1].dims);if(!u)throw Error("Can't use matmul on the given tensors");let c=Math.ceil(s[s.length-1]/2),d=s.length,p=a.length,h=getGlsl(t.session.backend.glContext.version),f=getCoordsDataType(u.length),b=u.length,g=getGlChannels(),{activationFunction:m,applyActivation:y}=getActivationSnippet(n),_=i?`${getBiasForMatmul(f,g,r[2].dims,u,!0)}`:"",x=l?`${getBcastSamplerForMatmul(f,g,r,u)}`:"",v=l?"getAAtOutCoordsMatmul(i)":`getA(${getA(g,d)})`,T=l?"getBAtOutCoordsMatmul(i)":`getB(${getB(g,p)})`,w=l?"":`${f} rc =
          getOutputCoords(); int lastDim = rc.${g[b-1]}; rc.${g[b-1]} =
          rc.${g[b-2]}; rc.${g[b-2]} = lastDim;
      `,O=`
            ${x}
            ${_}
            ${m}
            void main() {
              ${w}

              vec4 value = vec4(0);
              for (int i = 0; i < ${c}; i++) {
                vec4 a = ${v};
                vec4 b = ${T};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${o}
              ${y}
              ${h.output} = value;
            }`;return{...e,output:{dims:u,type:r[0].type,textureType:2},shaderSource:O,hasMain:!0}},createPackedMatmulProgramInfoLoader=(t,e,r)=>{let n=createPackedMatmulProgramMetadata(e.length>2,r.activationCacheKey);return{...n,get:()=>createPackedMatmulProgramInfo(t,n,e,r)}}}}),init_conv_pack=__esm({"web/lib/onnxjs/backends/webgl/ops/conv-pack.ts"(){"use strict";init_conv(),init_im2col_pack(),init_matmul_pack(),conv2DPacked=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,o=calculateOutputShape(n,i,r.dilations,r.pads,r.strides),s=t.run(createPackedIm2ColProgramInfoLoader(t,e[0],e[1],o,r),[e[0]]),a=t.reshapePacked(e[1],[i[0],i[1]*i[2]*i[3]]),u=3===e.length?[a,s,e[2]]:[a,s],l=t.run(createPackedMatmulProgramInfoLoader(t,u,r),u);return t.reshapePacked(l,o)}}}),init_im2col=__esm({"web/lib/onnxjs/backends/webgl/ops/im2col.ts"(){"use strict";init_types(),createIm2ColProgramMetadata=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),createIm2ColProgramInfo=(t,e,r,n,i,o)=>{let s=r.dims,a=n.dims,u=i.length,l=calculateIm2ColDims(s,a,i,4),c=`
        const int XC = ${s[1]};
        const int XH = ${s[2]};
        const int XW = ${s[3]};
        const int KH = ${o.kernelShape[0]};
        const int KW = ${o.kernelShape[1]};
        const int dilationH = ${o.dilations[0]};
        const int dilationW = ${o.dilations[1]};
        const int strideH = ${o.strides[0]};
        const int strideW = ${o.strides[1]};
        const int padH = ${o.pads[0]};
        const int padW = ${o.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${u}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${s.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...e,output:{dims:l,type:r.type,textureType:4},shaderSource:c}},createIm2ColProgramInfoLoader=(t,e,r,n,i)=>{let o=createIm2ColProgramMetadata(i.cacheKey);return{...o,get:()=>createIm2ColProgramInfo(t,o,e,r,n,i)}},calculateIm2ColDims=(t,e,r,n=4)=>[r[0],r[2],r[3],Math.ceil(t[1]*e[2]*e[3]/n)]}}),init_dot_product=__esm({"web/lib/onnxjs/backends/webgl/ops/dot-product.ts"(){"use strict";init_util(),init_glsl_source(),init_types(),init_fuse_utils(),init_im2col(),createDotProductProgramMetadata=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),createDotProductProgramInfo=(t,e,r,n,i)=>{let o=r[0].dims,s=r[1].dims,a=[s[0],Math.ceil(o[1]*s[2]*s[3]/4)],u=calculateIm2ColDims(o,s,n),[l,c]=t.calculateTextureWidthAndHeight(a,4),d=ShapeUtil.computeStrides(u),[p,h]=t.calculateTextureWidthAndHeight(u,4),f=n.length,b=r.length<3?"0.0":"_B(b)",g=Math.ceil(o[1]*s[2]*s[3]/4),{activationFunction:m,applyActivation:y}=getActivationSnippet(i),_=getGlsl(t.session.backend.glContext.version),x=`
${m}
float process(int indices[${f}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${d[0]} + im2col[1] * ${d[1]} + im2col[2] * ${d[2]};
  int kernelOffset = indices[1] * ${a[1]};
  float value = ${b};
  for (int i = 0; i < ${g}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${p}, ${h});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${l}, ${c});
    value += dot(${_.texture2D}(Im2Col, im2colCoords), ${_.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${y}
  return value;
}`;return{...e,output:{dims:n,type:r[0].type,textureType:0},shaderSource:x}},createDotProductProgramInfoLoader=(t,e,r,n)=>{let i=createDotProductProgramMetadata(e.length>2,n);return{...i,get:()=>createDotProductProgramInfo(t,i,e,r,n)}}}}),init_conv=__esm({"web/lib/onnxjs/backends/webgl/ops/conv.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_conv_grouped(),init_conv_pack(),init_dot_product(),init_fuse_utils(),init_im2col(),init_matmul(),calculateOutputShape=(t,e,r,n,i)=>{let o=t[0],s=t.slice(2),a=s.length,u=e[0],l=e.slice(2).map((t,e)=>t+(t-1)*(r[e]-1));return[o,u].concat(...s.map((t,e)=>t+n[e]+n[e+a]).map((t,e)=>Math.floor((t-l[e]+i[e])/i[e])))},conv=(t,e,r)=>(validateInputs5(e,r),conv2d(t,e,r)),conv2d=(t,e,r)=>{let n=getAdjustedConvAttributes(r,e),i=t.session.pack,o=1===n.kernelShape[0]&&1===n.kernelShape[1];return n.group>1?[t.run(createUnpackedGroupedConvProgramInfoLoader(t,e,n),e)]:o&&i?[conv2DUnpackedPointwise(t,e,n)]:i&&4===e[0].dims.length&&1===e[0].dims[0]&&!o?[conv2DPacked(t,e,n)]:[conv2DUnpacked(t,e,n)]},conv2DUnpackedPointwise=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,o=calculateOutputShape(n,i,r.dilations,r.pads,r.strides),s=t.reshapeUnpacked(e[0],[n[1],n[2]*n[3]]),a=t.reshapeUnpacked(e[1],[i[0],i[1]]),u=e.length>2?[a,s,e[2]]:[a,s],l=t.run(createMatmulProgramInfoLoader(u,r),u);return t.reshapeUnpacked(l,o)},conv2DUnpacked=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,o=calculateOutputShape(n,i,r.dilations,r.pads,r.strides),s=t.run(createIm2ColProgramInfoLoader(t,e[0],e[1],o,r),[e[0]]),a=3===e.length?[s,e[1],e[2]]:[s,e[1]];return t.run(createDotProductProgramInfoLoader(t,e,o,r),a)},getAdjustedConvAttributes=(t,e)=>{let r=t.kernelShape.slice();if(0===t.kernelShape.length)for(let t=2;t<e[1].dims.length;++t)r.push(e[1].dims[t]);let n=t.pads.slice();PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,r,n,t.autoPad);let i=Object.assign({},t);return Object.assign(i,{kernelShape:r,pads:n,cacheKey:t.cacheKey}),i},parseConvAttributes=t=>{let e=t.attributes,r=parseInternalActivationAttributes(e),n=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),o=e.getInt("group",1),s=e.getInts("kernel_shape",[]),a=e.getInts("pads",[0,0,0,0]),u=e.getInts("strides",[1,1]);return createAttributeWithCacheKey({autoPad:n,dilations:i,group:o,kernelShape:s,pads:a,strides:u,...r})},validateInputs5=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw Error("invalid bias");let r=t[0].dims.length-2;if(e.dilations.length!==r)throw Error(`dilations should be ${r}D`);if(e.strides.length!==r)throw Error(`strides should be ${r}D`);if(e.pads.length!==2*r)throw Error(`pads should be ${2*r}D`);if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw Error("Conv input(bias) should be float tensor")}}}),init_conv_transpose=__esm({"web/lib/onnxjs/backends/webgl/ops/conv-transpose.ts"(){"use strict";init_attribute_with_cache_key(),init_glsl_source(),init_types(),init_fuse_utils(),computeTotalPad=(t,e,r,n,i,o)=>(t-1)*e+r+(n-1)*i+1-o,distributePadding=(t,e,r,n,i)=>{let o=Math.floor(t/2);"SAME_UPPER"===e?(r[n]=o,r[i]=t-o):"SAME_LOWER"===e&&(r[n]=t-o,r[i]=o)},calculateOutputShapeAndPads=(t,e,r,n,i,o,s,a)=>{let u=t.length-2,l=0===a.length;for(let c=0;c<u;++c){let d=l?t[c+2]*o[c]:a[c];distributePadding(computeTotalPad(t[c+2],o[c],i[c],e[c],r[c],d),n,i,c,c+u),l&&a.push(o[c]*(t[c+2]-1)+s[c]+(e[c]-1)*r[c]+1-i[c]-i[c+u])}},convTranspose=(t,e,r)=>(validateInputs6(e,r),convTranspose2d(t,e,r)),convTranspose2d=(t,e,r)=>{let n=getAdjustedConvTransposeAttributes(r,e);return[convTranspose2DUnpacked(t,e,n)]},createConvTransposeProgramMetadata=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),createUnpackedConvTransposeProgramInfo=(t,e,r,n)=>{let i=e.length>2?"getB(output_channel)":"0.0",o=e[0].dims,s=e[1].dims,a=s[1],u=s[0]/n.group,l=[e[0].dims[0],e[1].dims[1]*n.group,...n.outputShape],c=getGlsl(t.session.backend.glContext.version),{activationFunction:d,applyActivation:p}=getActivationSnippet(n),h=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${d}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${a};
    int wOutChannel = output_channel - group_id * ${a};

    float value = ${i};
    for (int inChannelOffset = 0; inChannelOffset < ${u}; inChannelOffset++) {
      int input_channel = group_id * ${u} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${s[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${s[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${n.dilations[0]}, wHOff * ${n.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${o[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${o[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${p}
    ${c.output} = vec4(value, .0, .0, .0);
  }
`;return{...r,output:{dims:l,type:e[0].type,textureType:0},shaderSource:h,hasMain:!0}},createUnpackedConvTransposeProgramInfoLoader=(t,e,r)=>{let n=createConvTransposeProgramMetadata(e.length>2,r.cacheKey);return{...n,get:()=>createUnpackedConvTransposeProgramInfo(t,e,n,r)}},convTranspose2DUnpacked=(t,e,r)=>t.run(createUnpackedConvTransposeProgramInfoLoader(t,e,r),e),getAdjustedConvTransposeAttributes=(t,e)=>{let r=t.kernelShape.slice();if(0===t.kernelShape.length)for(let t=2;t<e[1].dims.length;++t)r.push(e[1].dims[t]);let n=t.pads.slice(),i=t.outputShape.slice();calculateOutputShapeAndPads(e[0].dims,r,t.dilations,t.autoPad,n,t.strides,t.outputPadding,i);let o=Object.assign({},t);return Object.assign(o,{kernelShape:r,pads:n,outputShape:i,cacheKey:t.cacheKey}),o},parseConvTransposeAttributes=t=>{let e=t.attributes,r=parseInternalActivationAttributes(e),n=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),o=e.getInt("group",1),s=e.getInts("kernel_shape",[]),a=e.getInts("output_padding",[0,0]),u=e.getInts("output_shape",[]),l=e.getInts("pads",[0,0,0,0]),c=e.getInts("strides",[1,1]);return createAttributeWithCacheKey({autoPad:n,dilations:i,group:o,kernelShape:s,outputPadding:a,outputShape:u,pads:l,strides:c,...r})},validateInputs6=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==r))throw Error("invalid bias");let n=t[0].dims.length-2;if(e.dilations.length!==n)throw Error(`dilations should be ${n}D`);if(e.strides.length!==n)throw Error(`strides should be ${n}D`);if(e.pads.length!==2*n)throw Error(`pads should be ${2*n}D`);if(e.outputPadding.length!==n)throw Error(`output_padding should be ${n}D`);if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw Error("ConvTranspose input(bias) should be float tensor")}}}),init_transpose=__esm({"web/lib/onnxjs/backends/webgl/ops/transpose.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_types(),transposeProgramMetadata={name:"Transpose",inputNames:["A"],inputTypes:[0]},transpose=(t,e,r)=>(validateInputs7(e),[t.run({...transposeProgramMetadata,cacheHint:r.cacheKey,get:()=>createTransposeProgramInfo(t,e[0],r.perm)},e)]),parseTransposeAttributes=t=>createAttributeWithCacheKey({perm:t.attributes.getInts("perm",[])}),createTransposeProgramInfo=(t,e,r)=>{let n=e.dims;r=getAdjustedPerm(n,r);let i=getOutputShape(n,r),o=n.length,s=`
      ${getPermFunctionBody("perm",r,o)}
      float process(int indices[${o}]) {
        int a[${o}];
        perm(a, indices);
        return _A(a);
      }`;return{...transposeProgramMetadata,output:{dims:i,type:e.type,textureType:0},shaderSource:s}},getAdjustedPerm=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),getOutputShape=(t,e)=>(e=getAdjustedPerm(t,e),ShapeUtil.sortBasedOnPerm(t,e)),getPermFunctionBody=(t,e,r)=>{let n=[];n.push(`void ${t}(out int a[${r}], int src[${r}]) {`);for(let t=0;t<r;++t)n.push(`	a[${e[t]}]=src[${t}];`);return n.push("	}"),n.join("\n")},validateInputs7=t=>{if(!t||1!==t.length)throw Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw Error("input should be float tensor")}}}),init_depth_to_space=__esm({"web/lib/onnxjs/backends/webgl/ops/depth-to-space.ts"(){"use strict";init_transpose(),depthToSpace=(t,e,r)=>{validateInputs8(e);let n=r.blocksize,i=n*n,o="DCR"===r.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],s="DCR"===r.mode?[e[0].dims[0],n,n,e[0].dims[1]/i,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/i,n,n,e[0].dims[2],e[0].dims[3]],a=t.reshapeUnpacked(e[0],s),u={perm:o,cacheKey:`${o}`},[l]=transpose(t,[a],u),c=[e[0].dims[0],e[0].dims[1]/i,e[0].dims[2]*n,e[0].dims[3]*n];return[t.reshapeUnpacked(l,c)]},parseDepthToSpaceAttributes=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let r=t.attributes.getString("mode","DCR");if("DCR"!==r&&"CRD"!==r)throw Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:e}},validateInputs8=t=>{if(1!==t.length)throw Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if("string"===t[0].type||4!==t[0].dims.length)throw TypeError("DepthToSpace input should be a 4-D numeric tensor")}}}),init_flatten=__esm({"web/lib/onnxjs/backends/webgl/ops/flatten.ts"(){"use strict";init_util(),flatten=(t,e,r)=>{validateInputs9(e,r);let n=ShapeUtil.flattenShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},parseFlattenAttributes=t=>t.attributes.getInt("axis",1),validateInputs9=(t,e)=>{if(!t||1!==t.length)throw Error("Flatten requires 1 input.");let r=t[0].dims.length;if(0===r)throw Error("scalar tensor is not supported.");if(e<-r||e>r)throw Error("Invalid axis");if("string"===t[0].type)throw Error("string tensor is not supported.")}}}),init_operators=__esm({"web/lib/onnxjs/operators.ts"(){"use strict";NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}}),init_gather=__esm({"web/lib/onnxjs/backends/webgl/ops/gather.ts"(){"use strict";init_attribute_with_cache_key(),init_operators(),init_util(),init_types(),gather=(t,e,r)=>(validateInputs10(e,r.axis),[t.run(createGatherProgramInfoLoader(t,e,r),e)]),parseGatherAttributes=t=>createAttributeWithCacheKey({axis:t.attributes.getInt("axis",0)}),gatherProgramMetadata={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},createGatherProgramInfo=(t,e,r,n)=>{let i=r[0].dims.slice(),o=r[1].dims.slice(),s=Array(i.length+o.length-1);n=ShapeUtil.normalizeAxis(n,i.length);let a=[];for(let t=0;t<s.length;t++)t<n?(s[t]=i[t],a.push(`inputIdx[${t}] = outputIdx[${t}];`)):t<n+o.length?(s[t]=o[t-n],a.push(`indexDataIdx[${t-n}] = outputIdx[${t}];`)):(s[t]=i[t-o.length+1],a.push(`inputIdx[${t-o.length+1}] = outputIdx[${t}];`));let u=s.length||1,l=i.length,c=o.length||1,d=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${l}];
        int indexDataIdx[${c}];
        indexDataIdx[0] = 0;
        ${a.join("\n        ")}
        int idx = int(_B(indexDataIdx));
        inputIdx[${n}] = idx < 0 ? idx + ${i[n]} : idx;
        return _A(inputIdx);
      }`;return{...e,output:{dims:s,type:r[0].type,textureType:0},shaderSource:d}},createGatherProgramInfoLoader=(t,e,r)=>{let n={...gatherProgramMetadata,cacheHint:r.cacheKey};return{...n,get:()=>createGatherProgramInfo(t,n,e,r.axis)}},validateInputs10=(t,e)=>{if(!t||2!==t.length)throw Error("Gather requires 2 inputs.");let r=t[0].dims.length;if(r<1)throw Error("Invalid input shape.");if(e<-r||e>r-1)throw Error("Invalid axis.");if(-1===NUMBER_TYPES.indexOf(t[0].type)||"int32"!==t[1].type&&"int16"!==t[1].type)throw Error("Invaid input type.")}}}),init_gemm=__esm({"web/lib/onnxjs/backends/webgl/ops/gemm.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_types(),gemm=(t,e,r)=>(validateInputs11(e,r),[t.run(createGemmProgramInfoLoader(e,r),e)]),parseGemmAttributes=(t,e)=>{let r=0!==t.attributes.getInt("transA",0),n=0!==t.attributes.getInt("transB",0),i=t.attributes.getFloat("alpha",1),o=t.attributes.getFloat("beta",1);return createAttributeWithCacheKey({transA:r,transB:n,alpha:i,beta:o,isOptionalC:e})},parseGemmAttributesV7=t=>parseGemmAttributes(t,!1),parseGemmAttributesV11=t=>parseGemmAttributes(t,!0),createGemmProgramInfoLoader=(t,e)=>{let r={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[0,0,0]:[0,0],key:e.cacheKey};return{...r,get:()=>createGemmProgramInfo(r,t,e)}},createGemmProgramInfo=(t,e,r)=>{let n=e[0].dims.slice(),i=e[1].dims.slice(),[o,s]=GemmUtil.getShapeOfGemmResult(n,r.transA,i,r.transB,3===e.length?e[2].dims:void 0),a=[o,s];if(!a)throw Error("Can't use gemm on the given tensors");let u=n[n.length-1],l="";r.transA&&(u=n[0]),r.transA&&r.transB?l="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?l="value += _A_T(a) * _B(b);":!r.transA&&r.transB?l="value += _A(a) * _B_T(b);":r.transA||r.transB||(l="value += _A(a) * _B(b);");let c=a.length,d=3===e.length?`int c[${e[2].dims.length}];`:"",p=3===e.length?"bcastIndices_C(indices, c);":"",h=3===e.length?"value += beta * _C(c);":"",f=`
      float process(int indices[${c}]) {
          int a[${c}];
          int b[${c}];
          ${d}

          copyVec(indices, a);
          copyVec(indices, b);
          ${p}

          float value = 0.0;
          for (int k=0; k<${u}; ++k) {
              a[${c-1}] = k;
              b[${c-2}] = k;
              ${l}
          }

          value = value * alpha;
          ${h}
          return value;
      }`;return{...t,output:{dims:a,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:f}},validateInputs11=(t,e)=>{if(!t)throw Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw Error("Input types are mismatched")}}}),init_image_scaler=__esm({"web/lib/onnxjs/backends/webgl/ops/image-scaler.ts"(){"use strict";init_attribute_with_cache_key(),init_types(),imageScaler=(t,e,r)=>(validateInputs12(e),[t.run(createImageScalerProgramInfoLoader(t,e,r),e)]),parseImageScalerAttributes=t=>{let e=t.attributes.getFloat("scale"),r=t.attributes.getFloats("bias");return createAttributeWithCacheKey({scale:e,bias:r})},imageScalerProgramMetadata={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},createImageScalerProgramInfo=(t,e,r,n)=>{let i=r[0].dims.slice(),o=i.length,s=createGetBiasMethod(n.bias.length),a=`
      ${s}
      float process(int indices[${o}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...e,output:{dims:i,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:a}},createImageScalerProgramInfoLoader=(t,e,r)=>{let n={...imageScalerProgramMetadata,cacheHint:r.cacheKey};return{...n,get:()=>createImageScalerProgramInfo(t,n,e,r)}},createGetBiasMethod=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let r=0;r<t;++r)0===r?e.push(`	if (channel == ${r}) { return bias[${r}]; }`):r===t-1?e.push(`	else { return bias[${r}]; }`):e.push(`	else if (channel == ${r}) { return bias[${r}]; }`);return e.push("	}"),e.join("\n")},validateInputs12=t=>{if(!t||1!==t.length)throw Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw Error("Invalid input type.")}}}),init_instance_normalization=__esm({"web/lib/onnxjs/backends/webgl/ops/instance-normalization.ts"(){"use strict";init_glsl_source(),init_types(),instanceNormalization=(t,e,r)=>{validateInputs13(e);let n=t.run(createMeanAndVarianceProgramInfoLoader(e[0]),e);return[t.run(createComputeOutputProgramInfoLoader(t,e[0],r,n.dims),[e[0],n,e[1],e[2]])]},parseInstanceNormalizationAttributes=t=>t.attributes.getFloat("epsilon",1e-5),meanAndVarianceProgramMetadata={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},createMeanAndVarianceProgramInfo=(t,e)=>{let r=e.dims.slice(),n=r[1],i=r[2]*r[3],o=[r[0],n],s=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${i});
        temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${i});

        return v;
      }`;return{...t,output:{dims:o,type:e.type,textureType:4},shaderSource:s}},createMeanAndVarianceProgramInfoLoader=t=>({...meanAndVarianceProgramMetadata,get:()=>createMeanAndVarianceProgramInfo(meanAndVarianceProgramMetadata,t)}),computeOutputProgramMetadata={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},createComputeOutputProgramInfo=(t,e,r,n,i)=>{let o=getGlsl(t.session.backend.glContext.version),[s,a]=t.calculateTextureWidthAndHeight(i,4),[u,l]=[s/4,a],c=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${u}, ${l});
        return ${o.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...e,output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:n}],shaderSource:c}},createComputeOutputProgramInfoLoader=(t,e,r,n)=>{let i={...computeOutputProgramMetadata,cacheHint:`${r}`};return{...i,get:()=>createComputeOutputProgramInfo(t,i,e,r,n)}},validateInputs13=t=>{if(!t||3!==t.length)throw Error("InstanceNormalization requires 3 inputs.");let e=t[0],r=t[1],n=t[2];if(e.dims.length<3||1!==r.dims.length||1!==n.dims.length)throw Error("Invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1])throw Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==n.type&&"float64"!==n.type)throw Error("Invalid input type.");if(4!==t[0].dims.length)throw Error("Only support 4-D input shape.")}}});function createLrnProgramInfo(t,e){let r=t[0].dims[1],n=t[0].dims.length,i=-Math.floor((e.size-1)/2),o=Math.ceil((e.size-1)/2),s=`float(${e.alpha}) / float(${e.size})`,a=`float(${e.bias})`,u=`float(${e.beta})`,l=`
    float process(int indices[${n}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${i}; i <= ${o}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${r}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${a} + ${s} * square_sum, ${u});
    }`;return{...lrnProgramMetadata,cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:l}}function createLrnProgramInfoLoader(t,e){return{...lrnProgramMetadata,cacheHint:e.cacheKey,get:()=>createLrnProgramInfo(t,e)}}var init_lrn=__esm({"web/lib/onnxjs/backends/webgl/ops/lrn.ts"(){"use strict";init_attribute_with_cache_key(),init_types(),lrn=(t,e,r)=>(validateInputs14(e),[t.run(createLrnProgramInfoLoader(e,r),e)]),parseLrnAttributes=t=>{let e=t.attributes.getFloat("alpha",1e-4),r=t.attributes.getFloat("beta",.75),n=t.attributes.getFloat("bias",1),i=t.attributes.getInt("size");return createAttributeWithCacheKey({alpha:e,beta:r,bias:n,size:i})},lrnProgramMetadata={name:"LRN",inputNames:["X"],inputTypes:[0]},validateInputs14=t=>{if(!t||1!==t.length)throw Error("LRN requires 1 input.");if(4!==t[0].dims.length)throw Error('currently only support LRN for input with "NCHW" format');if("float32"!==t[0].type)throw Error("input should be float type")}}}),init_pad=__esm({"web/lib/onnxjs/backends/webgl/ops/pad.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_glsl_source(),init_types(),padProgramMetadata={name:"Pad",inputNames:["A"],inputTypes:[0]},padV2=(t,e,r)=>(validateInputsV2(e),[t.run({...padProgramMetadata,cacheHint:r.cacheKey,get:()=>createPadProgramInfo(t,e[0],r)},e)]),parsePadAttributesV2=t=>{let e=t.attributes.getString("mode","constant"),r=t.attributes.getFloat("value",0),n=t.attributes.getInts("pads");return createAttributeWithCacheKey({mode:e,value:r,pads:n})},padV11=(t,e,r)=>{validateInputsV11(e);let n=generatePadAttributesFromInputs(t,e,r);return padV2(t,[e[0]],n)},parsePadAttributesV11=t=>t.attributes.getString("mode","constant"),generatePadAttributesFromInputs=(t,e,r)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw Error("dynamic pad attributes are not allowed");let n=Array.from(e[1].integerData),i=e.length>=3?e[2].floatData[0]:0;return createAttributeWithCacheKey({mode:r,pads:n,value:i})},createPadProgramInfo=(t,e,r)=>{let n=ShapeUtil.padShape(e.dims.slice(),r.pads),i=n.length,o=getPadFunction(t,e,r),s=`
      ${o}
      float process(int[${i}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:n,type:e.type,textureType:0},shaderSource:s}},validateInputsV2=t=>{if(!t||1!==t.length)throw Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw Error("Invalid input type.")},validateInputsV11=t=>{if(!t||2!==t.length&&3!==t.length)throw Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type||t.length>=3&&"string"===t[2].type)throw Error("Invalid input type.")},getPadFunction=(t,e,r)=>{let n=getGlsl(t.session.backend.glContext.version),[i,o]=t.calculateTextureWidthAndHeight(e.dims,0),s=ShapeUtil.computeStrides(e.dims);switch(r.mode){case"constant":return getPadConstant(n,e.dims,s,i,o,r.pads,r.value);case"reflect":return getPadReflect(n,e.dims,s,i,o,r.pads);case"edge":return getPadEdge(n,e.dims,s,i,o,r.pads);default:throw Error("Invalid mode")}},getPadConstant=(t,e,r,n,i,o,s)=>{let a=e.length,u="";for(let t=a-1;t>=0;--t)u+=`
        k = m[${t}] - ${o[t]};
        if (k < 0)  return constant;
        if (k >= ${e[t]}) return constant;
        offset += k * ${r[t]};
        `;return`
      float padA(int m[${a}]) {
        const float constant = float(${s});
        int offset = 0;
        int k = 0;
        ${u}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},getPadReflect=(t,e,r,n,i,o)=>{let s=e.length,a="";for(let t=s-1;t>=0;--t)a+=`
        k = m[${t}] - ${o[t]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[t]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[t]}) { k = _2n_1 - k; }
        }
        offset += k * ${r[t]};
        `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${a}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},getPadEdge=(t,e,r,n,i,o)=>{let s=e.length,a="";for(let t=s-1;t>=0;--t)a+=`
        k = m[${t}] - ${o[t]};
        if (k < 0)  k = 0;
        if (k >= ${e[t]}) k = ${e[t]-1};
        offset += k * ${r[t]};
      `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${a}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}}),init_pool=__esm({"web/lib/onnxjs/backends/webgl/ops/pool.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_types(),averagePool=(t,e,r)=>{validateInputs15(e);let n={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run({...n,get:()=>createAveragePoolProgramInfo(e,n,!1,r)},e)]},parseAveragePoolAttributes=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=0!==t.attributes.getInt("count_include_pad",0),i=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),s=t.attributes.getInts("pads",[]);if(0!==r)throw Error("using ceil() in shape computation is not yet supported for AveragePool");return createAttributeWithCacheKey({autoPad:e,ceilMode:r,countIncludePad:n,kernelShape:i,strides:o,pads:s})},createAveragePoolProgramInfo=(t,e,r,n)=>{let[i,o]=getAdjustedPoolAttributesAndOutputShape(t,n,r),s=ShapeUtil.size(i.kernelShape),a="value += _X(x);",u="";i.countIncludePad?u+=`value /= float(${s});`:u+=`value /= float(${s} - pad);`;let l=generatePoolingCode(t[0].dims,i,a,u,"0.0"),c=`
        ${l}
      `;return{...e,output:{dims:o,type:t[0].type,textureType:0},shaderSource:c}},globalAveragePool=(t,e,r)=>{validateInputs15(e);let n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${r.countIncludePad}`};return[t.run({...n,get:()=>createAveragePoolProgramInfo(e,n,!0,r)},e)]},parseGlobalAveragePoolAttributes=t=>{let e=0!==t.attributes.getInt("count_include_pad",0);return createAttributeWithCacheKey({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},maxPool=(t,e,r)=>{validateInputs15(e);let n={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run({...n,get:()=>createMaxPoolProgramInfo(e,n,!1,r)},e)]},parseMaxPoolAttributes=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInts("kernel_shape"),i=t.attributes.getInts("strides",[]),o=t.attributes.getInts("pads",[]),s=t.attributes.getInt("storage_order",0),a=t.attributes.getInts("dilations",[]);if(0!==s)throw Error("column major storage order is not yet supported for MaxPool");if(0!==r)throw Error("using ceil() in shape computation is not yet supported for MaxPool");return createAttributeWithCacheKey({autoPad:e,ceilMode:r,countIncludePad:!1,kernelShape:n,strides:i,pads:o,storageOrder:s,dilations:a})},createMaxPoolProgramInfo=(t,e,r,n)=>{let[i,o]=getAdjustedPoolAttributesAndOutputShape(t,n,r),s=`
      value = max(_X(x), value);
    `,a="",u=generatePoolingCode(t[0].dims,i,s,a,"-1e5"),l=`
      ${u}
    `;return{...e,output:{dims:o,type:t[0].type,textureType:0},shaderSource:l}},getAdjustedPoolAttributesAndOutputShape=(t,e,r)=>{let n=t[0].dims.slice(),i=Object.hasOwnProperty.call(e,"dilations"),o=e.kernelShape.slice(),s=e.strides.slice(),a=i?e.dilations.slice():[],u=e.pads.slice();PoolConvUtil.adjustPoolAttributes(r,n,o,s,a,u);let l=PoolConvUtil.computePoolOutputShape(r,n,s,a,o,u,e.autoPad),c=Object.assign({},e);return i?Object.assign(c,{kernelShape:o,strides:s,pads:u,dilations:a,cacheKey:e.cacheKey}):Object.assign(c,{kernelShape:o,strides:s,pads:u,cacheKey:e.cacheKey}),[c,l]},globalMaxPoolAttributes={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},globalMaxPoolMetadata={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},globalMaxPool=(t,e)=>(validateInputs15(e),[t.run({...globalMaxPoolMetadata,get:()=>createMaxPoolProgramInfo(e,globalMaxPoolMetadata,!0,globalMaxPoolAttributes)},e)]),validateInputs15=t=>{if(!t||1!==t.length)throw Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw Error("Invalid input type.")},generatePoolingCode=(t,e,r,n,i)=>{let o=t.length;if(e.kernelShape.length<=2){let s=e.kernelShape[e.kernelShape.length-1],a=e.strides[e.strides.length-1],u=e.pads[e.pads.length/2-1],l=e.pads[e.pads.length-1],c=t[o-1],d="",p="",h="";if(d=u+l!==0?`
          for (int i = 0; i < ${s}; i++) {
            x[${o} - 1] = indices[${o} - 1] * ${a} - ${u} + i;
            if (x[${o} - 1] < 0 || x[${o} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${r}
          }`:`
          for (int i = 0; i < ${s}; i++) {
            x[${o} - 1] = indices[${o} - 1] * ${a} - ${u} + i;
            ${r}
          }`,2===e.kernelShape.length){let r=e.kernelShape[e.kernelShape.length-2],n=e.strides[e.strides.length-2],i=e.pads[e.pads.length/2-2],a=e.pads[e.pads.length-2],u=t[o-2];p=i+a!==0?`
            for (int j = 0; j < ${r}; j++) {
              x[${o} - 2] = indices[${o} - 2] * ${n} - ${i} + j;
              if (x[${o} - 2] < 0 || x[${o} - 2] >= ${u}) {
                pad+= ${s};
                continue;
              }
          `:`
            for (int j = 0; j < ${r}; j++) {
              x[${o} - 2] = indices[${o} - 2] * ${n} - ${i} + j;
            `,h=`
          }
        `}return`
        float process(int indices[${o}]) {
          int x[${o}];
          copyVec(indices, x);

          float value = ${i};
          int pad = 0;
          ${p}
          ${d}
          ${h}
          ${n}
          return value;
        }
      `}{let s=ShapeUtil.size(e.kernelShape),a=ShapeUtil.computeStrides(e.kernelShape),u=a.length,l=e.pads.length,c=offsetToIndices(u),d=copyArray(t,"inputDims"),p=copyArray(e.pads,"pads"),h=copyArray(a,"kernelStrides"),f=copyArray(e.strides,"strides"),b=e.pads.reduce((t,e)=>t+e),g="";return g=b?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${r}
          }`:`
          }
          ${r}
        `,`
        ${c}
        float process(int indices[${o}]) {
          int x[${o}];
          copyVec(indices, x);
          int offset[${u}];
          int pads[${l}];
          int inputDims[${o}];
          int kernelStrides[${u}];
          int strides[${u}];
          ${p}
          ${d}
          ${f}
          ${h}

          float value = ${i};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${s}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${o} - ${u}; j < ${o}; j++) {
              x[j] = indices[j] * strides[j - ${o} + ${u}]
                + offset[j - ${o} + ${u}] - pads[j - 2];
              ${g}
          }
          ${n}

          return value;
        }
      `}},copyArray=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=`
      ${e}[${n}] = ${t[n]};
    `;return r},offsetToIndices=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}}),init_reduce=__esm({"web/lib/onnxjs/backends/webgl/ops/reduce.ts"(){"use strict";init_attribute_with_cache_key(),init_operators(),init_util(),init_types(),reduce=(t,e,r,n,i)=>{validateInputs16(e);let o={name:n,inputNames:["A"],inputTypes:[0]};return[t.run({...o,cacheHint:r.cacheKey,get:()=>createReduceProgramInfo(t,e,r,n,i,o)},e)]},parseReduceAttributes=t=>{let e=t.attributes.getInts("axes",[]),r=1===t.attributes.getInt("keepdims",1);return createAttributeWithCacheKey({axes:e,keepDims:r})},createReduceProgramInfo=(t,e,r,n,i,o)=>{let s=[],a=e[0].dims.length||1,u=[],l=ShapeUtil.normalizeAxes(r.axes,e[0].dims.length),c=i(e,l),d=c[1];for(let t=0;t<e[0].dims.length;t++)l.indexOf(t)>=0||0===l.length?(r.keepDims&&s.push(1),d=`
          for(int j${t} = 0; j${t} < ${e[0].dims[t]}; j${t}++) {
            inputIdx[${t}] = j${t};
            ${d}
          }`):(u.push(`inputIdx[${t}] = outputIdx[${s.length}];`),s.push(e[0].dims[t]));let p=s.length||1,h=`
      float process(int outputIdx[${p}]) {
        float value;                 // final result
        int inputIdx[${a}];      // addressing input data
        ${u.join("\n")}
        ${c[0]}       // init ops for reduce max/min
        ${d}
        ${c[2]}       // final computation for reduce mean
        return value;
      }`;return{...o,output:{dims:s,type:e[0].type,textureType:0},shaderSource:h}},validateInputs16=t=>{if(!t||1!==t.length)throw Error("Reduce op requires 1 input.");if(-1===NUMBER_TYPES.indexOf(t[0].type))throw Error("Invalid input type.")},reduceSum=(t,e,r)=>reduce(t,e,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),reduceMean=(t,e,r)=>reduce(t,e,r,"ReduceMean",(t,e)=>{let r=1;for(let n=0;n<t[0].dims.length;n++)(e.indexOf(n)>=0||0===e.length)&&(r*=t[0].dims[n]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${r}.;`]}),reduceMax=(t,e,r)=>reduce(t,e,r,"ReduceMax",(t,e)=>{let r=[];for(let n=0;n<t[0].dims.length;n++)(e.indexOf(n)>=0||0===e.length)&&r.push(`inputIdx[${n}] = 0;`);return[`${r.join("\n")}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),reduceMin=(t,e,r)=>reduce(t,e,r,"ReduceMin",(t,e)=>{let r=[];for(let n=0;n<t[0].dims.length;n++)(e.indexOf(n)>=0||0===e.length)&&r.push(`inputIdx[${n}] = 0;`);return[`${r.join("\n")}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),reduceProd=(t,e,r)=>reduce(t,e,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),reduceLogSum=(t,e,r)=>reduce(t,e,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),reduceLogSumSquare=(t,e,r)=>reduce(t,e,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}}),init_reshape=__esm({"web/lib/onnxjs/backends/webgl/ops/reshape.ts"(){"use strict";init_util(),reshape=(t,e)=>{let r=ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],r)]:[t.reshapeUnpacked(e[0],r)]}}}),init_upsample=__esm({"web/lib/onnxjs/backends/webgl/ops/upsample.ts"(){"use strict";init_attribute_with_cache_key(),init_glsl_source(),init_types(),upsampleProgramMetadata={name:"Upsample",inputNames:["X"],inputTypes:[0]},upsample=(t,e,r)=>(validateInputs17(e,r),[t.run({...upsampleProgramMetadata,cacheHint:r.cacheKey,get:()=>createUpsampleProgramInfo(t,e,r)},e)]),parseUpsampleAttributesV7=t=>parseUpsampleAttributes(t,7),parseUpsampleAttributesV9=t=>parseUpsampleAttributes(t,9),parseUpsampleAttributes=(t,e)=>{let r=e>=10,n=t.attributes.getString("mode","nearest");if("nearest"!==n&&"linear"!==n&&(e<11||"cubic"!==n))throw Error(`unrecognized mode: ${n}`);let i=[];e<9&&(i=t.attributes.getFloats("scales"),scalesValidation(i,n,r));let o=t.attributes.getFloat("extrapolation_value",0),s=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(s))throw Error(`coordinate_transform_mode '${s}' is not supported`);let a="tf_crop_and_resize"===s,u=a,l="nearest"===n&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(l))throw Error(`nearest_mode '${l}' is not supported`);let c=t.attributes.getFloat("cubic_coeff_a",-.75),d=0!==t.attributes.getInt("exclude_outside",0);if(d&&"cubic"!==n)throw Error("exclude_outside can be set to 1 only when mode is CUBIC.");let p=e<11||"nearest"===n&&"asymmetric"===s&&"floor"===l,h=0,f=0,b=0;return e>10?t.inputs.length>2?(h=1,f=2,b=3):(f=1,b=2):9===e&&(f=1),createAttributeWithCacheKey({opset:e,isResize:r,mode:n,scales:i,extrapolationValue:o,coordinateTransformMode:s,useExtrapolation:u,needRoiInput:a,nearestMode:l,cubicCoefficientA:c,excludeOutside:d,useNearest2xOptimization:p,roiInputIdx:h,scalesInputIdx:f,sizesInputIdx:b})},createUpsampleProgramInfo=(t,e,r)=>{let n=getGlsl(t.session.backend.glContext.version),[i,o]=t.calculateTextureWidthAndHeight(e[0].dims,0),s=e[0].dims.map((t,e)=>Math.floor(t*r.scales[e])),[a,u]=t.calculateTextureWidthAndHeight(s,0),l=s.length,c=Array(l),d=Array(l),p=`
      int output_pitches[${l}];
      int input_pitches[${l}];
      `;for(let t=l-1;t>=0;t--)c[t]=t===l-1?1:c[t+1]*s[t+1],d[t]=t===l-1?1:d[t+1]*e[0].dims[t+1],p+=`
        output_pitches[${t}] = ${c[t]};
        input_pitches[${t}] = ${d[t]};
        `;let h=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${i}, ${o});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,f="nearest"===r.mode?`
    ${h}
    float process(int indices[${l}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a}, ${u});

      ${p}

      int d, m;
      for (int dim = 0; dim < ${l}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:4===l?`
    ${h}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a}, ${u});

      ${p}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${h}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${a}, ${u});

      ${p}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...upsampleProgramMetadata,output:{dims:s,type:e[0].type,textureType:0},shaderSource:f,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(t=>Math.ceil(t))}]}},validateInputs17=(t,e)=>{if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw Error("Invalid input shape.");if("string"===t[0].type)throw Error("Invalid input tensor types.")},scalesValidation=(t,e,r)=>{if(r){for(let e of t)if(e<=0)throw Error("Scale value should be greater than 0.")}else for(let e of t)if(e<1)throw Error("Scale value should be greater than or equal to 1.");if(("linear"===e||"cubic"===e)&&2!==t.length&&(4!==t.length||1!==t[0]||1!==t[1]))throw Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}}}),init_resize_packed=__esm({"web/lib/onnxjs/backends/webgl/ops/resize-packed.ts"(){"use strict";init_glsl_source(),init_types(),init_utils(),init_packing_utils(),init_upsample(),resizeProgramMetadata={name:"Resize",inputNames:["A"],inputTypes:[2]},resize=(t,e,r)=>(validateInputs17(e,r),[t.run({...resizeProgramMetadata,cacheHint:r.cacheKey,get:()=>createPackedResizeProgramInfo(t,e,r)},e)]),parseResizeAttributesV10=t=>parseUpsampleAttributes(t,10),parseResizeAttributesV11=t=>parseUpsampleAttributes(t,11),createPackedResizeProgramInfo=(t,e,r)=>{let n=getGlsl(t.session.backend.glContext.version),[i,o]=prepareInputs(e,r);if(i.every(t=>1===t)&&"tf_crop_and_resize"!==r.coordinateTransformMode)return{...resizeProgramMetadata,output:{dims:o,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${n.texture2D}(X, TexCoords);
                    ${n.output} = v;
                }`};let s=o.length;if(s<2)throw Error(`output dimension should be at least 2, but got ${s}`);let a=o[s-2],u=o[s-1],l=e[0].dims;if(s!==l.length)throw Error(`output dimension should match input ${l.length}, but got ${s}`);let c=l[s-2],d=l[s-1],p=i[s-2],h=i[s-1],f="";if("linear"!==r.mode)throw Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":f=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":f=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":f=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${u}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${a}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${u}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${a}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":f=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${u}.0 - 1.0, ${a}.0 - 1.0, ${u}.0 - 1.0,
                            ${a}.0 - 1.0);
                        vec4 original = vec4(${d}.0 - 1.0, ${c}.0 - 1.0, ${d}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let b=getCoordsDataType(s),g=unpackFromChannel(),m=`
            const vec2 inputWH = vec2(${c}.0, ${d}.0);
            const vec4 scaleWHWH = vec4(float(${p}), float(${h}), float(${p}), float(${h}));
            ${g}
            ${f}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${b} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${a-1};
                bool hasNextCol = rc.z < ${u-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${n.output} = vec4(newValue);
            }
        `;return{...resizeProgramMetadata,output:{dims:o,type:e[0].type,textureType:2},hasMain:!0,shaderSource:m}},prepareInputs=(t,e)=>{let r,n=t[0].dims,i=e.scales;if(0===i.length){let o=t[e.scalesInputIdx];if(o&&0!==o.size){if(t[e.sizesInputIdx])throw Error("Only one of scales or sizes must be provided as input.");i=parseScalesData(o,e.mode,e.isResize)}else{let o=t[e.sizesInputIdx];if(!o||0===o.size)throw Error("Either scales or sizes MUST be provided as input.");r=Array.from(o.integerData),i=parseScalesDataFromOutputSize(r,n,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw Error("Only one of scales or sizes must be provided as input.");let o=r||n.map((t,e)=>Math.floor(t*i[e]));return[i,o]},parseScalesData=(t,e,r)=>{let n=Array.from(t.floatData);return scalesValidation(n,e,r),n},parseScalesDataFromOutputSize=(t,e,r,n)=>{let i=e.length,o=Array(i);for(let r=0,n=i;r<n;r++)if(0===e[r]){if(0!==t[r])throw Error("Input dim is zero but required output dim is non-zero.");o[r]=1}else o[r]=t[r]/e[r];return scalesValidation(o,r,n),o}}}),init_shape=__esm({"web/lib/onnxjs/backends/webgl/ops/shape.ts"(){"use strict";init_tensor2(),shape=(t,e)=>(validateInputs18(e),[new Tensor4([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),validateInputs18=t=>{if(!t||1!==t.length)throw Error("Shape requires 1 input.")}}}),init_slice=__esm({"web/lib/onnxjs/backends/webgl/ops/slice.ts"(){"use strict";init_attribute_with_cache_key(),init_operators(),init_util(),init_types(),sliceProgramMetadata={name:"Slice",inputNames:["A"],inputTypes:[0]},slice=(t,e,r)=>(validateInputs19(e),[t.run({...sliceProgramMetadata,cacheHint:r.cacheKey,get:()=>createSliceProgramInfo(t,e[0],r)},e)]),parseSliceAttributes=t=>{let e=t.attributes.getInts("starts"),r=t.attributes.getInts("ends"),n=t.attributes.getInts("axes",[]);return createAttributeWithCacheKey({starts:e,ends:r,axes:n})},createSliceProgramInfo=(t,e,r)=>{let n=0===r.axes.length?e.dims.slice(0).map((t,e)=>e):r.axes,i=ShapeUtil.normalizeAxes(n,e.dims.length),o=r.starts.map((t,r)=>t>e.dims[i[r]]-1?e.dims[i[r]]:ShapeUtil.normalizeAxis(t,e.dims[i[r]])),s=r.ends.map((t,r)=>t>e.dims[i[r]]-1?e.dims[i[r]]:ShapeUtil.normalizeAxis(t,e.dims[i[r]])),a=e.dims.slice(),u=[];for(let t=0;t<i.length;t++)a[i[t]]=s[t]-o[t],o[t]>0&&u.push(`outputIdx[${i[t]}] += ${o[t]};`);let l=a.length,c=`
      float process(int outputIdx[${l}]) {
        ${u.join("\n      ")}
        return _A(outputIdx);
      }`;return{...sliceProgramMetadata,output:{dims:a,type:e.type,textureType:0},shaderSource:c}},validateInputs19=t=>{if(!t||1!==t.length)throw Error("Slice requires 1 input.");if(-1===NUMBER_TYPES.indexOf(t[0].type))throw Error("Invalid input type.")},sliceV10=(t,e)=>{validateInputsV10(e);let r=generateSliceAttributesFromInputs(t,e);return[t.run({...sliceProgramMetadata,cacheHint:r.cacheKey,get:()=>createSliceProgramInfo(t,e[0],r)},[e[0]])]},generateSliceAttributesFromInputs=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(t=>1!==t))throw Error("currently non-1 steps is not supported for Slice");let r=Array.from(e[1].integerData),n=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[],o=`${i};${r};${n}`;return{starts:r,ends:n,axes:i,cacheKey:o}},validateInputsV10=t=>{if(!t||t.length<3||t.length>5)throw Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length||"int32"!==t[2].type||1!==t[2].dims.length||t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length)||t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw Error("Invalid input type.")}}}),init_softmax=__esm({"web/lib/onnxjs/backends/webgl/ops/softmax.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_glsl_source(),init_types(),init_transpose(),softmaxComputeMaxProgramMetadata={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},softmaxComputeScaleProgramMetadata={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},softmaxProgramMetadata={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},softmax=(t,e,r)=>{validateInputs20(e);let n=e[0].dims.slice(),i=ShapeUtil.normalizeAxis(r.axis,n.length),o=ShapeUtil.sizeToDimension(n,i),s=ShapeUtil.sizeFromDimension(n,i);return computeSoftmax(t,e,r,o,s)},parseSoftmaxAttributes=t=>createAttributeWithCacheKey({axis:t.attributes.getInt("axis",1)}),parseSoftmaxAttributesV13=t=>createAttributeWithCacheKey({axis:t.attributes.getInt("axis",-1)}),softmaxV13=(t,e,r)=>{let n;validateInputs20(e);let i=e[0].dims.slice(),o=ShapeUtil.normalizeAxis(r.axis,i.length),s=i.length,a=o!==s-1,u=[],l=[],c=[];a&&((l=Array.from({length:s}).map((t,e)=>e))[o]=s-1,l[s-1]=o,l.map(t=>u.push(i[t])),n=createAttributeWithCacheKey({perm:l}),c=transpose(t,e,n));let d=a?ShapeUtil.sizeToDimension(u,s-1):ShapeUtil.sizeToDimension(i,s-1),p=a?ShapeUtil.sizeFromDimension(u,s-1):ShapeUtil.sizeFromDimension(i,s-1),h=computeSoftmax(t,a?c:e,r,d,p);return a?transpose(t,h,n):h},computeSoftmax=(t,e,r,n,i)=>{let o=createComputeMaxProgramInfo(t,e[0],n,i,[n]),s=t.run({...softmaxComputeMaxProgramMetadata,cacheHint:r.cacheKey,get:()=>o},e),a=createComputScaleProgramInfo(t,e[0],n,i,o.output.dims,[n]),u=t.run({...softmaxComputeScaleProgramMetadata,cacheHint:r.cacheKey,get:()=>a},[e[0],s]),l=createSoftMaxProgramInfo(t,e[0],n,i,o.output.dims,a.output.dims);return[t.run({...softmaxProgramMetadata,cacheHint:r.cacheKey,get:()=>l},[e[0],s,u])]},createComputeMaxProgramInfo=(t,e,r,n,i)=>{let[o,s]=t.calculateTextureWidthAndHeight(e.dims,0),a=i.length;if(r<1||n<1)throw Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw Error("Dimensionality of the output should be 1");if(i[0]!==r)throw Error("Shape of the output should be equal to logical row count");let u=getGlsl(t.session.backend.glContext.version),l=`
      float process(int[${a}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float max = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset, ${o},
        ${s} )));
        for(int i=1; i<${n}; ++i)
        {
          float current = getColorAsFloat(${u.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${o}, ${s})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...softmaxComputeMaxProgramMetadata,output:{dims:i,type:e.type,textureType:0},shaderSource:l}},createComputScaleProgramInfo=(t,e,r,n,i,o)=>{let[s,a]=t.calculateTextureWidthAndHeight(e.dims,0),u=o.length;if(r<1||n<1)throw Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==o.length)throw Error("Dimensionality of the output should be 1");if(o[0]!==r)throw Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r)throw Error("Shape of the intermediate results should be equal to logical row count");let l=getGlsl(t.session.backend.glContext.version),c=`
      float process(int[${u}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${n}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${s}, ${a}))) - max);
        }

        return norm_factor;
      }`;return{...softmaxComputeScaleProgramMetadata,output:{dims:o,type:e.type,textureType:0},shaderSource:c}},createSoftMaxProgramInfo=(t,e,r,n,i,o)=>{let[s,a]=t.calculateTextureWidthAndHeight(e.dims,0),u=e.dims.length;if(r<1||n<1)throw Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==o.length)throw Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r||o[0]!==r)throw Error("Shape of the intermediate results should be equal to logical row count");let l=`
      float process(int[${u}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${s}, ${a});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${n};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...softmaxProgramMetadata,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:l}},validateInputs20=t=>{if(!t||1!==t.length)throw Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw Error("Invalid input type")}}}),init_split=__esm({"web/lib/onnxjs/backends/webgl/ops/split.ts"(){"use strict";init_attribute_with_cache_key(),init_util(),init_types(),splitProgramMetadata={name:"Split",inputNames:["A"],inputTypes:[0]},split=(t,e,r)=>{validateInputs21(e);let n=ShapeUtil.normalizeAxis(r.axis,e[0].dims.length),i=getProgramCount(t,e,n,r),o=[];for(let s=0;s<i;++s)o.push(t.run({...splitProgramMetadata,cacheHint:`${r.cacheKey};${s}`,get:()=>createSplitProgramInfo(t,e[0],r,n,s)},e));return o},parseSplitAttributes=t=>{let e=t.attributes.getInt("axis",0),r=t.attributes.getInts("split",[]),n=t.outputs.length;return createAttributeWithCacheKey({axis:e,split:r,numOutputs:n})},getProgramCount=(t,e,r,n)=>{let[,i]=SplitUtil.splitShape(e[0].dims,r,n.split,n.numOutputs);return i.length},createSplitProgramInfo=(t,e,r,n,i)=>{let[o,s]=SplitUtil.splitShape(e.dims,n,r.split,r.numOutputs),a=s[i],u=o[i],l=u.length,c=`
      float process(int indices[${l}]) {
        indices[${n}] += ${a};
        return _A(indices);
      }
    `;return{...splitProgramMetadata,cacheHint:`${r.cacheKey}:${i}`,output:{dims:u,type:e.type,textureType:0},shaderSource:c}},validateInputs21=t=>{if(!t||1!==t.length)throw Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw Error("Invalid input type.")}}}),init_squeeze=__esm({"web/lib/onnxjs/backends/webgl/ops/squeeze.ts"(){"use strict";init_util(),squeeze=(t,e,r)=>{validateInputs22(e);let n=ShapeUtil.squeezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},squeezeV13=(t,e)=>(validateInputsV13(e),squeeze(t,[e[0]],Array.from(e[1].integerData))),parseSqueezeAttributes=t=>t.attributes.getInts("axes"),validateInputs22=t=>{if(!t||1!==t.length)throw Error("Squeeze requires 1 input.");if("string"===t[0].type)throw Error("invalid input tensor types.")},validateInputsV13=t=>{if(!t||2!==t.length)throw Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw Error("Invalid input type.")}}}),init_sum=__esm({"web/lib/onnxjs/backends/webgl/ops/sum.ts"(){"use strict";init_glsl_source(),init_types(),sum=(t,e)=>{validateInputs23(e);let r={name:"Sum",inputNames:e.map((t,e)=>`X${e}`),inputTypes:Array(e.length).fill(0)};return[t.run({...r,get:()=>createSumProgramInfo(t,e,r)},e)]},createSumProgramInfo=(t,e,r)=>{let n=getGlsl(t.session.backend.glContext.version),i=e[0].dims.slice(),o=e.map((t,e)=>`${n.texture2D}(X${e},TexCoords)`).join(" + "),s=`
      void main() {
        vec4 result = ${o};
        ${n.output} = result;
      }
    `;return{...r,output:{dims:i,type:e[0].type,textureType:0},hasMain:!0,shaderSource:s}},validateInputs23=t=>{if(!t||0===t.length)throw Error("Sum requires inputs.");let e=t[0].dims.length;for(let r=1;r<t.length;r++){if(e!==t[r].dims.length)throw Error("Input shapes are mismatched.");for(let n=0;n<e;n++)if(t[0].dims[n]!==t[r].dims[n])throw Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw Error("Invalid input type.");for(let e=1;e<t.length;e++)if(t[0].type!==t[e].type)throw Error("Input types are not matched.")}}}),init_tile=__esm({"web/lib/onnxjs/backends/webgl/ops/tile.ts"(){"use strict";init_operators(),init_types(),tile=(t,e)=>{validateInputs24(e);let r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run({...r,get:()=>createTileProgramInfo(t,e,r)},e)]},createTileProgramInfo=(t,e,r)=>{let n=e[0].dims.slice(),i=Array(n.length),o=[];for(let t=0;t<n.length;t++)i[t]=n[t]*e[1].numberData[t],o.push(`inputIdx[${t}] = int(mod(float(outputIdx[${t}]), ${n[t]}.));`);let s=i.length,a=`
      float process(int outputIdx[${s}]) {
        int inputIdx[${s}];
        ${o.join("\n")}
        return _A(inputIdx);
      }
    `;return{...r,output:{dims:i,type:e[0].type,textureType:0},shaderSource:a}},validateInputs24=t=>{if(!t||2!==t.length)throw Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw Error("Invalid input shape.");if(-1===NUMBER_TYPES.indexOf(t[0].type))throw Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw Error("Invalid repeat type.")}}}),init_unsqueeze=__esm({"web/lib/onnxjs/backends/webgl/ops/unsqueeze.ts"(){"use strict";init_util(),unsqueeze=(t,e,r)=>{validateInputs25(e);let n=ShapeUtil.unsqueezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},unsqueezeV13=(t,e)=>(validateInputsV132(e),unsqueeze(t,[e[0]],Array.from(e[1].integerData))),parseUnsqueezeAttributes=t=>t.attributes.getInts("axes"),validateInputs25=t=>{if(!t||1!==t.length)throw Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw Error("invalid input tensor types.")},validateInputsV132=t=>{if(!t||2!==t.length)throw Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw Error("Invalid input type.")}}}),init_op_resolve_rules=__esm({"web/lib/onnxjs/backends/webgl/op-resolve-rules.ts"(){"use strict";init_batch_normalization(),init_binary_op(),init_cast(),init_concat(),init_conv(),init_conv_transpose(),init_depth_to_space(),init_flatten(),init_gather(),init_gemm(),init_image_scaler(),init_instance_normalization(),init_lrn(),init_matmul(),init_pad(),init_pool(),init_reduce(),init_reshape(),init_resize_packed(),init_shape(),init_slice(),init_softmax(),init_split(),init_squeeze(),init_sum(),init_tile(),init_transpose(),init_unary_op(),init_unsqueeze(),init_upsample(),WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",abs],["Acos","","7+",acos],["Add","","7+",add2],["And","","7+",and2],["Asin","","7+",asin],["Atan","","7+",atan],["AveragePool","","7+",averagePool,parseAveragePoolAttributes],["BatchNormalization","","7+",batchNormalization,parseBatchNormalizationAttributes],["Cast","","6+",cast,parseCastAttributes],["Ceil","","6+",ceil],["Clip","","6-10",clip,parseClipAttributes],["Clip","","11+",clipV11],["Concat","","4+",concat,parseConcatAttributes],["Conv","","1+",conv,parseConvAttributes],["ConvTranspose","","1+",convTranspose,parseConvTransposeAttributes],["Cos","","7+",cos],["Div","","7+",div],["Dropout","","7+",identity],["DepthToSpace","","1+",depthToSpace,parseDepthToSpaceAttributes],["Equal","","7+",equal],["Elu","","6+",elu,parseEluAttributes],["Exp","","6+",exp],["Flatten","","1+",flatten,parseFlattenAttributes],["Floor","","6+",floor],["FusedConv","com.microsoft","1+",conv,parseConvAttributes],["Gather","","1+",gather,parseGatherAttributes],["Gemm","","7-10",gemm,parseGemmAttributesV7],["Gemm","","11+",gemm,parseGemmAttributesV11],["GlobalAveragePool","","1+",globalAveragePool,parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",globalMaxPool],["Greater","","7+",greater],["Identity","","1+",identity],["ImageScaler","","1+",imageScaler,parseImageScalerAttributes],["InstanceNormalization","","6+",instanceNormalization,parseInstanceNormalizationAttributes],["LeakyRelu","","6+",leakyRelu,parseLeakyReluAttributes],["Less","","7+",less],["LRN","","1+",lrn,parseLrnAttributes],["Log","","6+",log2],["MatMul","","1+",matMul,parseMatMulAttributes],["MaxPool","","1+",maxPool,parseMaxPoolAttributes],["Mul","","7+",mul],["Neg","","6+",neg],["Not","","1+",not2],["Or","","7+",or2],["Pad","","2-10",padV2,parsePadAttributesV2],["Pad","","11+",padV11,parsePadAttributesV11],["Pow","","7+",pow],["PRelu","","7+",pRelu],["ReduceLogSum","","1+",reduceLogSum,parseReduceAttributes],["ReduceMax","","1+",reduceMax,parseReduceAttributes],["ReduceMean","","1+",reduceMean,parseReduceAttributes],["ReduceMin","","1+",reduceMin,parseReduceAttributes],["ReduceProd","","1+",reduceProd,parseReduceAttributes],["ReduceSum","","1-12",reduceSum,parseReduceAttributes],["ReduceSumSquare","","1+",reduceLogSumSquare,parseReduceAttributes],["Relu","","6+",relu],["Reshape","","5+",reshape],["Resize","","10",resize,parseResizeAttributesV10],["Resize","","11+",resize,parseResizeAttributesV11],["Shape","","1+",shape],["Sigmoid","","6+",sigmoid],["Sin","","7+",sin],["Slice","","10+",sliceV10],["Slice","","1-9",slice,parseSliceAttributes],["Softmax","","1-12",softmax,parseSoftmaxAttributes],["Softmax","","13+",softmaxV13,parseSoftmaxAttributesV13],["Split","","2-12",split,parseSplitAttributes],["Sqrt","","6+",sqrt],["Squeeze","","1-12",squeeze,parseSqueezeAttributes],["Squeeze","","13+",squeezeV13],["Sub","","7+",sub],["Sum","","6+",sum],["Tan","","7+",tan],["Tanh","","6+",tanh],["Tile","","6+",tile],["Transpose","","1+",transpose,parseTransposeAttributes],["Upsample","","7-8",upsample,parseUpsampleAttributesV7],["Upsample","","9",upsample,parseUpsampleAttributesV9],["Unsqueeze","","1-12",unsqueeze,parseUnsqueezeAttributes],["Unsqueeze","","13+",unsqueezeV13],["Xor","","7+",xor2]]}});function replaceInlines(t){let e,r={};for(;null!==(e=INLINE_FUNC_DEF_REGEX.exec(t));){let t=e[3].split(",").map(t=>{let e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null}).filter(t=>null!==t);r[e[2]]={params:t,body:e[4]}}for(let n in r){let i=RegExp(FUNC_CALL_REGEX.replace("__FUNC__",n),"gm");for(;null!==(e=i.exec(t));){let i=e[1],o=e[2],s=e[3].split(","),a=i?`${i} ${o};`:"",u=r[n].body,l="";r[n].params.forEach((t,e)=>{t&&(l+=`${t.type} ${t.name} = ${s[e]};
`)}),u=(u=`${l}
 ${u}`).replace("return",`${o} = `);let c=`
      ${a}
      {
        ${u}
      }
      `;t=t.replace(e[0],c)}}return t.replace(INLINE_FUNC_DEF_REGEX,"")}var init_glsl_function_inliner=__esm({"web/lib/onnxjs/backends/webgl/glsl-function-inliner.ts"(){"use strict";INLINE_FUNC_DEF_REGEX=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,FUNC_CALL_REGEX="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"}});function squeezeShape(t,e){let r=[],n=[],i=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||i?null:parseAxisParam(e,t).sort(),s=0;for(let e=0;e<t.length;++e){if(null!=o){if(o[s]===e&&1!==t[e])throw Error(`Can't squeeze axis ${e} since its dim '${t[e]}' is not 1`);(null==o[s]||o[s]>e)&&1===t[e]&&(r.push(t[e]),n.push(e)),o[s]<=e&&s++}1!==t[e]&&(r.push(t[e]),n.push(e))}return{newShape:r,keptDims:n}}function parseAxisParam(t,e){let r=e.length;return assert((t=null==t?e.map((t,e)=>e):[].concat(t)).every(t=>t>=-r&&t<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${t}`),assert(t.every(isInt),()=>`All values in axis param must be integers but got axis ${t}`),t.map(t=>t<0?r+t:t)}function isInt(t){return t%1==0}function sizeFromShape(t){if(0===t.length)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function sizeToSquarishShape(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var init_texture_layout_strategy=__esm({"web/lib/onnxjs/backends/webgl/texture-layout-strategy.ts"(){"use strict";init_instrument(),init_util(),PreferLogicalStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let r=this.computeTexture(t,e);return(e&&e.isPacked&&(r[0]/=2,r[1]/=2),e&&e.reverseWH)?[r[1],r[0]]:r}computeTexture(t,e){let r=e&&e.isPacked;if(0===t.length)return r?[2,2]:[1,1];let n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){let r=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((t,e)=>t*e),i=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((t,e)=>t*e);if(!(r>n)&&!(i>n))return[r,i];Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`)}let i=t.slice(0);r&&(n*=2,1===(i=i.map((t,e)=>e>=i.length-2?i[e]%2==0?i[e]:i[e]+1:i[e])).length&&(i=[2,i[0]])),2!==i.length&&(i=squeezeShape(i).newShape);let o=sizeFromShape(i);return i.length<=1&&o<=n?[1,o]:2===i.length&&i[0]<=n&&i[1]<=n?i:3===i.length&&i[0]*i[1]<=n&&i[2]<=n?[i[0]*i[1],i[2]]:3===i.length&&i[0]<=n&&i[1]*i[2]<=n?[i[0],i[1]*i[2]]:4===i.length&&i[0]*i[1]*i[2]<=n&&i[3]<=n?[i[0]*i[1]*i[2],i[3]]:4===i.length&&i[0]<=n&&i[1]*i[2]*i[3]<=n?[i[0],i[1]*i[2]*i[3]]:r?sizeToSquarishShape(o/4).map(t=>2*t):sizeToSquarishShape(o)}}}}),init_glsl_coordinate_lib=__esm({"web/lib/onnxjs/backends/webgl/glsl-coordinate-lib.ts"(){"use strict";init_util(),init_glsl_definitions(),init_glsl_source(),init_texture_layout_strategy(),init_utils(),CoordsGlslLib=class extends GlslLib{constructor(t){super(t)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new GlslLibRoutine(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new GlslLibRoutine(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},i="getOutputCoords";switch(e.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputPacked1DCoords(e,r);break;case 2:n[i]=this.getOutputPacked2DCoords(e,r);break;case 3:n[i]=this.getOutputPacked3DCoords(e,r);break;default:n[i]=this.getOutputPackedNDCoords(e,r)}let o=getGlsl(this.context.glContext.version),s=`
      void setOutput(vec4 val) {
        ${o.output} = val;
      }
    `;return n.floatTextureSetRGBA=new GlslLibRoutine(s),n}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},i="getOutputCoords";switch(e.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[i]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[i]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[i]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[i]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[i]=this.getOutputUnpacked6DCoords(e,r);break;default:throw Error(`Unsupported output dimensionality: ${e.length}`)}let o=getGlsl(this.context.glContext.version),s=`
        void setOutput(float val) {
          ${o.output} = vec4(val, 0, 0, 0);
        }
    `;return n.floatTextureSetR=new GlslLibRoutine(s),n}getOutputScalarCoords(){return new GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let r=e,n="";return 1===r[0]?n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `:1===r[1]?n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `:n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new GlslLibRoutine(n)}getOutputPacked2DCoords(t,e){let r="";if(ArrayUtil.arraysEqual(t,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new GlslLibRoutine(r);let n=e,i=Math.ceil(t[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${i}) * 2;
          int c = 2 * (index / ${i});

          return ivec2(r, c);
        }
      `,new GlslLibRoutine(r)}getOutputPacked3DCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[2]/2),i=n*Math.ceil(t[1]/2),o=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${i};
          index -= b * ${i};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new GlslLibRoutine(o)}getOutputPackedNDCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[t.length-1]/2),i=n*Math.ceil(t[t.length-2]/2),o=i,s="",a="b, r, c";for(let e=2;e<t.length-1;e++)o*=t[t.length-e-1],s=`
      int b${e} = index / ${o};
      index -= b${e} * ${o};
    `+s,a=`b${e}, `+a;let u=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${s}

        int b = index / ${i};
        index -= b * ${i};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${t.length}(${a});
      }
    `;return new GlslLibRoutine(u)}getOutputUnpacked1DCoords(t,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new GlslLibRoutine(r)}getOutputUnpacked2DCoords(t,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new GlslLibRoutine(r)}getOutputUnpacked3DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),(i=Array(n-1))[n-2]=t[n-1];for(let e=n-3;e>=0;--e)i[e]=i[e+1]*t[e+1];let o=["r","c","d"],s=i.map((t,e)=>{let r=`int ${o[e]} = index / ${t}`,n=e===i.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`;return`${r}; ${n};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${s}
          return ivec3(r, c, d);
        }
      `,new GlslLibRoutine(r)}getOutputUnpacked4DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),(i=Array(n-1))[n-2]=t[n-1];for(let e=n-3;e>=0;--e)i[e]=i[e+1]*t[e+1];let o=["r","c","d","d2"],s=i.map((t,e)=>{let r=`int ${o[e]} = index / ${t}`,n=e===i.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`;return`${r}; ${n};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${s}
          return ivec4(r, c, d, d2);
        }
      `,new GlslLibRoutine(r)}getOutputUnpacked5DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),(i=Array(n-1))[n-2]=t[n-1];for(let e=n-3;e>=0;--e)i[e]=i[e+1]*t[e+1];let o=["r","c","d","d2","d3"],s=i.map((t,e)=>{let r=`int ${o[e]} = index / ${t}`,n=e===i.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`;return`${r}; ${n};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${s}
          return ivec5(r, c, d, d2, d3);
        }
      `,new GlslLibRoutine(r)}getOutputUnpacked6DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),(i=Array(n-1))[n-2]=t[n-1];for(let e=n-3;e>=0;--e)i[e]=i[e+1]*t[e+1];let o=["r","c","d","d2","d3","d4"],s=i.map((t,e)=>{let r=`int ${o[e]} = index / ${t}`,n=e===i.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`;return`${r}; ${n};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${s}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new GlslLibRoutine(r)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),t[e="packedUVfrom1D"]=new GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t[e="packedUVfrom2D"]=new GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t[e="packedUVfrom3D"]=new GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=getGlsl(this.context.glContext.version);return t[e]=new GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n],o=generateShaderFuncNameFromInputSamplerName(r);i.isPacked?t[o]=this.getPackedSamplerFromInput(o,r,i):t[o]=this.getUnpackedSamplerFromInput(o,r,i);let s=generateShaderFuncNameFromInputSamplerNameAtOutCoords(r);i.unpackedShape.length<=e.unpackedShape.length&&(i.isPacked?t[s]=this.getPackedSamplerAtOutputCoords(s,i,e,r):t[s]=this.getUnpackedSamplerAtOutputCoords(s,i,e,r))}),t}getPackedSamplerAtOutputCoords(t,e,r,n){let i,o=e.unpackedShape,s=r.unpackedShape,a=generateShaderFuncNameFromInputSamplerName(n),u=o.length,l=s.length,c=BroadcastUtil.getBroadcastDims(o,s),d=getCoordsDataType(l),p=l-u,h=getGlChannels();i=0===u?"":l<2&&c.length>=1?"coords = 0;":c.map(t=>`coords.${h[t+p]} = 0;`).join("\n");let f="";f=l<2&&u>0?"coords":o.map((t,e)=>`coords.${h[e+p]}`).join(", ");let b="return outputValue;",g=1===ShapeUtil.size(o),m=1===ShapeUtil.size(s);if(1!==u||g||m){if(g&&!m)b=1===l?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(c.length){let t=u-2,e=u-1;c.indexOf(t)>-1&&c.indexOf(e)>-1?b="return vec4(outputValue.x);":c.indexOf(t)>-1?b="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(e)>-1&&(b="return vec4(outputValue.xx, outputValue.zz);")}}else b=`
        return vec4(outputValue.xy, outputValue.xy);
      `;let y=`
        int lastDim = coords.${h[l-1]};
        coords.${h[l-1]} = coords.${h[l-2]};
        coords.${h[l-2]} = lastDim;
      `,_=`
      vec4 ${t}() {
        ${d} coords = getOutputCoords();
        ${y}
        ${i}
        vec4 outputValue = ${a}(${f});
        ${b}
      }
    `;return new GlslLibRoutine(_,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,r,n){let i,o=[r.width,r.height],s=[e.width,e.height],a=e.unpackedShape.length,u=r.unpackedShape.length,l=e.unpackedShape,c=r.unpackedShape,d=generateShaderFuncNameFromInputSamplerName(n);if(a===u&&ArrayUtil.arraysEqual(s,o)){let e=`
          float ${t}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new GlslLibRoutine(e,["coordinates.sampleTexture"])}let p=getCoordsDataType(u),h=BroadcastUtil.getBroadcastDims(l,c),f=u-a,b=getGlChannels();i=0===a?"":u<2&&h.length>=1?"coords = 0;":h.map(t=>`coords.${b[t+f]} = 0;`).join("\n");let g="";g=u<2&&a>0?"coords":e.unpackedShape.map((t,e)=>`coords.${b[e+f]}`).join(", ");let m=`
        float ${t}() {
          ${p} coords = getOutputCoords();
          ${i}
          return ${d}(${g});
        }
      `;return new GlslLibRoutine(m,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,r);case 2:return this.getPackedSampler2D(t,e,r);case 3:return this.getPackedSampler3D(t,e,r);default:return this.getPackedSamplerND(t,e,r)}}getUnpackedSamplerFromInput(t,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(t,e,r);case 1:return this.getUnpackedSampler1D(t,e,r);case 2:return this.getUnpackedSampler2D(t,e,r);case 3:return this.getUnpackedSampler3D(t,e,r);case 4:return this.getUnpackedSampler4D(t,e,r);case 5:return this.getUnpackedSampler5D(t,e,r);case 6:return this.getUnpackedSampler6D(t,e,r);default:throw Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(t,e){let r=getGlsl(this.context.glContext.version),n=`
          vec4 ${t}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new GlslLibRoutine(n)}getPackedSampler1D(t,e,r){let n=[r.width,r.height],i=[n[1],n[0]],o=getGlsl(this.context.glContext.version),s=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${i[0]}, ${i[1]}, index);
      return ${o.texture2D}(${e}, uv);
    }`;return new GlslLibRoutine(s,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,r){let n=r.unpackedShape,i=[r.width,r.height],o=getGlsl(this.context.glContext.version),s=i[0],a=i[1];if(null!=i&&ArrayUtil.arraysEqual(n,i)){let r=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);
        return ${o.texture2D}(${e}, uv);
      }`;return new GlslLibRoutine(r)}let u=i,l=Math.ceil(n[1]/2),c=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u[1]}, ${u[0]}, ${l}, row, col);
      return ${o.texture2D}(${e}, uv);
    }`;return new GlslLibRoutine(c,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,r){let n=r.unpackedShape,i=[r.width,r.height],o=[i[0],i[1]],s=getGlsl(this.context.glContext.version);if(1===n[0]){let i=n.slice(1),o=[1,2],s=squeezeInputShape(n,i),a=["b","row","col"],u=JSON.parse(JSON.stringify(r));u.unpackedShape=s;let l=this.getPackedSamplerFromInput(t,e,u),c=`${l.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${getSqueezedParams(a,o)});
      } `;return new GlslLibRoutine(c,l.dependencies)}let a=o[0],u=o[1],l=Math.ceil(n[2]/2),c=l*Math.ceil(n[1]/2),d=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${a}, ${c}, ${l}, b, row, col);
      return ${s.texture2D}(${e}, uv);}`;return new GlslLibRoutine(d,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,r){let n=r.unpackedShape,i=n.length,o=[r.width,r.height],s=getGlsl(this.context.glContext.version),a=[o[0],o[1]],u=a[1],l=a[0],c=Math.ceil(n[i-1]/2),d=c*Math.ceil(n[i-2]/2),p="int b, int row, int col",h=`b * ${d} + (row / 2) * ${c} + (col / 2)`;for(let t=2;t<i-1;t++)p=`int b${t}, `+p,d*=n[i-t-1],h=`b${t} * ${d} + `+h;let f=`vec4 ${t}(${p}) {
      int index = ${h};
      int texR = index / ${l};
      int texC = index - texR * ${l};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${u});
      return ${s.texture2D}(${e}, uv);
    }`;return new GlslLibRoutine(f)}getUnpackedSamplerScalar(t,e,r){let[n,i]=[r.width,r.height];if(1===n&&1===i){let r=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new GlslLibRoutine(r,["coordinates.sampleTexture"])}let o=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${i});
          vec2 uv = uvFromFlat(${n}, ${i}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new GlslLibRoutine(o,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,r){let n=r.width,i=r.height;if(1===i&&1===n){let r=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new GlslLibRoutine(r,["coordinates.sampleTexture"])}if(1===i){let r=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new GlslLibRoutine(r,["coordinates.sampleTexture"])}if(1===n){let r=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${i}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new GlslLibRoutine(r,["coordinates.sampleTexture"])}let o=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${n}, ${i}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new GlslLibRoutine(o,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,r){let n=r.unpackedShape,i=[r.height,r.width];if(null!=i&&ArrayUtil.arraysEqual(n,i)){let r=i[1],n=i[0],o=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${r}.0, ${n}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new GlslLibRoutine(o,["coordinates.sampleTexture"])}let{newShape:o,keptDims:s}=squeezeShape(n),a=o;if(a.length<n.length){let i=squeezeInputShape(n,a),o=JSON.parse(JSON.stringify(r));o.unpackedShape=i;let u=["col","row"],l=`
          ${this.getUnpackedSamplerFromInput(t,e,o).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${getSqueezedParams(u,s)});
          }
        `;return new GlslLibRoutine(l,["coordinates.sampleTexture"])}let u=i[1],l=i[0];if(1===l){let r=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${u}, ${l});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new GlslLibRoutine(r,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===u){let r=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${u}, ${l});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new GlslLibRoutine(r,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let c=`
        float ${t}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${u}, ${l}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,r){let n=r.unpackedShape,i=n[1]*n[2],o=n[2],{newShape:s,keptDims:a}=squeezeShape(n),u=s;if(u.length<n.length){let i=squeezeInputShape(n,u),o=["batch","col","row"],s=JSON.parse(JSON.stringify(r));s.unpackedShape=i;let l=this.getUnpackedSamplerFromInput(t,e,s),c=a.reverse(),d=`
          ${l.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${getSqueezedParams(o,c)});
          }
        `;return new GlslLibRoutine(d,l.dependencies)}let l=r.width,c=r.height,d=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${i} + col * ${o} + row;
            vec2 uv = uvFromFlat(${l}, ${c}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new GlslLibRoutine(d,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,r){let n=r.unpackedShape,i=n[3],o=n[2]*i,s=n[1]*o,a=r.width,u=r.height,l=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${s} + col * ${o} +
              depth2 * ${i} + depth;
          vec2 uv = uvFromFlat(${a}, ${u}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new GlslLibRoutine(l,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,r){let n=r.unpackedShape,i=n[4],o=n[3]*i,s=n[2]*o,a=n[1]*s,{newShape:u,keptDims:l}=squeezeShape(n);if(u.length<n.length){let i=squeezeInputShape(n,u),o=["row","col","depth","depth2","depth3"],s=JSON.parse(JSON.stringify(r));s.unpackedShape=i;let a=`
          ${this.getUnpackedSamplerFromInput(t,e,s).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${getSqueezedParams(o,l)});
          }
        `;return new GlslLibRoutine(a,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let c=r.width,d=r.height,p=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${a} + col * ${s} + depth * ${o} +
          depth3 * ${i} + depth2;
          vec2 uv = uvFromFlat(${c}, ${d}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new GlslLibRoutine(p,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,r){let n=r.unpackedShape,i=n[5],o=n[4]*i,s=n[3]*o,a=n[2]*s,u=n[1]*a,{newShape:l,keptDims:c}=squeezeShape(n);if(l.length<n.length){let i=squeezeInputShape(n,l),o=["row","col","depth","depth2","depth3","depth4"],s=JSON.parse(JSON.stringify(r));s.unpackedShape=i;let a=`
            ${this.getUnpackedSamplerFromInput(t,e,s).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${getSqueezedParams(o,c)});
            }
          `;return new GlslLibRoutine(a,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let d=r.width,p=r.height,h=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${u} + col * ${a} + depth * ${s} +
            depth2 * ${o} + depth3 * ${i} + depth4;
            vec2 uv = uvFromFlat(${d}, ${p}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new GlslLibRoutine(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,r=t.strides,n=t.width,i=t.height,o=[];for(let t=0;t<e-1;++t)o.push(`
        c[${t}] = offset / ${r[t]};`),o.push(`
        offset -= c[${t}] * ${r[t]};`);o.push(`
        c[${e-1}] = offset;`);let s=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${i});
        ${o.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${o.join("")}
      }
    `;return{toVec:new GlslLibRoutine(s,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],i=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,o=`_${e}`;t[o]=new GlslLibRoutine(this.getValueFromSingle(e,i,n.width,n.height,!1),[`shapeUtils.indicesToOffset${o}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),t[o+="_T"]=new GlslLibRoutine(this.getValueFromSingle(e,i,n.width,n.height,!0),[`shapeUtils.indicesToOffset${o}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,r,n,i){let o=`_${t}`;i&&(o+="_T");let s=getGlsl(this.context.glContext.version);return`
        float ${o}(int m[${e}]) {
          int offset = indicesToOffset${o}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${s.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,r,n,i){let o=`_${t}_Pack`;i&&(o+="_T");let s=getGlsl(this.context.glContext.version);return`
        vec4 ${o}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${s.texture2D}(${t}, coords);
        }
        `}}}}),init_glsl_encoding_lib=__esm({"web/lib/onnxjs/backends/webgl/glsl-encoding-lib.ts"(){"use strict";init_glsl_definitions(),EncodingGlslLib=class t extends GlslLib{constructor(t){super(t)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=t.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=t.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let t=new ArrayBuffer(4),e=new Uint32Array(t),r=new Uint8Array(t);if(e[0]=0xdeadbeef,239===r[0])return!0;if(222===r[0])return!1;throw Error("unknown endianness")}}}}),init_glsl_fragcolor_lib=__esm({"web/lib/onnxjs/backends/webgl/glsl-fragcolor-lib.ts"(){"use strict";init_glsl_definitions(),init_glsl_source(),FragColorGlslLib=class extends GlslLib{constructor(t){super(t)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let t=getGlsl(this.context.glContext.version);return{setFragColor:new GlslLibRoutine(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}}),init_glsl_shape_utils_lib=__esm({"web/lib/onnxjs/backends/webgl/glsl-shape-utils-lib.ts"(){"use strict";init_glsl_definitions(),ShapeUtilsGlslLib=class t extends GlslLib{constructor(t){super(t)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].unpackedShape;if(i.length<=t){let n=i.length,o=t-n,s=`bcastIndices_${r}`,a="";for(let t=0;t<n;++t)a+=`
          realIndices[${t}] = int( mod(float(bcastedIndices[${o+t}]), ${i[t]}.0) );
          `;let u=`
        void ${s} (int bcastedIndices[${t}], out int realIndices[${n}]) {
          ${a}
        }
        `;e[s]=new GlslLibRoutine(u)}}),e}bcastMatmulIndex(){let t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape;if(!(i.length<2||i.length>t)){let n=i.length,o=t-n,s=`bcastMatmulIndices_${r}`,a="";for(let t=0;t<n-2;++t)a+=`
          realIndices[${t}] = int( mod(float(bcastedIndices[${o+t}]), ${i[t]}.0) );
          `;let u=`
        void ${s}(int bcastedIndices[${t}], out int realIndices[${n}]) {
          ${a}
          realIndices[${n-1}] = bcastedIndices[${t-1}];
          realIndices[${n-2}] = bcastedIndices[${t-2}];
        }
        `;e[s]=new GlslLibRoutine(u)}}),e}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,o=this.context.inputTextureLayouts[n].strides,s=i.length,a=`indicesToOffset_${r}`;e[a]=new GlslLibRoutine(t.indexToOffsetSingle(a,s,o)),e[a=`indicesToOffset_${r}_T`]=new GlslLibRoutine(t.indexToOffsetSingle(a,s,o.slice().reverse()))}),e}static indexToOffsetSingle(t,e,r){let n="";for(let t=e-1;t>=0;--t)n+=`
        offset += indices[${t}] * ${r[t]};
        `;return`
      int ${t}(int indices[${e}]) {
        int offset = 0;
        ${n}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,o=this.context.inputTextureLayouts[n].strides,s=i.length,a=`offsetToIndices_${r}`;e[a]=new GlslLibRoutine(t.offsetToIndicesSingle(a,s,o)),e[a=`offsetToIndices_${r}_T`]=new GlslLibRoutine(t.offsetToIndicesSingle(a,s,o.slice().reverse()))}),e}static offsetToIndicesSingle(t,e,r){let n=[];for(let t=0;t<e-1;++t)n.push(`
      indices[${t}] = offset / ${r[t]};`),n.push(`
        offset -= indices[${t}] * ${r[t]};`);return n.push(`
      indices[${e-1}] = offset;`),`
      void ${t}(int offset, out int indices[${e}]) {
        ${n.join("")}
      }
      `}incrementIndices(){let t={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r].shape,i=n.length,o=`incrementIndices_${e}`,s="";for(let t=0;t<i;++t)s+=`
        shape[${t}] = ${n[t]};`;let a=`
        void ${o}(int axis, out int indices[${i}]) {
          int shape[${i}];
          ${s};
          for(int i = ${i} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;t[o]=new GlslLibRoutine(a)}),t}}}}),init_glsl_vec_lib=__esm({"web/lib/onnxjs/backends/webgl/glsl-vec-lib.ts"(){"use strict";init_glsl_definitions(),VecGlslLib=class extends GlslLib{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let i=`${n}Vec`,o="";for(let r=0;r<t;++r)o+=`
          dest[${r}] ${e[n]} src[${r}];
          `;let s=`
        void ${i}(int src[${t}], out int dest[${t}]) {
          ${o}
        }
        `;r[i]=new GlslLibRoutine(s)}return r}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let r=0;r<t;++r)e+=`
        dest[${r}] = src[${r}];
        `;let r=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new GlslLibRoutine(r)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let r=1;r<t-1;++r)e+=`
        else if (index == ${r})
            m[${r}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let r=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new GlslLibRoutine(r)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let r=1;r<t-1;++r)e+=`
        else if (index == ${r})
            return m[${r}];
      `;e+=`
        else
            return m[${t-1}];
        `;let r=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new GlslLibRoutine(r)}}}}}),init_glsl_registered_libs=__esm({"web/lib/onnxjs/backends/webgl/glsl-registered-libs.ts"(){"use strict";init_glsl_coordinate_lib(),init_glsl_encoding_lib(),init_glsl_fragcolor_lib(),init_glsl_shape_utils_lib(),init_glsl_vec_lib(),glslRegistry={encoding:EncodingGlslLib,fragcolor:FragColorGlslLib,vec:VecGlslLib,shapeUtils:ShapeUtilsGlslLib,coordinates:CoordsGlslLib}}}),init_glsl_preprocessor=__esm({"web/lib/onnxjs/backends/webgl/glsl-preprocessor.ts"(){"use strict";init_glsl_definitions(),init_glsl_function_inliner(),init_glsl_registered_libs(),init_glsl_source(),GlslPreprocessor=class{constructor(t,e,r,n){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new GlslContext(t,e,r,n),Object.keys(glslRegistry).forEach(t=>{let e=new glslRegistry[t](this.context);this.libs[t]=e});let i=this.glslLibRoutineDependencyGraph;for(let t in this.libs){let e=this.libs[t].getFunctions();for(let r in e){let n,o=t+"."+r;i[o]?(n=i[o]).routineBody=e[r].routineBody:(n=new GlslLibRoutineNode(o,e[r].routineBody),i[o]=n);let s=e[r].dependencies;if(s)for(let t=0;t<s.length;++t)if(i[s[t]])n.addDependency(i[s[t]]);else{let e=new GlslLibRoutineNode(s[t]);i[s[t]]=e,n.addDependency(e)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${getDefaultFragShaderMain(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=replaceInlines(e),`${getFragShaderPreamble(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";let r="";for(let t=0;t<e.length;++t)if(e[t].routineBody)r+=e[t].routineBody+"\n";else throw Error(`Missing body for the Glsl Library routine: ${e[t].name}`);return r}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let n=r.split(".")[1];-1!==t.indexOf(n)&&e.push(this.glslLibRoutineDependencyGraph[r])}),TopologicalSortGlslRoutines.returnOrderedNodes(e)}getUniforms(t,e){let r=[];if(t)for(let e of t)r.push(`uniform sampler2D ${e};`);if(e)for(let t of e)r.push(`uniform ${t.type} ${t.name}${t.arrayLength?`[${t.arrayLength}]`:""};`);return r.join("\n")}}}}),init_program_manager=__esm({"web/lib/onnxjs/backends/webgl/program-manager.ts"(){"use strict";init_esm(),init_instrument(),init_glsl_preprocessor(),init_glsl_source(),ProgramManager=class{constructor(t,e,r){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,r){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let n=this.glContext.gl,i=t.program;n.useProgram(i);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(e){throw Logger.error("ProgramManager",t.programInfo.shaderSource),e}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,r){return this.profiler.event("backend","ProgramManager.build",()=>{let n=new GlslPreprocessor(this.glContext,t,e,r),i=n.preprocess(),o=this.compile(i);return{programInfo:t,program:o,uniformLocations:this.getUniformLocations(o,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:this.getAttribLocations(o)}})}compile(t){if(!this.vertexShader){Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let t=getVertexShaderSource(this.glContext.version);this.vertexShader=this.glContext.compileShader(t,this.glContext.gl.VERTEX_SHADER)}env2.debug&&Logger.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),r}bindOutput(t){let e=t.width,r=t.height;Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${r}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,r)}bindAttributes(t){let e=t.position,r=t.textureCoord;this.glContext.setVertexAttributes(e,r),this.attributesBound=!0}bindUniforms(t,e,r){let n=this.glContext.gl,i=0;for(let{name:o,type:s,location:a,arrayLength:u}of t){let t=e.find(t=>t.name===o)?.data;if("sampler2D"!==s&&!t)throw Error(`variable '${o}' does not have data defined in program info`);switch(s){case"sampler2D":this.bindTexture(r[i],a,i),i++;break;case"float":u?n.uniform1fv(a,t):n.uniform1f(a,t);break;case"int":u?n.uniform1iv(a,t):n.uniform1i(a,t);break;default:throw Error(`Uniform not implemented: ${s}`)}}}bindTexture(t,e,r){this.glContext.bindTextureToUniform(t.texture,r,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,r){let n=[];if(e)for(let r of e)n.push({name:r,type:"sampler2D",location:this.getUniformLocation(t,r)});if(r)for(let e of r)n.push({...e,location:this.getUniformLocation(t,e.name)});return n}getUniformLocation(t,e){let r=this.glContext.gl.getUniformLocation(t,e);if(null===r)throw Error(`Uniform ${e} not found.`);return r}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}}),init_texture_manager=__esm({"web/lib/onnxjs/backends/webgl/texture-manager.ts"(){"use strict";init_instrument(),init_texture_data_encoder(),TextureManager=class{constructor(t,e,r,n){this.glContext=t,this.layoutStrategy=e,this.profiler=r,this.config=n,this.pendingRead=new Map,n.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,r,n){let i,o,s=this.toEncoderType(t),a=this.glContext.getEncoder(s,e.channels||1,n);if(e.isPacked&&1===n)throw Error("not implemented");let u=e.width,l=e.height;if(this.config.reuseTextures){i=`${u}x${l}_${a.format}_${a.internalFormat}_${a.textureType}`,(o=this.inUseTextures.get(i))||(o=[],this.inUseTextures.set(i,o));let e=this.idleTextures.get(i);if(e&&e.length>0){let i=e.pop();return o.push(i),1===n&&this.glContext.updateTexture(i,u,l,a,this.toTextureData(t,r)),i}}Logger.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let c=this.glContext.allocateTexture(u,l,a,this.toTextureData(t,r));return this.config.reuseTextures&&(o.push(c),this.textureLookup.set(c,i)),c}readTexture(t,e,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let n=t.shape.reduce((t,e)=>t*e)*r,i=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(e),r);return this.toTensorData(e,i)})}async readTextureAsync(t,e,r){let n=t.tensor.dataId;if(r||(r=1),this.pendingRead.has(n)){let t=this.pendingRead.get(n);return new Promise(e=>t?.push(e))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(n,[]);let i=t.shape.reduce((t,e)=>t*e)*r;await this.glContext.createAndWaitForFence();let o=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),r),s=this.toTensorData(e,o),a=this.pendingRead.get(n);return this.pendingRead.delete(n),a?.forEach(t=>t(s)),s})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((t,e)=>t*e),r=this.glContext.readTexture(t.texture,t.width,t.height,4*e,"byte",4);return new Float32Array(r.buffer,r.byteOffset,e)})}releaseTexture(t,e){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(t.texture))){e&&this.textureLookup.delete(r);let n=this.inUseTextures.get(r);if(n){let e=n.indexOf(t.texture);if(-1!==e){n.splice(e,1);let i=this.idleTextures.get(r);i||(i=[],this.idleTextures.set(r,i)),i.push(t.texture)}}}(!r||e)&&(Logger.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}}),init_session_handler=__esm({"web/lib/onnxjs/backends/webgl/session-handler.ts"(){"use strict";init_instrument(),init_opset(),init_inference_handler(),init_op_resolve_rules(),init_program_manager(),init_texture_layout_strategy(),init_texture_manager(),WebGLSessionHandler=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new WebGLInferenceHandler(this)}onGraphInitialized(t){let e=t.getValues().filter(t=>-1===t.from&&t.tensor).map(t=>t.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return!!this.initializers&&this.initializers.has(t)}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,r){let n=resolveOperator(t,e,WEBGL_OP_RESOLVE_RULES);return{impl:n.opImpl,context:n.opInit?n.opInit(t,r):t}}}}});function linearSearchLastTrue(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var init_webgl_context=__esm({"web/lib/onnxjs/backends/webgl/webgl-context.ts"(){"use strict";init_esm(),init_texture_data_encoder(),init_texture_data_encoder(),init_utils(),WebGLContext=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,r,n){let i=this.gl,o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);let s=n?r.encode(n,t*e):null;return i.texImage2D(i.TEXTURE_2D,0,r.internalFormat,t,e,0,r.format,r.textureType,s),this.checkError(),o}updateTexture(t,e,r,n,i){let o=this.gl;o.bindTexture(o.TEXTURE_2D,t);let s=n.encode(i,e*r);o.texSubImage2D(o.TEXTURE_2D,0,0,0,e,r,n.format,n.textureType,s),this.checkError()}attachFramebuffer(t,e,r){let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.checkError(),n.viewport(0,0,e,r),n.scissor(0,0,e,r)}readTexture(t,e,r,n,i,o){let s=this.gl;o||(o=1),this.frameBufferBound||this.attachFramebuffer(t,e,r);let a=this.getEncoder(i,o),u=a.allocate(e*r);return s.bindTexture(s.TEXTURE_2D,t),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0),s.readPixels(0,0,e,r,s.RGBA,a.textureType,u),this.checkError(),a.decode(u,n)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl,e=t.getParameter(this.gl.ACTIVE_TEXTURE);return`TEXTURE${e-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let r=this.gl;r.vertexAttribPointer(t,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(t),-1!==e&&(r.vertexAttribPointer(e,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let r=this.gl,n=r.createProgram();return r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),n}compileShader(t,e){let r=this.gl,n=r.createShader(e);if(!n)throw Error(`createShader() returned null with type ${e}`);if(r.shaderSource(n,t),r.compileShader(n),!1===r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Failed to compile shader: ${r.getShaderInfoLog(n)}
Shader source:
${t}`);return n}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,r){let n=this.gl;n.activeTexture(n.TEXTURE0+e),this.checkError(),n.bindTexture(n.TEXTURE_2D,t),this.checkError(),n.uniform1i(r,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(env2.debug){let t=this.gl,e=t.getError(),r="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:r="INVALID_ENUM";break;case t.INVALID_VALUE:r="INVALID_VALUE";break;case t.INVALID_OPERATION:r="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${e.toString(16)}`}throw Error(r)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,r=0){if(2===this.version)return new RedFloat32DataEncoder(this.gl,e);switch(t){case"float":if(1===r||this.isRenderFloat32Supported)return new RGBAFloatDataEncoder(this.gl,e);return new RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw Error("not implemented");case"byte":return new Uint8DataEncoder(this.gl,e);default:throw Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw Error("createBuffer() returned null");let r=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let r=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,r,1,1,0,t.RGBA,t.FLOAT,null);let n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(n),i}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t,e,r,n,i,o=this.gl;try{t=o.createTexture(),e=o.createFramebuffer(),o.bindTexture(o.TEXTURE_2D,t);let s=2===this.version?o.RGBA32F:o.RGBA;if(o.texImage2D(o.TEXTURE_2D,0,s,1,1,0,o.RGBA,o.FLOAT,null),o.bindFramebuffer(o.FRAMEBUFFER,e),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),o.enable(o.BLEND),!(r=o.createShader(o.VERTEX_SHADER))||(o.shaderSource(r,"void main(){}"),o.compileShader(r),!(n=o.createShader(o.FRAGMENT_SHADER)))||(o.shaderSource(n,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),o.compileShader(n),!(i=o.createProgram())))return!1;return o.attachShader(i,r),o.attachShader(i,n),o.linkProgram(i),o.useProgram(i),o.drawArrays(o.POINTS,0,1),o.getError()===o.NO_ERROR}finally{o.disable(o.BLEND),i&&o.deleteProgram(i),r&&o.deleteShader(r),n&&o.deleteShader(n),e&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(e)),t&&(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(t))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}throw Error("WebGL1 profiling currently not supported.")}endTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}throw Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,r=!1;if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let n=this.gl,i=this.disjointTimerQueryWebgl2Extension;e=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(i.GPU_DISJOINT_EXT)}else throw Error("WebGL1 profiling currently not supported");return e&&!r}getTimerResult(t){let e=0;if(2===this.version){let r=this.gl;e=r.getQueryParameter(t,r.QUERY_RESULT),r.deleteQuery(t)}else throw Error("WebGL1 profiling currently not supported");return e/1e6}async waitForQueryAndGetTime(t){return await repeatedTry(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,r=t,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),e=null===n?()=>!0:()=>{let t=r.clientWaitSync(n,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},{query:n,isFencePassed:e}}async pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){let t=linearSearchLastTrue(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||await repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}}}});function createWebGLContext(t){let e;if((!t||"webgl2"===t)&&"webgl2"in cache?e=cache.webgl2:(!t||"webgl"===t)&&"webgl"in cache&&(e=cache.webgl),!e)try{let r=createOffscreenCanvas();e=createNewWebGLContext(r,t)}catch(r){e=createNewWebGLContext(createCanvas(),t)}t=t||1===e.version?"webgl":"webgl2";let r=e.gl;return(cache[t]=e,r.isContextLost())?(delete cache[t],createWebGLContext(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),e)}function createNewWebGLContext(t,e){let r,n={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!e||"webgl2"===e)&&(r=t.getContext("webgl2",n)))try{return new WebGLContext(r,2)}catch(t){Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${t}`)}if((!e||"webgl"===e)&&(r=t.getContext("webgl",n)||t.getContext("experimental-webgl",n)))try{return new WebGLContext(r,1)}catch(t){Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${t}`)}throw Error("WebGL is not supported")}function createCanvas(){if("undefined"==typeof document)throw TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function createOffscreenCanvas(){if("undefined"==typeof OffscreenCanvas)throw TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var init_webgl_context_factory=__esm({"web/lib/onnxjs/backends/webgl/webgl-context-factory.ts"(){"use strict";init_instrument(),init_webgl_context(),cache={}}}),init_backend_webgl=__esm({"web/lib/onnxjs/backends/backend-webgl.ts"(){"use strict";init_esm(),init_instrument(),init_session_handler(),init_webgl_context_factory(),WebGLBackend=class{get contextId(){return env2.webgl.contextId}set contextId(t){env2.webgl.contextId=t}get matmulMaxBatchSize(){return env2.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){env2.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return env2.webgl.textureCacheMode}set textureCacheMode(t){env2.webgl.textureCacheMode=t}get pack(){return env2.webgl.pack}set pack(t){env2.webgl.pack=t}get async(){return env2.webgl.async}set async(t){env2.webgl.async=t}initialize(){try{return this.glContext=createWebGLContext(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),Logger.setWithEnv(env2),env2.webgl.context||Object.defineProperty(env2.webgl,"context",{value:this.glContext.gl}),Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new WebGLSessionHandler(this,t)}dispose(){this.glContext.dispose()}}}});async function resolveBackend(t){if(!t)return resolveBackend(["webgl"]);for(let e of"string"==typeof t?[t]:t){let t=backendsCache.get(e);if(t)return t;let r=await tryLoadBackend(e);if(r)return r}throw Error("no available backend to use")}async function tryLoadBackend(t){let e=backend;if(void 0!==e[t]&&isBackend(e[t])){let r=e[t],n=r.initialize();if("object"==typeof n&&"then"in n&&(n=await n),n)return backendsCache.set(t,r),r}}function isBackend(t){let e=t;return"initialize"in e&&"function"==typeof e.initialize&&"createSessionHandler"in e&&"function"==typeof e.createSessionHandler&&"dispose"in e&&"function"==typeof e.dispose}var init_backend2=__esm({"web/lib/onnxjs/backend.ts"(){"use strict";init_backend_webgl(),backendsCache=new Map,backend={webgl:new WebGLBackend}}}),init_execution_plan=__esm({"web/lib/onnxjs/execution-plan.ts"(){"use strict";init_instrument(),KernelOp=class{constructor(t,e){this.op=t,this.node=e}},ExecutionPlan=class{constructor(t,e,r){this.graph=t,this.profiler=r,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw Error("The size of nodes and OPs do not match.");this._ops=t.map((t,r)=>new KernelOp(t,e[r])),this.reset(),this._starter=[],this._ops.forEach((t,e)=>{let r=!0;for(let e of t.node.inputs)if(!this._values[e]&&-1===this.graph.getInputIndices().indexOf(e)){r=!1;break}r&&this._starter.push(e)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,e){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let r=t.createInferenceHandler(),n=this.graph.getInputIndices();if(e.length!==n.length)throw Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${n.length}`);e.forEach((t,e)=>{let r=n[e];this._values[r]=t});let i=this._starter.slice(0),o=this.graph.getValues(),s=this.graph.getNodes(),a=0;for(;a<i.length;){let t=i[a++],e=this._ops[t],n=e.node.inputs.map(t=>this._values[t]);if(-1!==n.indexOf(void 0))throw Error(`unresolved input detected: op: ${e.node}`);let u=n;Logger.verbose("ExecPlan",`Running op:${e.node.name} (${u.map((t,r)=>`'${e.node.inputs[r]}': ${t.type}[${t.dims.join(",")}]`).join(", ")})`);let l=await this.profiler.event("node",e.node.name,async()=>e.op.impl(r,u,e.op.context));if(l.length!==e.node.outputs.length)throw Error("the size of output does not match model definition.");l.forEach((t,r)=>{let n=e.node.outputs[r];if(this._values[n])throw Error(`output [${n}] already has value: op:${e.node.name}`);this._values[n]=t});let c=new Set;l.forEach((t,r)=>{for(let t of o[e.node.outputs[r]].to){let e=s[t],r=!0;for(let t of e.inputs)if(!this._values[t]){r=!1;break}r&&c.add(t)}}),i.push(...c)}let u=[];for(let t=0;t<this.graph.getOutputIndices().length;t++){let e=this.graph.getOutputIndices()[t],r=this._values[e];if(void 0===r)throw Error(`required output [${e}] does not have value`);0===e?await r.getData():r.data,u.push(r)}return Logger.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),u})}}}}),init_attribute=__esm({"web/lib/onnxjs/attribute.ts"(){"use strict";init_ort_generated(),import_onnx3=__toESM(require_onnx()),init_tensor2(),init_util(),Attribute2=class t{constructor(e){if(this._attributes=new Map,null!=e){for(let r of e)r instanceof import_onnx3.onnx.AttributeProto?this._attributes.set(r.name,[t.getValue(r),t.getType(r)]):r instanceof import_attribute.Attribute&&this._attributes.set(r.name(),[t.getValue(r),t.getType(r)]);if(this._attributes.size<e.length)throw Error("duplicated attribute names")}}set(t,e,r){this._attributes.set(t,[r,e])}delete(t){this._attributes.delete(t)}getFloat(t,e){return this.get(t,"float",e)}getInt(t,e){return this.get(t,"int",e)}getString(t,e){return this.get(t,"string",e)}getTensor(t,e){return this.get(t,"tensor",e)}getFloats(t,e){return this.get(t,"floats",e)}getInts(t,e){return this.get(t,"ints",e)}getStrings(t,e){return this.get(t,"strings",e)}getTensors(t,e){return this.get(t,"tensors",e)}get(t,e,r){let n=this._attributes.get(t);if(void 0===n){if(void 0!==r)return r;throw Error(`required attribute not found: ${t}`)}if(n[1]!==e)throw Error(`type mismatch: expected ${e} but got ${n[1]}`);return n[0]}static getType(t){let e=t instanceof import_onnx3.onnx.AttributeProto?t.type:t.type();switch(e){case import_onnx3.onnx.AttributeProto.AttributeType.FLOAT:return"float";case import_onnx3.onnx.AttributeProto.AttributeType.INT:return"int";case import_onnx3.onnx.AttributeProto.AttributeType.STRING:return"string";case import_onnx3.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case import_onnx3.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case import_onnx3.onnx.AttributeProto.AttributeType.INTS:return"ints";case import_onnx3.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case import_onnx3.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw Error(`attribute type is not supported yet: ${import_onnx3.onnx.AttributeProto.AttributeType[e]}`)}}static getValue(t){let e=t instanceof import_onnx3.onnx.AttributeProto?t.type:t.type();if(e===import_onnx3.onnx.AttributeProto.AttributeType.GRAPH||e===import_onnx3.onnx.AttributeProto.AttributeType.GRAPHS)throw Error("graph attribute is not supported yet");let r=this.getValueNoCheck(t);if(e===import_onnx3.onnx.AttributeProto.AttributeType.INT&&LongUtil.isLong(r))return LongUtil.longToNumber(r);if(e===import_onnx3.onnx.AttributeProto.AttributeType.INTS){let t=r,e=Array(t.length);for(let r=0;r<t.length;r++){let n=t[r];e[r]=LongUtil.longToNumber(n)}return e}if(e===import_onnx3.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof import_onnx3.onnx.AttributeProto?Tensor4.fromProto(r):Tensor4.fromOrtTensor(r);if(e===import_onnx3.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof import_onnx3.onnx.AttributeProto)return r.map(t=>Tensor4.fromProto(t));else if(t instanceof import_attribute.Attribute)return r.map(t=>Tensor4.fromOrtTensor(t))}return e===import_onnx3.onnx.AttributeProto.AttributeType.STRING&&t instanceof import_onnx3.onnx.AttributeProto?decodeUtf8String(r):e===import_onnx3.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof import_onnx3.onnx.AttributeProto?r.map(decodeUtf8String):r}static getValueNoCheck(t){return t instanceof import_onnx3.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case import_onnx3.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case import_onnx3.onnx.AttributeProto.AttributeType.INT:return t.i;case import_onnx3.onnx.AttributeProto.AttributeType.STRING:return t.s;case import_onnx3.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case import_onnx3.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case import_onnx3.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case import_onnx3.onnx.AttributeProto.AttributeType.INTS:return t.ints;case import_onnx3.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case import_onnx3.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case import_onnx3.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw Error(`unsupported attribute type: ${import_onnx3.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case import_attribute_type.AttributeType.FLOAT:return t.f();case import_attribute_type.AttributeType.INT:return t.i();case import_attribute_type.AttributeType.STRING:return t.s();case import_attribute_type.AttributeType.TENSOR:return t.t();case import_attribute_type.AttributeType.GRAPH:return t.g();case import_attribute_type.AttributeType.FLOATS:return t.floatsArray();case import_attribute_type.AttributeType.INTS:{let e=[];for(let r=0;r<t.intsLength();r++)e.push(t.ints(r));return e}case import_attribute_type.AttributeType.STRINGS:{let e=[];for(let r=0;r<t.stringsLength();r++)e.push(t.strings(r));return e}case import_attribute_type.AttributeType.TENSORS:{let e=[];for(let r=0;r<t.tensorsLength();r++)e.push(t.tensors(r));return e}default:throw Error(`unsupported attribute type: ${import_attribute_type.AttributeType[t.type()]}`)}}}}}),init_graph=__esm({"web/lib/onnxjs/graph.ts"(){"use strict";init_attribute(),init_ort_generated(),import_onnx4=__toESM(require_onnx()),init_tensor2(),init_util(),Graph2={from:(t,e)=>new GraphImpl(t,e)},Value=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},Node2=class{constructor(t,e){t instanceof import_onnx4.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new Attribute2(t.attribute)):t instanceof import_node.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new Attribute2(ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},GraphImpl=class{constructor(t,e){if(!t)throw TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof import_onnx4.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof import_graph.Graph)this.buildGraphFromOrtFormat(t);else throw TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!t.input)throw Error("missing information in graph: input");let n=[];for(let r of t.input){if(e.has(r.name))throw Error(`duplicated input name: ${r.name}`);let t=this._allData.push(new Value(r))-1;e.set(r.name,t),n.push(r.name)}if(!t.initializer)throw Error("missing information in graph: initializer");for(let r of t.initializer){let t=e.get(r.name);if(void 0===t){let n=new Value;n.type={shape:{dims:ProtoUtil.tensorDimsFromProto(r.dims)},tensorType:ProtoUtil.tensorDataTypeFromProto(r.dataType)},t=this._allData.push(n)-1,e.set(r.name,t)}this._allData[t]._from=-1,this._allData[t].tensor=Tensor4.fromProto(r)}for(let t=0;t<this._allData.length;t++)this._allData[t].tensor||(this._allInputIndices.push(t),this._allInputNames.push(n[t]));if(!t.output)throw Error("missing information in graph: output");for(let r of t.output){if(e.has(r.name))throw Error(`duplicated output name: ${r.name}`);let t=this._allData.push(new Value(r))-1;e.set(r.name,t),this._allOutputIndices.push(t),this._allOutputNames.push(r.name)}if(!t.node)throw Error("missing information in graph: node");for(let e of t.node){if(!e.name)for(let t=0;;t++){let n=`unnamed_${e.opType}_${t}`;if(!r.has(n)){e.name=n;break}}if(r.has(e.name))throw Error(`duplicated node name: ${e.name}`);let t=this._nodes.push(new Node2(e))-1;r.set(e.name,t)}for(let r=0;r<this._nodes.length;r++){let n=this._nodes[r],i=t.node[r];if(!i.output)throw Error(`missing output for node: ${i.name}`);for(let t of i.output){let o=e.get(t);if(void 0===o&&(o=this._allData.push(new Value)-1,e.set(t,o)),n.outputs.push(o),void 0!==this._allData[o]._from)throw Error(`multiple nodes output to one data value: ${o}`);if(this._allData[o]._from=r,"Constant"===i.opType){if(!i.attribute||1!==i.attribute.length||!i.attribute[0].t)throw Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!i.output||1!==i.output.length)throw Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=Tensor4.fromProto(i.attribute[0].t)}}}for(let r=0;r<this._nodes.length;r++){let n=this._nodes[r],i=t.node[r];if(!i.input)throw Error(`missing input for node: ${i.name}`);for(let t of i.input){let o=e.get(t);if(void 0===o){if(""===t&&(3===i.input.length||4===i.input.length)&&"Resize"===i.opType)continue;throw Error(`unrecognized input '${t}' for node: ${i.name}`)}n.inputs.push(o),this._allData[o]._to.push(r)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map,n=[];for(let r=0;r<t.inputsLength();r++){let i=t.inputs(r);if(e.has(i))throw Error(`duplicated input name: ${i}`);for(let r=0;r<t.nodeArgsLength();r++)if(t.nodeArgs(r)?.name()===i){let o=new Value;if(t.nodeArgs(r)?.type()?.valueType()!==import_type_info_value.TypeInfoValue.tensor_type)throw Error("Unexpected value type for the nodeArg.");let s=t.nodeArgs(r).type().value(new import_tensor_type_and_shape.TensorTypeAndShape),a=ProtoUtil.tensorDataTypeFromProto(s.elemType()),u=s.shape(),l=[];for(let t=0;t<u.dimLength();t++)l.push(LongUtil.longToNumber(u.dim(t).value().dimValue()));o.type={shape:{dims:l},tensorType:a};let c=this._allData.push(o)-1;e.set(i,c),n.push(i)}}for(let r=0;r<t.initializersLength();r++){let n=t.initializers(r),i=e.get(n.name());if(void 0===i){let t=new Value;t.type={shape:{dims:ProtoUtil.tensorDimsFromORTFormat(n)},tensorType:ProtoUtil.tensorDataTypeFromProto(n.dataType())},i=this._allData.push(t)-1,e.set(n.name(),i)}this._allData[i]._from=-1,this._allData[i].tensor=Tensor4.fromOrtTensor(n)}for(let t=0;t<this._allData.length;t++)this._allData[t].tensor||(this._allInputIndices.push(t),this._allInputNames.push(n[t]));for(let r=0;r<t.outputsLength();r++){let n=t.outputs(r);if(e.has(n))throw Error(`duplicated output name: ${n}`);let i=this._allData.push(new Value)-1;e.set(n,i),this._allOutputIndices.push(i),this._allOutputNames.push(n)}if(!t.nodes)throw Error("missing information in graph: node");for(let e=0;e<t.nodesLength();e++){let n=t.nodes(e),i=n.name();if(!i)for(let t=0;i=`unnamed_${n.opType()}_${t}`,r.has(i);t++);if(r.has(i))throw Error(`duplicated node name: ${i}`);let o=this._nodes.push(new Node2(n,i))-1;r.set(i,o)}for(let r=0;r<this._nodes.length;r++){let n=this._nodes[r],i=t.nodes(r);if(null==i)throw Error(`No node exists at index ${r}`);if(i?.outputsLength()===0)throw Error(`missing output for node: ${i.name}`);for(let t=0;t<i?.outputsLength();t++){let o=i?.outputs(t),s=e.get(o);if(void 0===s&&(s=this._allData.push(new Value)-1,e.set(o,s)),n.outputs.push(s),void 0!==this._allData[s]._from)throw Error(`multiple nodes output to one data value: ${s}`);if(this._allData[s]._from=r,"Constant"===i.opType()){if(1!==i.attributesLength()||!i.attributes(0).t())throw Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==i.outputsLength())throw Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[s]._from=-1,this._allData[s].tensor=Tensor4.fromOrtTensor(i.attributes(0).t())}}}for(let r=0;r<this._nodes.length;r++){let n=this._nodes[r],i=t.nodes(r);if(0===i.inputsLength())throw Error(`missing input for node: ${i.name}`);for(let t=0;t<i.inputsLength();t++){let o=i.inputs(t),s=e.get(o);if(void 0===s)throw Error(`unrecognized input '${o}' for node: ${i.name()}`);n.inputs.push(s),this._allData[s]._to.push(r)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(e=>{this._allData[e]._to.forEach(e=>{t.add(e)})});let e=Array.from(t),r=Array(this._nodes.length).fill("white");for(;e.length>0;){let t=e.pop();"gray"===r[t]?r[t]="black":(e.push(t),r[t]="gray",this._nodes[t].outputs.forEach(n=>{let i=this._allData[n];if(void 0!==i.tensor)throw Error("node outputs should not be initialized");if(i._from!==t)throw Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach(t=>{if("gray"===r[t])throw Error("model graph is cyclic");"white"===r[t]&&e.push(t)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=[this._nodes.length,0],r=0;for(let t=0;t<this._nodes.length;t++)e[t]=r,this._nodes[t].executeNode?(r!==t&&(this._nodes[r]=this._nodes[t]),r++):this._nodes[t].outputs.forEach(t=>{this._allData[t]._from=-2});this._nodes.splice(r,this._nodes.length-r);for(let t=0;t<this._allData.length;t++){let r=this._allData[t];void 0!==r._from&&-1!==r._from&&-2!==r._from&&(r._from=e[r._from]);for(let t=0;t<r._to.length;t++)if(r._to[t]>=0)r._to[t]=e[r._to[t]];else throw Error("Trying to update a removed node")}t=0;for(let e=0;e<this._allData.length;e++){if(-2===this._allData[e].from&&-1===this._allOutputIndices.indexOf(e+t)){t++,this._allData.splice(e,1),e--;continue}if(t>0){let r=-1;void 0!==this._allData[e].from&&-1!==this._allData[e].from?-1!==(r=this._nodes[this._allData[e].from].outputs.indexOf(e+t))&&(this._nodes[this._allData[e].from].outputs[r]=e):-1!==(r=this._allInputIndices.indexOf(e+t))&&(this._allInputIndices[r]=e),this._allData[e].to.forEach(n=>{-1!==(r=this._nodes[n].inputs.indexOf(e+t))&&(this._nodes[n].inputs[r]=e)}),0===this._allData[e].to.length&&-1!==(r=this._allOutputIndices.indexOf(e+t))&&(this._allOutputIndices[r]=e)}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let t=1;t<e.outputs.length;t++)if(this._allData[e.outputs[t]].to.length>0)throw Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let r=e.inputs[0],n=e.outputs[0],i=this._allData[n].to;for(let r=0;r<e.inputs.length;r++){let n=this._allData[e.inputs[r]].to.indexOf(t);if(-1===n)throw Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[r]].to.splice(n,1)}this._allData[n]._to=[];let o=this._allOutputIndices.indexOf(n);if(-1!==o&&(this._allOutputIndices[o]=r),i&&i.length>0)for(let t of i){let e=this._nodes[t].inputs.indexOf(n);if(-1===e)throw Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[t].inputs[e]=r,this._allData[r].to.push(t)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if("Dropout"===e.opType){if(1!==e.inputs.length)throw Error("Dropout nodes should only contain one input. ");if(1!==e.outputs.length&&2!==e.outputs.length)throw Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===e.outputs.length&&0!==this._allData[e.outputs[1]]._to.length)throw Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)"Identity"===e.opType&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if("Conv"===t.opType){let e=this._allData[t.outputs[0]]._to;if(1===e.length&&this.isActivation(this._nodes[e[0]])){let r=this._nodes[e[0]];if("Clip"===r.opType)if(1===r.inputs.length)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch(e){t.attributes.set("activation_params","floats",[MIN_CLIP,MAX_CLIP])}else{if(!(r.inputs.length>=3)||void 0===this._allData[r.inputs[1]].tensor||void 0===this._allData[r.inputs[2]].tensor)continue;t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]])}t.attributes.set("activation","string",r.opType),this.deleteNode(e[0])}}}}}}),init_model=__esm({"web/lib/onnxjs/model.ts"(){"use strict";flatbuffers=__toESM(require_flatbuffers()),init_graph(),init_ort_generated(),import_onnx5=__toESM(require_onnx()),init_util(),Model2=class{constructor(){}load(t,e,r){let n;if(!r)try{this.loadFromOnnxFormat(t,e);return}catch(t){if(void 0!==r)throw t;n=t}try{this.loadFromOrtFormat(t,e)}catch(t){if(void 0!==r)throw t;throw Error(`Failed to load model as ONNX format: ${n}
as ORT format: ${t}`)}}loadFromOnnxFormat(t,e){let r=import_onnx5.onnx.ModelProto.decode(t);if(3>LongUtil.longToNumber(r.irVersion))throw Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(t=>({domain:t.domain,version:LongUtil.longToNumber(t.version)})),this._graph=Graph2.from(r.graph,e)}loadFromOrtFormat(t,e){let r=new flatbuffers.ByteBuffer(t),n=import_inference_session.InferenceSession.getRootAsInferenceSession(r).model();if(3>LongUtil.longToNumber(n.irVersion()))throw Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let t=0;t<n.opsetImportLength();t++){let e=n.opsetImport(t);this._opsets.push({domain:e?.domain(),version:LongUtil.longToNumber(e.version())})}this._graph=Graph2.from(n.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}}),init_session=__esm({"web/lib/onnxjs/session.ts"(){"use strict";init_backend2(),init_execution_plan(),init_instrument(),init_model(),Session=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,e,r){await this.profiler.event("session","Session.loadModel",async()=>{let n=await resolveBackend(this.backendHint);if(this.sessionHandler=n.createSessionHandler(this.context),this._model=new Model2,"string"==typeof t){let e=t.endsWith(".ort");{let r=await fetch(t),n=await r.arrayBuffer();this.initialize(new Uint8Array(n),e)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let n=new Uint8Array(t,e||0,r||t.byteLength);this.initialize(n)}})}initialize(t,e){if(this._initialized)throw Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,r,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let e=this.normalizeAndValidateInputs(t),r=await this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(r)})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let r=Array(t.size),n=0;for(let i=0;i<e.length;++i){let o=t.get(e[i]);if(!o)throw Error(`missing input tensor for: '${name}'`);r[n++]=o}t=r}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{let e=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),n=Array(e.length);for(let i=0;i<e.length;++i){let o=r[e[i]];n[i]=o.type.shape.dims,this.context.graphInputTypes.push(o.type.tensorType),this.context.graphInputDims.push(t[i].dims)}this.validateInputTensorDims(n,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let r=0;r<e.length;r++){let n=t[r],i=e[r].type;if(n!==i)throw Error(`input tensor[${r}] check failed: expected type '${n}' but got ${i}`)}}validateInputTensorDims(t,e,r){for(let n=0;n<e.length;n++){let i=t[n],o=e[n].dims;if(!this.compareTensorDims(i,o,r))throw Error(`input tensor[${n}] check failed: expected shape '[${i.join(",")}]' but got [${o.join(",")}]`)}}compareTensorDims(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]&&(!r||0!==t[n]))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let n=0;n<e.length;++n)r.set(e[n],t[n]);return r}initializeOps(t){let e=t.getNodes();this._ops=Array(e.length);for(let r=0;r<e.length;r++)this._ops[r]=this.sessionHandler.resolve(e[r],this._model.opsets,t)}}}}),init_session_handler_inference=__esm({"web/lib/onnxjs/session-handler-inference.ts"(){"use strict";init_esm(),init_tensor2(),OnnxjsSessionHandler=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}get inputMetadata(){throw Error("Getting model metadata is not supported in webgl backend.")}get outputMetadata(){throw Error("Getting model metadata is not supported in webgl backend.")}async dispose(){}async run(t,e,r){let n=new Map;for(let e in t)if(Object.hasOwnProperty.call(t,e)){let r=t[e];n.set(e,new Tensor4(r.dims,r.type,void 0,void 0,r.data))}let i=await this.session.run(n),o={};return i.forEach((t,e)=>{o[e]=new Tensor2(t.type,t.data,t.dims)}),o}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}}),backend_onnxjs_exports={};__export(backend_onnxjs_exports,{onnxjsBackend:()=>onnxjsBackend});var init_backend_onnxjs=__esm({"web/lib/backend-onnxjs.ts"(){"use strict";init_session(),init_session_handler_inference(),onnxjsBackend=new class{async init(){}async createInferenceSessionHandler(t,e){let r=new Session(e);return await r.loadModel(t),new OnnxjsSessionHandler(r)}}}});init_esm(),init_esm(),init_esm();var version2="1.23.2",index_default=esm_exports;{let onnxjsBackend2=(init_backend_onnxjs(),__toCommonJS(backend_onnxjs_exports)).onnxjsBackend;registerBackend("webgl",onnxjsBackend2,-10)}Object.defineProperty(env2.versions,"web",{value:version2,enumerable:!0});export{InferenceSession2 as InferenceSession,TRACE,TRACE_EVENT_BEGIN,TRACE_EVENT_END,TRACE_FUNC_BEGIN,TRACE_FUNC_END,Tensor2 as Tensor,index_default as default,env2 as env,registerBackend};