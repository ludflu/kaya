/**
 * @kaya/shudan - Go board rendering component
 * 
 * Beautiful theme inspired by traditional Go boards
 * Architecture: Extensible with CSS custom properties for future theming
 */

:root {
  /* Board colors - warm wood tones */
  --shudan-board-border-width: 0.15em;
  --shudan-board-border-color: #ca933a;
  --shudan-board-background-color: #f1b458;
  --shudan-board-foreground-color: #5e2e0c;

  /* Stone colors */
  --shudan-black-background-color: #222;
  --shudan-black-foreground-color: #eee;
  --shudan-white-background-color: #eee;
  --shudan-white-foreground-color: #222;

  /* Coordinate colors */
  --shudan-coord-color: rgba(94, 46, 12, 0.8);
}

/* Main Goban container */
.shudan-goban {
  position: relative;
  background: var(--shudan-board-background-color);
  background-size: cover;
  border: var(--shudan-board-border-width) solid var(--shudan-board-border-color);
  color: var(--shudan-board-foreground-color);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  user-select: none;
  -webkit-user-select: none;
  padding: 0.25em;
}

/* Board gradient overlay for depth */
.shudan-goban::after {
  content: '';
  position: absolute;
  top: calc(-1 * var(--shudan-board-border-width));
  left: calc(-1 * var(--shudan-board-border-width));
  bottom: calc(-1 * var(--shudan-board-border-width));
  right: calc(-1 * var(--shudan-board-border-width));
  background:
    linear-gradient(to bottom, rgba(234, 220, 192, 0.1), transparent),
    linear-gradient(to bottom, transparent, rgba(23, 10, 2, 0.05));
  pointer-events: none;
  z-index: 3;
}

/* Grid SVG */
.shudan-grid {
  pointer-events: none;
}

.shudan-gridline,
.shudan-hoshi {
  fill: var(--shudan-board-foreground-color);
}

/* Vertex container */
.shudan-vertex {
  box-sizing: border-box;
  transition: opacity 0.1s;
  position: relative;
  z-index: 1;
}

.shudan-vertex:hover {
  opacity: 0.95;
}

/* Stone styles with Sabaki SVG stones */
.shudan-stone {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 90%;
  height: 90%;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  transition:
    opacity 0.2s,
    transform 0.1s;
}

/* Dead stone styling - semi-transparent, no border */
.shudan-stone.dead {
  opacity: 0.5;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.shudan-stone.dead:hover {
  opacity: 0.7;
}

.shudan-stone_black {
  background-image: url('./stone-black.svg');
  filter: drop-shadow(0 0.12em 0.25em rgba(0, 0, 0, 0.6));
}

.shudan-stone_white {
  background-image: url('./stone-white.svg');
  filter: drop-shadow(0 0.12em 0.25em rgba(0, 0, 0, 0.4));
}

/* Coordinates */
.shudan-coord-x,
.shudan-coord-y {
  color: var(--shudan-coord-color);
  font-weight: 500;
  font-size: 0.6em;
}

/* Fuzzy stone placement - slight random offsets */
.shudan-vertex:not(.shudan-sign_0).shudan-shift_1 .shudan-stone {
  transform: translate(-50%, -50%) translate(-0.1em, 0);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_2 .shudan-stone {
  transform: translate(-50%, -50%) translate(0, -0.1em);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_3 .shudan-stone {
  transform: translate(-50%, -50%) translate(0.1em, 0);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_4 .shudan-stone {
  transform: translate(-50%, -50%) translate(0, 0.1em);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_5 .shudan-stone {
  transform: translate(-50%, -50%) translate(-0.06em, -0.06em);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_6 .shudan-stone {
  transform: translate(-50%, -50%) translate(0.06em, -0.06em);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_7 .shudan-stone {
  transform: translate(-50%, -50%) translate(0.06em, 0.06em);
}

.shudan-vertex:not(.shudan-sign_0).shudan-shift_8 .shudan-stone {
  transform: translate(-50%, -50%) translate(-0.06em, 0.06em);
}

/* Last move marker - filled circle in center of stone */
.shudan-last-move-marker {
  pointer-events: none;
  z-index: 10;
  opacity: 0.9;
}

/* Next move marker (square) - shows the next move in history */
.shudan-next-move-marker {
  pointer-events: none;
  z-index: 10;
  opacity: 0.7;
}

/* Ghost stone for next move preview */
.shudan-ghost-stone {
  pointer-events: none;
  z-index: 5;
}

/* Player color classes for ghost stones */
.shudan-sign_1 .shudan-ghost-stone {
  color: #000;
}

.shudan-sign_-1 .shudan-ghost-stone {
  color: #fff;
}

.shudan-sign_0 .shudan-ghost-stone {
  color: #000;
  /* Default to black */
}

/* Dimmed stones (dead stones in scoring mode) */
.shudan-vertex.shudan-dimmed {
  opacity: 0.5;
  position: relative;
}

/* Cross marker for dimmed stones */
.shudan-vertex.shudan-dimmed::before,
.shudan-vertex.shudan-dimmed::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 65%;
  height: 2px;
  background-color: currentColor;
  pointer-events: none;
  z-index: 10;
}

.shudan-vertex.shudan-dimmed::before {
  transform: translate(-50%, -50%) rotate(45deg);
}

.shudan-vertex.shudan-dimmed::after {
  transform: translate(-50%, -50%) rotate(-45deg);
}

/* Cross color based on stone color */
.shudan-vertex.shudan-dimmed.shudan-sign_1::before,
.shudan-vertex.shudan-dimmed.shudan-sign_1::after {
  background-color: #fff;
}

.shudan-vertex.shudan-dimmed.shudan-sign_-1::before,
.shudan-vertex.shudan-dimmed.shudan-sign_-1::after {
  background-color: #000;
}

/* Territory/paint overlay for scoring visualization - Sabaki style */
.shudan-vertex .shudan-paint {
  overflow: hidden;
  z-index: 0;
  /* Below cross markers (z-index: 10) */
}

.shudan-vertex .shudan-paint::before {
  content: '';
  display: block;
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  opacity: var(--shudan-paint-opacity, 0);
  background: transparent;
}

.shudan-vertex.shudan-paint_1 .shudan-paint::before {
  background: var(--shudan-black-background-color);
  /* #222 */
}

.shudan-vertex.shudan-paint_-1 .shudan-paint::before {
  background: var(--shudan-white-background-color);
  /* #eee */
}

/* Navigation cursor animation */
@keyframes cursor-pulse {
  0% {
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(1);
  }

  50% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.05);
  }

  100% {
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(1);
  }
}

.shudan-cursor-marker {
  box-shadow: 0 0 8px rgba(52, 152, 219, 0.5);
}

/* Note: Adjacent territory merging classes kept for potential future use
 * but currently territories are rendered as simple squares without borders */

/* Heat map styles (AI analysis visualization) */
.shudan-vertex .shudan-heat {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 90%;
  height: 90%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  opacity: 1;
  pointer-events: none;
  transition: opacity 0.5s;
  border: 1px solid rgba(0, 0, 0, 0.6);
  box-sizing: border-box;
  z-index: 25; /* Above markers (z-index: 20) and stones */
}

/* Heat map strengths (0-9) with color gradients */
/* Best moves (9) - Green #17dea3 */
.shudan-vertex.shudan-heat_9 .shudan-heat {
  background: #17dea3;
  opacity: 0.9 !important;
}

/* Great moves (8) - Blue #4998fe */
.shudan-vertex.shudan-heat_8 .shudan-heat {
  background: #4998fe;
  opacity: 0.9 !important;
}

/* Good moves (7) - Light Green #6ed543 */
.shudan-vertex.shudan-heat_7 .shudan-heat {
  background: #6ed543;
  opacity: 0.9 !important;
}

/* Okay moves (6) - Yellow #f1ad24 */
.shudan-vertex.shudan-heat_6 .shudan-heat {
  background: #f1ad24;
  opacity: 0.9 !important;
}

/* Poor moves (5 and below) - Red #fa412d */
.shudan-vertex.shudan-heat_5 .shudan-heat,
.shudan-vertex.shudan-heat_4 .shudan-heat,
.shudan-vertex.shudan-heat_3 .shudan-heat,
.shudan-vertex.shudan-heat_2 .shudan-heat,
.shudan-vertex.shudan-heat_1 .shudan-heat,
.shudan-vertex.shudan-heat_0 .shudan-heat {
  background: #fa412d;
  opacity: 0.8 !important;
}

/* Future expansion: Reserved classes for upcoming features
 * - .shudan-marker: For markers (circle, square, triangle, label, etc.)
 * - .shudan-selected: For highlighted vertices
 */
